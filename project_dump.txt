======================================== PROJECT CODE DUMP ========================================
Project: Group_4_DevOps
Root Directory: C:\Users\USER\VSCODE\SUMMATIVES\Group_4_DevOps
Generated: 2025-11-30 23:49:39
Total Files: 104
=================================================  =================================================


======================================== TABLE OF CONTENTS ========================================

   1. .dockerignore
   2. .flake8
   3. .github\CODEOWNERS
   4. .github\workflows\cd.yml
   5. .github\workflows\ci.yml
   6. .gitignore
   7. ansible\.gitignore
   8. ansible\ansible.cfg
   9. ansible\deploy.yml
  10. ansible\inventory.example
  11. ansible\README.md
  12. ansible\templates\docker-compose.yml.j2
  13. backend\.dockerignore
  14. backend\.env
  15. backend\.env.example
  16. backend\api\__init__.py
  17. backend\api\admin.py
  18. backend\api\apps.py
  19. backend\api\authentication.py
  20. backend\api\models\__init__.py
  21. backend\api\models\course.py
  22. backend\api\models\user.py
  23. backend\api\permissions.py
  24. backend\api\schema\swagger-ui
  25. backend\api\serializers\__init__.py
  26. backend\api\serializers\course_serializers.py
  27. backend\api\serializers\user_serializers.py
  28. backend\api\tests.py
  29. backend\api\urls.py
  30. backend\api\views\__init__.py
  31. backend\api\views\auth_views.py
  32. backend\api\views\course_views.py
  33. backend\api\views\user_views.py
  34. backend\Dockerfile
  35. backend\entrypoint.sh
  36. backend\learnhub_api\__init__.py
  37. backend\learnhub_api\asgi.py
  38. backend\learnhub_api\settings.py
  39. backend\learnhub_api\urls.py
  40. backend\learnhub_api\wsgi.py
  41. backend\manage.py
  42. backend\requirements.txt
  43. code_dump_generator.py
  44. docker-compose.yml
  45. Dockerfile
  46. frontend\.dockerignore
  47. frontend\.gitignore
  48. frontend\Dockerfile
  49. frontend\eslint.config.js
  50. frontend\index.html
  51. frontend\package.json
  52. frontend\postcss.config.js
  53. frontend\README.md
  54. frontend\src\api\authApi.ts
  55. frontend\src\api\axiosClient.ts
  56. frontend\src\api\courseApi.ts
  57. frontend\src\App.css
  58. frontend\src\App.tsx
  59. frontend\src\components\CourseCard.jsx
  60. frontend\src\components\ErrorBoundary.tsx
  61. frontend\src\components\LoadingSpinner.tsx
  62. frontend\src\components\Navbar.jsx
  63. frontend\src\components\ProtectedRoute.jsx
  64. frontend\src\components\PublicRoute.jsx
  65. frontend\src\components\Toast.tsx
  66. frontend\src\components\ToastContainer.tsx
  67. frontend\src\custom.d.ts
  68. frontend\src\hooks\useToast.ts
  69. frontend\src\index.css
  70. frontend\src\main.tsx
  71. frontend\src\pages\CourseDetail.jsx
  72. frontend\src\pages\Courses.jsx
  73. frontend\src\pages\CreateCourse.jsx
  74. frontend\src\pages\Dashboard.jsx
  75. frontend\src\pages\Login.jsx
  76. frontend\src\pages\Profile.jsx
  77. frontend\src\pages\Register.jsx
  78. frontend\src\store\authStore.ts
  79. frontend\src\store\toastStore.ts
  80. frontend\src\vite-env.d.ts
  81. frontend\tailwind.config.js
  82. frontend\tsconfig.app.json
  83. frontend\tsconfig.json
  84. frontend\tsconfig.node.json
  85. frontend\vite.config.ts
  86. LICENSE
  87. README.md
  88. requirements.example.txt
  89. terraform\main.tf
  90. terraform\modules\compute\main.tf
  91. terraform\modules\compute\outputs.tf
  92. terraform\modules\compute\variables.tf
  93. terraform\modules\container\main.tf
  94. terraform\modules\container\outputs.tf
  95. terraform\modules\container\variables.tf
  96. terraform\modules\database\main.tf
  97. terraform\modules\database\outputs.tf
  98. terraform\modules\database\variables.tf
  99. terraform\modules\networking\main.tf
 100. terraform\modules\networking\outputs.tf
 101. terraform\modules\networking\variables.tf
 102. terraform\outputs.tf
 103. terraform\providers.tf
 104. terraform\variables.tf



========================================== FILE CONTENTS ==========================================



================================ .dockerignore ================================
Full Path: C:\Users\USER\VSCODE\SUMMATIVES\Group_4_DevOps\.dockerignore
Size: 233 bytes
Modified: 2025-11-30 22:14:55
Extension: None
--------------------------------------------------------------------------------

# --- Docker ---
Dockerfile
.dockerignore

# --- Git ---
.gitignore

# --- Python Virtual Environment ---
venv/
env/
.venv/
my_env/

# --- Python Cache ---
__pycache__/
*.pyc

# --- Secrets & Local Config ---
.env


================================================================================


=================================== .flake8 ===================================
Full Path: C:\Users\USER\VSCODE\SUMMATIVES\Group_4_DevOps\.flake8
Size: 203 bytes
Modified: 2025-11-30 22:03:59
Extension: None
--------------------------------------------------------------------------------

[flake8]
exclude = 
    .venv,
    venv,
    env,
    __pycache__,
    .git,
    .pytest_cache,
    node_modules,
    migrations,
    */migrations/*,
max-line-length = 120
max-complexity = 10

================================================================================


============================== .github\CODEOWNERS ==============================
Full Path: C:\Users\USER\VSCODE\SUMMATIVES\Group_4_DevOps\.github\CODEOWNERS
Size: 35 bytes
Modified: 2025-11-30 22:03:59
Extension: None
--------------------------------------------------------------------------------

*  @Skomaiya @PMayala @Mpatrick12


================================================================================


=========================== .github\workflows\cd.yml ===========================
Full Path: C:\Users\USER\VSCODE\SUMMATIVES\Group_4_DevOps\.github\workflows\cd.yml
Size: 5466 bytes
Modified: 2025-11-30 22:26:47
Extension: .yml
--------------------------------------------------------------------------------

name: CD Pipeline

on:
  push:
    branches:
      - main

jobs:
  # ----------------------------------------
  # First job: Re-run CI checks before deploy
  # ----------------------------------------
  ci-checks:
    runs-on: ubuntu-latest

    steps:
      - name: Checkout code
        uses: actions/checkout@v4

      - name: Set up Python 3.11
        uses: actions/setup-python@v4
        with:
          python-version: '3.11'

      - name: Install Python dependencies
        run: |
          python -m pip install --upgrade pip
          pip install -r backend/requirements.txt

      - name: Run flake8
        run: flake8 .

      - name: Run Django tests
        working-directory: backend
        run: |
          python manage.py migrate --noinput
          python manage.py test --noinput

      - name: Build backend image for scanning
        run: docker build -t learnhub-backend backend/

      - name: Install Trivy
        run: |
          sudo apt-get update
          sudo apt-get install -y wget apt-transport-https gnupg lsb-release
          wget -qO - https://aquasecurity.github.io/trivy-repo/deb/public.key | sudo apt-key add -
          echo deb https://aquasecurity.github.io/trivy-repo/deb $(lsb_release -sc) main | sudo tee /etc/apt/sources.list.d/trivy.list
          sudo apt-get update
          sudo apt-get install -y trivy

      - name: Run Trivy scan
        run: trivy image --severity CRITICAL,HIGH --exit-code 1 learnhub-backend

      - name: Install tfsec
        run: |
          wget https://github.com/aquasecurity/tfsec/releases/latest/download/tfsec-linux-amd64 -O tfsec
          chmod +x tfsec
          sudo mv tfsec /usr/local/bin/tfsec

      - name: Run tfsec
        run: tfsec terraform/

  # ----------------------------------------
  # Deployment job (runs only if CI passes)
  # ----------------------------------------
  deploy:
    runs-on: ubuntu-latest
    needs: ci-checks

    env:
      ACR_LOGIN_SERVER: ${{ secrets.ACR_LOGIN_SERVER }}
      ACR_USERNAME: ${{ secrets.ACR_USERNAME }}
      ACR_PASSWORD: ${{ secrets.ACR_PASSWORD }}
      APP_VM_USERNAME: ${{ secrets.APP_VM_USERNAME }}
      BASTION_PUBLIC_IP: ${{ secrets.BASTION_PUBLIC_IP }}
      APP_PRIVATE_IP: ${{ secrets.APP_PRIVATE_IP }}
      SSH_PRIVATE_KEY: ${{ secrets.SSH_PRIVATE_KEY }}
      DB_HOST: ${{ secrets.DB_HOST }}
      DB_NAME: ${{ secrets.DB_NAME }}
      DB_USER: ${{ secrets.DB_USER }}
      DB_PASSWORD: ${{ secrets.DB_PASSWORD }}
      SECRET_KEY: ${{ secrets.SECRET_KEY }}
      ALLOWED_HOSTS: ${{ secrets.ALLOWED_HOSTS }}

    steps:

      - name: Checkout Code
        uses: actions/checkout@v4

      # ----------------------------------------
      # Login to Azure Container Registry
      # ----------------------------------------
      - name: Azure Container Registry Login
        run: |
          echo $ACR_PASSWORD | docker login $ACR_LOGIN_SERVER -u $ACR_USERNAME --password-stdin

      # ----------------------------------------
      # Build & push Backend image
      # ----------------------------------------
      - name: Build & Push Backend Image
        run: |
          docker build -t $ACR_LOGIN_SERVER/group4devops-backend:latest backend/
          docker push $ACR_LOGIN_SERVER/group4devops-backend:latest

      # ----------------------------------------
      # Build & push Frontend image
      # ----------------------------------------
      - name: Build & Push Frontend Image
        run: |
          docker build -t $ACR_LOGIN_SERVER/group4devops-frontend:latest frontend/
          docker push $ACR_LOGIN_SERVER/group4devops-frontend:latest

      # ----------------------------------------
      # SSH setup for Bastion → Private VM
      # ----------------------------------------
      - name: Configure SSH
        run: |
          echo "$SSH_PRIVATE_KEY" > ssh_key
          chmod 600 ssh_key

      # ----------------------------------------
      # Generate Ansible Inventory
      # ----------------------------------------
      - name: Generate Ansible Inventory
        run: |
          cat <<EOF > ansible_inventory
          [app_server]
          $APP_PRIVATE_IP ansible_user=$APP_VM_USERNAME ansible_ssh_private_key_file=ssh_key ansible_ssh_common_args='-o ProxyCommand="ssh -i ssh_key -o StrictHostKeyChecking=no $APP_VM_USERNAME@$BASTION_PUBLIC_IP -W %h:%p"'
          EOF

      # ----------------------------------------
      # Install Ansible
      # ----------------------------------------
      - name: Install Ansible
        run: |
          sudo apt-get update
          sudo apt-get install -y ansible

      # ----------------------------------------
      # Deploy to VM with Ansible
      # ----------------------------------------
      - name: Run Ansible Playbook
        env:
          ACR_LOGIN_SERVER: ${{ secrets.ACR_LOGIN_SERVER }}
          ACR_USERNAME: ${{ secrets.ACR_USERNAME }}
          ACR_PASSWORD: ${{ secrets.ACR_PASSWORD }}
          DB_HOST: ${{ secrets.DB_HOST }}
          DB_NAME: ${{ secrets.DB_NAME }}
          DB_USER: ${{ secrets.DB_USER }}
          DB_PASSWORD: ${{ secrets.DB_PASSWORD }}
          SECRET_KEY: ${{ secrets.SECRET_KEY }}
          ALLOWED_HOSTS: ${{ secrets.ALLOWED_HOSTS }}
        run: ansible-playbook ansible/deploy.yml -i ansible_inventory


================================================================================


=========================== .github\workflows\ci.yml ===========================
Full Path: C:\Users\USER\VSCODE\SUMMATIVES\Group_4_DevOps\.github\workflows\ci.yml
Size: 2410 bytes
Modified: 2025-11-30 22:30:35
Extension: .yml
--------------------------------------------------------------------------------

name: CI Pipeline

on:
  pull_request:
    branches:
      - main
  push:
    branches-ignore:
      - main

jobs:
  ci-checks:
    runs-on: ubuntu-latest

    steps:
      - name: Checkout code
        uses: actions/checkout@v4

      # -------------------------------
      # Python setup
      # -------------------------------
      - name: Set up Python 3.11
        uses: actions/setup-python@v4
        with:
          python-version: '3.11'

      - name: Install Python dependencies
        run: |
          python -m pip install --upgrade pip
          pip install -r backend/requirements.txt

      # -------------------------------
      # Linting
      # -------------------------------
      - name: Run flake8
        run: flake8 .

      # -------------------------------
      # Django tests
      # -------------------------------
      - name: Run Django tests
        working-directory: backend
        run: |
          python manage.py migrate --noinput
          python manage.py test --noinput

      # -------------------------------
      # Build Docker image (scan target)
      # -------------------------------
      - name: Build backend image for scanning
        run: docker build -t learnhub-backend backend/

      # -------------------------------
      # Trivy security scan
      # -------------------------------
      - name: Install Trivy
        run: |
          sudo apt-get update
          sudo apt-get install -y wget apt-transport-https gnupg lsb-release
          wget -qO - https://aquasecurity.github.io/trivy-repo/deb/public.key | sudo apt-key add -
          echo deb https://aquasecurity.github.io/trivy-repo/deb $(lsb_release -sc) main | sudo tee /etc/apt/sources.list.d/trivy.list
          sudo apt-get update
          sudo apt-get install -y trivy

      - name: Run Trivy scan (fail on high/critical)
        run: trivy image --severity CRITICAL,HIGH --exit-code 1 learnhub-backend

      # -------------------------------
      # tfsec IaC scan (FIXED install)
      # -------------------------------
      - name: Install tfsec
        run: |
          wget https://github.com/aquasecurity/tfsec/releases/latest/download/tfsec-linux-amd64 -O tfsec
          chmod +x tfsec
          sudo mv tfsec /usr/local/bin/tfsec

      - name: Run tfsec
        run: tfsec terraform/


================================================================================


================================== .gitignore ==================================
Full Path: C:\Users\USER\VSCODE\SUMMATIVES\Group_4_DevOps\.gitignore
Size: 3379 bytes
Modified: 2025-11-30 22:14:55
Extension: None
--------------------------------------------------------------------------------

# ============================================
# PYTHON / DJANGO BACKEND
# ============================================

# Python cache
__pycache__/
*.py[cod]
*$py.class
*.so

# Virtual environments
venv/
env/
ENV/
.venv/
.python-version

# Django specific
*.log
local_settings.py
db.sqlite3
db.sqlite3-journal
media/
staticfiles/

# ============================================
# ENVIRONMENT VARIABLES & SECRETS
# ============================================

.env
.env.local
.env.development.local
.env.test.local
.env.production.local
*.env
.env.*
!.env.example
ssh/

# Configuration files with secrets
config.local.yml
secrets.yml
*.key
*.pem
*.crt
*.cer
*.p12

# API keys and credentials
credentials.json
service-account.json
google-credentials.json

# ============================================
# IDE / EDITOR FILES
# ============================================

# Visual Studio Code
.vscode/
!.vscode/settings.json
!.vscode/tasks.json
!.vscode/launch.json
!.vscode/extensions.json
*.code-workspace

# JetBrains IDEs (PyCharm, WebStorm, IntelliJ)
.idea/
*.iml
*.iws
.idea_modules/

# Sublime Text
*.sublime-project
*.sublime-workspace

# Vim
*.swp
*.swo
*~
.vim/

# Emacs
*~
\#*\#
/.emacs.desktop
/.emacs.desktop.lock
*.elc

# ============================================
# OPERATING SYSTEM FILES
# ============================================

# macOS
.DS_Store
.AppleDouble
.LSOverride
._*
.Spotlight-V100
.Trashes

# Windows
Thumbs.db
Thumbs.db:encryptable
ehthumbs.db
ehthumbs_vista.db
Desktop.ini
$RECYCLE.BIN/

# Linux
.directory
.Trash-*

# ============================================
# DEVOPS & DEPLOYMENT
# ============================================

# Docker
*.log
.dockerignore.bak

# Terraform
*.tfstate
*.tfstate.*
*.tfvars
.terraform/
.terraform.lock.hcl
./terraform-outputs.json

# Kubernetes
*.kubeconfig

# CI/CD
.github/workflows/*.log

# ============================================
# TESTING & COVERAGE
# ============================================

# Python testing
.pytest_cache/
.coverage
htmlcov/
.tox/
coverage.xml
*.cover
.hypothesis/

# JavaScript testing
coverage/
.nyc_output/

# ============================================
# BUILD ARTIFACTS & TEMPORARY FILES
# ============================================

# Compiled files
*.class
*.dll
*.exe
*.o
*.so
*.dylib

# Package files
*.egg
*.egg-info/
dist/
build/
eggs/
.eggs/
lib/
lib64/
parts/
sdist/
var/
wheels/
*.whl

# Temporary files
*.tmp
*.temp
*.bak
*.swp
*.swo
.cache/
temp/

# Logs
logs/
*.log
npm-debug.log*
yarn-debug.log*
yarn-error.log*
pnpm-debug.log*
lerna-debug.log*

# ============================================
# DATABASE FILES (Local development)
# ============================================

*.sqlite
*.sqlite3
*.db

# PostgreSQL
*.dump
*.sql

# ============================================
# DOCUMENTATION BUILD
# ============================================

# Sphinx documentation
docs/_build/
site/

# ============================================
# MISC
# ============================================

# Backup files
*.bak
*.backup
*~

# Archive files
*.zip
*.tar.gz
*.rar

# Terraform
.terraform/
*.tfstate
*.tfstate.backup


================================================================================


============================== ansible\.gitignore ==============================
Full Path: C:\Users\USER\VSCODE\SUMMATIVES\Group_4_DevOps\ansible\.gitignore
Size: 232 bytes
Modified: 2025-11-30 22:14:55
Extension: None
--------------------------------------------------------------------------------

# Ansible Vault files
*.vault
vault.yml
group_vars/*/vault.yml

# Ansible retry files
*.retry

# Inventory with real IPs (use template)
inventory.ini
!inventory.ini.example

# Temporary files
*.tmp
*.swp
.ansible/



================================================================================


============================= ansible\ansible.cfg =============================
Full Path: C:\Users\USER\VSCODE\SUMMATIVES\Group_4_DevOps\ansible\ansible.cfg
Size: 131 bytes
Modified: 2025-11-30 22:14:55
Extension: .cfg
--------------------------------------------------------------------------------

[defaults]
inventory = inventory.ini
host_key_checking = False

[privilege_escalation]
become = True
become_method = sudo



================================================================================


============================== ansible\deploy.yml ==============================
Full Path: C:\Users\USER\VSCODE\SUMMATIVES\Group_4_DevOps\ansible\deploy.yml
Size: 5831 bytes
Modified: 2025-11-30 22:14:55
Extension: .yml
--------------------------------------------------------------------------------

---
- name: Deploy Group 4 DevOps Application to Production
  hosts: app_server
  become: yes
  
  vars:
    app_dir: "/opt/group4devops"
    project_name: "group4devops"
    acr_login_server: "{{ lookup('env', 'ACR_LOGIN_SERVER') }}"
    acr_username: "{{ lookup('env', 'ACR_USERNAME') }}"
    acr_password: "{{ lookup('env', 'ACR_PASSWORD') }}"
    image_tag: "{{ lookup('env', 'IMAGE_TAG') | default('latest') }}"
    db_host: "{{ lookup('env', 'DB_HOST') }}"
    db_name: "{{ lookup('env', 'DB_NAME') | default('group4devops_db') }}"
    db_user: "{{ lookup('env', 'DB_USER') | default('dbadmin') }}"
    db_password: "{{ lookup('env', 'DB_PASSWORD') }}"
    secret_key: "{{ lookup('env', 'SECRET_KEY') | default('change-this-in-production-' + 99999999 | random | string) }}"
    debug: "{{ lookup('env', 'DEBUG') | default('False') }}"
    allowed_hosts: "{{ lookup('env', 'ALLOWED_HOSTS') | default('*') }}"

  tasks:
    - name: Update apt cache
      apt:
        update_cache: yes
        cache_valid_time: 3600

    - name: Install required system packages
      apt:
        name:
          - apt-transport-https
          - ca-certificates
          - curl
          - gnupg
          - lsb-release
          - git
          - python3-pip
        state: present

    # Task 1: Install Docker
    - name: Add Docker GPG key
      apt_key:
        url: https://download.docker.com/linux/ubuntu/gpg
        state: present

    - name: Add Docker repository
      apt_repository:
        repo: "deb [arch=amd64] https://download.docker.com/linux/ubuntu {{ ansible_distribution_release }} stable"
        state: present

    - name: Install Docker packages
      apt:
        name:
          - docker-ce
          - docker-ce-cli
          - containerd.io
        state: present
        update_cache: yes

    - name: Start and enable Docker service
      systemd:
        name: docker
        state: started
        enabled: yes

    - name: Install Docker Compose
      get_url:
        url: "https://github.com/docker/compose/releases/download/v2.24.0/docker-compose-linux-x86_64"
        dest: /usr/local/bin/docker-compose
        mode: '0755'

    - name: Install Docker Python module (for Ansible docker modules)
      pip:
        name: 
          - docker
          - docker-compose
        state: present

    - name: Add azureuser to docker group
      user:
        name: azureuser
        groups: docker
        append: yes

    - name: Reset SSH connection to allow group changes to take effect
      meta: reset_connection

    # Task 2: Create application directory
    - name: Create application directory
      file:
        path: "{{ app_dir }}"
        state: directory
        owner: azureuser
        group: azureuser
        mode: '0755'

    # Task 3: Authenticate to Azure Container Registry
    - name: Login to Azure Container Registry
      docker_login:
        registry_url: "{{ acr_login_server }}"
        username: "{{ acr_username }}"
        password: "{{ acr_password }}"
        reauthorize: yes
      become_user: azureuser
      environment:
        HOME: "/home/azureuser"

    # Task 4: Pull latest Docker images
    - name: Pull backend Docker image from ACR
      docker_image:
        name: "{{ acr_login_server }}/{{ project_name }}-backend"
        tag: "{{ image_tag }}"
        source: pull
        state: present
      become_user: azureuser
      environment:
        HOME: "/home/azureuser"

    - name: Pull frontend Docker image from ACR
      docker_image:
        name: "{{ acr_login_server }}/{{ project_name }}-frontend"
        tag: "{{ image_tag }}"
        source: pull
        state: present
      become_user: azureuser
      environment:
        HOME: "/home/azureuser"

    - name: Create docker-compose.yml from template
      template:
        src: docker-compose.yml.j2
        dest: "{{ app_dir }}/docker-compose.yml"
        owner: azureuser
        group: azureuser
        mode: '0644'

    # Task 5: Deploy/restart application with docker-compose
    - name: Stop existing containers (if any)
      command: docker-compose down
      args:
        chdir: "{{ app_dir }}"
      become_user: azureuser
      environment:
        HOME: "/home/azureuser"
      ignore_errors: yes

    - name: Deploy application with docker-compose up -d
      command: docker-compose up -d --remove-orphans
      args:
        chdir: "{{ app_dir }}"
      become_user: azureuser
      environment:
        HOME: "/home/azureuser"

    - name: Wait for backend to be ready
      wait_for:
        port: 8000
        host: localhost
        delay: 10
        timeout: 120
        state: started

    - name: Wait for frontend to be ready
      wait_for:
        port: 80
        host: localhost
        delay: 5
        timeout: 60
        state: started

    - name: Show running containers
      command: docker ps
      become_user: azureuser
      register: container_status

    - name: Display container status
      debug:
        var: container_status.stdout_lines

    - name: Get container logs (last 20 lines)
      shell: docker-compose logs --tail=20
      args:
        chdir: "{{ app_dir }}"
      become_user: azureuser
      register: container_logs
      ignore_errors: yes

    - name: Display container logs
      debug:
        var: container_logs.stdout_lines
      when: container_logs is defined

    - name: Display deployment success message
      debug:
        msg: 
          - "Deployment completed successfully!"
          - "Backend accessible at: http://{{ ansible_host }}:8000"
          - "Frontend accessible at: http://{{ ansible_host }}:80"

================================================================================


========================== ansible\inventory.example ==========================
Full Path: C:\Users\USER\VSCODE\SUMMATIVES\Group_4_DevOps\ansible\inventory.example
Size: 635 bytes
Modified: 2025-11-30 22:14:55
Extension: .example
--------------------------------------------------------------------------------

# Example Ansible Inventory for LearnHub Deployment
# Copy this file to inventory.ini and update with your actual values
# Get values from: terraform output

[app_server]
app-vm ansible_host=10.0.2.4

[app_server:vars]
ansible_user=adminuser
ansible_ssh_private_key_file=~/.ssh/id_rsa
ansible_ssh_common_args='-o ProxyCommand="ssh -W %h:%p -q adminuser@20.123.45.67"'

# Instructions:
# 1. Replace 10.0.2.4 with your App VM private IP (terraform output app_private_ip)
# 2. Replace 20.123.45.67 with your Bastion public IP (terraform output bastion_public_ip)
# 3. Ensure your SSH key path is correct (~/.ssh/id_rsa)



================================================================================


============================== ansible\README.md ==============================
Full Path: C:\Users\USER\VSCODE\SUMMATIVES\Group_4_DevOps\ansible\README.md
Size: 5608 bytes
Modified: 2025-11-30 22:14:55
Extension: .md
--------------------------------------------------------------------------------

# Ansible Deployment Configuration

This directory contains Ansible playbooks and configuration files for deploying the LearnHub application to the Azure VM.

## Prerequisites

1. **Ansible installed** on your local machine:
   ```bash
   # On macOS/Linux
   pip install ansible
   
   # On Windows (using WSL or Git Bash)
   pip install ansible
   ```

2. **SSH access configured**:
   - Your SSH private key should be at `~/.ssh/id_rsa`
   - The same key pair used in Terraform should be available

3. **Terraform outputs**:
   - Run `terraform output` to get the required values

## Setup Instructions

### 1. Get Infrastructure Information

After running `terraform apply`, get the required values:

```bash
cd terraform
terraform output bastion_public_ip
terraform output app_private_ip
terraform output acr_login_server
terraform output acr_admin_username
terraform output acr_admin_password
terraform output db_host
```

### 2. Update Inventory File

Copy the example inventory and update with your values:

```bash
cp ansible/inventory.example ansible/inventory.ini
```

Then edit `ansible/inventory.ini` and replace:
- `<PRIVATE_IP_OF_APP_VM>` or the example IP with your actual private IP from `terraform output app_private_ip`
- `<BASTION_PUBLIC_IP>` or the example IP with your actual bastion IP from `terraform output bastion_public_ip`

Example:
```ini
[app_server]
app-vm ansible_host=10.0.2.4

[app_server:vars]
ansible_user=adminuser
ansible_ssh_private_key_file=~/.ssh/id_rsa
ansible_ssh_common_args='-o ProxyCommand="ssh -W %h:%p -q adminuser@20.123.45.67"'
```

### 3. Test SSH Connection

Test that you can SSH through the bastion:

```bash
ssh -J adminuser@<BASTION_IP> adminuser@<APP_VM_PRIVATE_IP>
```

### 4. Run the Playbook

#### Manual Deployment

```bash
cd ansible

# Set required variables
export ACR_LOGIN_SERVER="your-acr.azurecr.io"
export ACR_USERNAME="your-acr-username"
export ACR_PASSWORD="your-acr-password"
export IMAGE_NAME="learnhub-app"
export IMAGE_TAG="latest"
export DB_HOST="your-db-host.postgres.database.azure.com"
export DB_PASSWORD="your-db-password"

# Run the playbook
ansible-playbook deploy.yml \
  -e acr_login_server=$ACR_LOGIN_SERVER \
  -e acr_username=$ACR_USERNAME \
  -e acr_password=$ACR_PASSWORD \
  -e image_name=$IMAGE_NAME \
  -e image_tag=$IMAGE_TAG \
  -e db_host=$DB_HOST \
  -e db_password=$DB_PASSWORD
```

#### Using Ansible Vault (Recommended for Secrets)

Create a vault file for sensitive data:

```bash
ansible-vault create group_vars/app_server/vault.yml
```

Add your secrets:
```yaml
acr_username: your-acr-username
acr_password: your-acr-password
db_password: your-db-password
```

Then run:
```bash
ansible-playbook deploy.yml --ask-vault-pass
```

## Playbook Tasks

The `deploy.yml` playbook performs the following tasks:

1. **System Updates**: Updates apt cache
2. **Install Packages**: Installs git, curl, wget, and other required packages
3. **Install Docker**: Installs Docker CE and Docker Compose
4. **Configure Docker**: Adds user to docker group
5. **ACR Authentication**: Logs into Azure Container Registry
6. **Deploy Application**: Pulls latest image and starts containers with docker-compose

## Variables

| Variable | Description | Required | Default |
|----------|-------------|----------|---------|
| `acr_login_server` | ACR login server URL | Yes | - |
| `acr_username` | ACR admin username | Yes | - |
| `acr_password` | ACR admin password | Yes | - |
| `image_name` | Docker image name | No | `learnhub-app` |
| `image_tag` | Docker image tag | No | `latest` |
| `db_host` | Database hostname | Yes | - |
| `db_name` | Database name | No | `learnhub_db` |
| `db_user` | Database username | No | `myadmin` |
| `db_password` | Database password | Yes | - |

## Troubleshooting

### SSH Connection Issues

1. **Verify bastion is accessible**:
   ```bash
   ssh adminuser@<BASTION_IP>
   ```

2. **Check SSH key permissions**:
   ```bash
   chmod 600 ~/.ssh/id_rsa
   ```

3. **Test proxy command manually**:
   ```bash
   ssh -o ProxyCommand="ssh -W %h:%p -q adminuser@<BASTION_IP>" adminuser@<APP_VM_IP>
   ```

### Docker Issues

1. **Check Docker is running**:
   ```bash
   ansible app_server -m command -a "systemctl status docker"
   ```

2. **Verify ACR login**:
   ```bash
   ansible app_server -m shell -a "docker login {{ acr_login_server }} -u {{ acr_username }} -p {{ acr_password }}"
   ```

### Playbook Failures

1. **Run with verbose output**:
   ```bash
   ansible-playbook deploy.yml -vvv
   ```

2. **Test connectivity first**:
   ```bash
   ansible app_server -m ping
   ```

## Integration with CD Pipeline

For GitHub Actions CD pipeline, use these steps:

```yaml
- name: Run Ansible Playbook
  run: |
    cd ansible
    ansible-playbook deploy.yml \
      -e acr_login_server=${{ secrets.ACR_LOGIN_SERVER }} \
      -e acr_username=${{ secrets.ACR_USERNAME }} \
      -e acr_password=${{ secrets.ACR_PASSWORD }} \
      -e image_name=learnhub-app \
      -e image_tag=${{ github.sha }} \
      -e db_host=${{ secrets.DB_HOST }} \
      -e db_password=${{ secrets.DB_PASSWORD }}
```

## Notes

- The playbook uses `become: yes` to run tasks with sudo privileges
- Docker Compose is installed both as a plugin and standalone for compatibility
- The application directory is created at `/opt/learnhub`
- Containers are always recreated on deployment to ensure latest changes



================================================================================


=================== ansible\templates\docker-compose.yml.j2 ===================
Full Path: C:\Users\USER\VSCODE\SUMMATIVES\Group_4_DevOps\ansible\templates\docker-compose.yml.j2
Size: 1543 bytes
Modified: 2025-11-30 22:14:55
Extension: .j2
--------------------------------------------------------------------------------

version: '3.8'

services:
  backend:
    image: {{ acr_login_server }}/{{ project_name }}-backend:{{ image_tag }}
    container_name: group4devops-backend
    restart: unless-stopped
    ports:
      - "8000:8000"
    environment:
      - DB_ENGINE=django.db.backends.postgresql
      - DB_NAME={{ db_name }}
      - DB_USER={{ db_user }}
      - DB_PASSWORD={{ db_password }}
      - DB_HOST={{ db_host }}
      - DB_PORT=5432
      - SECRET_KEY={{ secret_key }}
      - DEBUG={{ debug }}
      - ALLOWED_HOSTS={{ allowed_hosts }}
    healthcheck:
      test: ["CMD-SHELL", "curl -f http://localhost:8000/api/health/ || exit 1"]
      interval: 30s
      timeout: 10s
      retries: 3
      start_period: 40s
    networks:
      - app-network
    command: >
      sh -c "python manage.py migrate --noinput &&
             python manage.py collectstatic --noinput &&
             gunicorn backend.wsgi:application --bind 0.0.0.0:8000 --workers 3 --timeout 120"

  frontend:
    image: {{ acr_login_server }}/{{ project_name }}-frontend:{{ image_tag }}
    container_name: group4devops-frontend
    restart: unless-stopped
    ports:
      - "80:80"
      - "3000:3000"
    environment:
      - REACT_APP_API_URL=http://{{ ansible_host }}:8000
    depends_on:
      - backend
    healthcheck:
      test: ["CMD-SHELL", "curl -f http://localhost || exit 1"]
      interval: 30s
      timeout: 10s
      retries: 3
    networks:
      - app-network

networks:
  app-network:
    driver: bridge

================================================================================


============================ backend\.dockerignore ============================
Full Path: C:\Users\USER\VSCODE\SUMMATIVES\Group_4_DevOps\backend\.dockerignore
Size: 559 bytes
Modified: 2025-11-30 22:14:55
Extension: None
--------------------------------------------------------------------------------

# Python
__pycache__/
*.py[cod]
*$py.class
*.so
.Python
*.egg-info/
dist/
build/
*.egg

# Virtual environments
venv/
env/
ENV/
.venv/
my_env/

# Django
*.log
db.sqlite3
db.sqlite3-journal
/media
/staticfiles
/static

# IDE
.vscode/
.idea/
*.swp
*.swo
*~

# Environment variables
.env
.env.local
.env.*.local

# Testing
.pytest_cache/
.coverage
htmlcov/
.tox/

# OS
.DS_Store
Thumbs.db

# Git
.git/
.gitignore

# Documentation
*.md
README.md

# Docker
Dockerfile*
.dockerignore
docker-compose*.yml



================================================================================


================================= backend\.env =================================
Full Path: C:\Users\USER\VSCODE\SUMMATIVES\Group_4_DevOps\backend\.env
Size: 493 bytes
Modified: 2025-11-30 22:03:59
Extension: None
--------------------------------------------------------------------------------

﻿# Django Settings
SECRET_KEY=your-secret-key-here
DEBUG=True
ALLOWED_HOSTS=localhost,127.0.0.1

# Database Configuration
# For SQLite (Development)
DB_ENGINE=django.db.backends.sqlite3
DB_NAME=db.sqlite3

# For PostgreSQL (Production)
# DB_ENGINE=django.db.backends.postgresql
# DB_NAME=learnhub_db
# DB_USER=your_db_user
# DB_PASSWORD=your_db_password
# DB_HOST=localhost
# DB_PORT=5432

# CORS Settings
CORS_ALLOWED_ORIGINS=http://localhost:5173,http://127.0.0.1:5173


================================================================================


============================= backend\.env.example =============================
Full Path: C:\Users\USER\VSCODE\SUMMATIVES\Group_4_DevOps\backend\.env.example
Size: 493 bytes
Modified: 2025-11-30 22:03:59
Extension: .example
--------------------------------------------------------------------------------

﻿# Django Settings
SECRET_KEY=your-secret-key-here
DEBUG=True
ALLOWED_HOSTS=localhost,127.0.0.1

# Database Configuration
# For SQLite (Development)
DB_ENGINE=django.db.backends.sqlite3
DB_NAME=db.sqlite3

# For PostgreSQL (Production)
# DB_ENGINE=django.db.backends.postgresql
# DB_NAME=learnhub_db
# DB_USER=your_db_user
# DB_PASSWORD=your_db_password
# DB_HOST=localhost
# DB_PORT=5432

# CORS Settings
CORS_ALLOWED_ORIGINS=http://localhost:5173,http://127.0.0.1:5173


================================================================================


=========================== backend\api\__init__.py ===========================
Full Path: C:\Users\USER\VSCODE\SUMMATIVES\Group_4_DevOps\backend\api\__init__.py
Size: 0 bytes
Modified: 2025-11-30 22:03:59
Extension: .py
--------------------------------------------------------------------------------



================================================================================


============================= backend\api\admin.py =============================
Full Path: C:\Users\USER\VSCODE\SUMMATIVES\Group_4_DevOps\backend\api\admin.py
Size: 242 bytes
Modified: 2025-11-30 22:03:59
Extension: .py
--------------------------------------------------------------------------------

from django.contrib import admin
from django.contrib.auth.admin import UserAdmin
from django.contrib.auth import get_user_model

CustomUser = get_user_model()


@admin.register(CustomUser)
class CustomUserAdmin(UserAdmin):
    pass


================================================================================


============================= backend\api\apps.py =============================
Full Path: C:\Users\USER\VSCODE\SUMMATIVES\Group_4_DevOps\backend\api\apps.py
Size: 551 bytes
Modified: 2025-11-30 22:03:59
Extension: .py
--------------------------------------------------------------------------------

from django.apps import AppConfig


class ApiConfig(AppConfig):
    default_auto_field = 'django.db.models.BigAutoField'
    name = 'api'

    def ready(self):
        from django.db.models.signals import post_save
        from django.dispatch import receiver
        from .models.user import User, Profile

        @receiver(post_save, sender=User)
        def create_user_profile(sender, instance, created, **kwargs):
            if created and not hasattr(instance, 'profile'):
                Profile.objects.create(user=instance)


================================================================================


======================== backend\api\authentication.py ========================
Full Path: C:\Users\USER\VSCODE\SUMMATIVES\Group_4_DevOps\backend\api\authentication.py
Size: 1602 bytes
Modified: 2025-11-30 22:03:59
Extension: .py
--------------------------------------------------------------------------------

from rest_framework_simplejwt.authentication import JWTAuthentication
from rest_framework_simplejwt.tokens import RefreshToken
from rest_framework_simplejwt.exceptions import InvalidToken
from django.utils.translation import gettext_lazy as _
from django.contrib.auth.models import AnonymousUser


class CustomJWTAuthentication(JWTAuthentication):
    """
    Custom authentication class to reject tokens for inactive users.
    """

    def get_user(self, validated_token):
        user = super().get_user(validated_token)

        # Block inactive or missing users
        if not user or isinstance(user, AnonymousUser):
            raise InvalidToken(_("Invalid token: User not found."))

        if not user.is_active:
            raise InvalidToken(_("User account is inactive or suspended."))

        return user


def get_tokens_for_user(user):
    """
    Generates JWT refresh and access tokens, including useful claims.
    """
    refresh = RefreshToken.for_user(user)
    access = refresh.access_token

    # Optional: Embed extra data into access token
    access['username'] = user.username
    access['role'] = _get_user_role(user)

    return {
        'refresh': str(refresh),
        'access': str(access),
    }


def _get_user_role(user):
    """
    Maps Django group or user role to a simple role string.
    """
    if user.groups.filter(name='Admin').exists():
        return 'admin'
    elif user.role == 'instructor':
        return 'instructor'
    elif user.role == 'student':
        return 'student'
    return 'user'


================================================================================


======================== backend\api\models\__init__.py ========================
Full Path: C:\Users\USER\VSCODE\SUMMATIVES\Group_4_DevOps\backend\api\models\__init__.py
Size: 148 bytes
Modified: 2025-11-30 22:03:59
Extension: .py
--------------------------------------------------------------------------------

from .user import User, Profile
from .course import Course, Lesson, Enrollment

__all__ = ["User", "Profile", "Course", "Lesson", "Enrollment"]


================================================================================


========================= backend\api\models\course.py =========================
Full Path: C:\Users\USER\VSCODE\SUMMATIVES\Group_4_DevOps\backend\api\models\course.py
Size: 3980 bytes
Modified: 2025-11-30 22:03:59
Extension: .py
--------------------------------------------------------------------------------

from django.db import models
from django.contrib.auth import get_user_model

User = get_user_model()


class Course(models.Model):
    """
    Course model for LearnHub LMS.
    Instructors can create and manage courses.
    """
    STATUS_CHOICES = (
        ('draft', 'Draft'),
        ('published', 'Published'),
    )

    LEVEL_CHOICES = (
        ('beginner', 'Beginner'),
        ('intermediate', 'Intermediate'),
        ('advanced', 'Advanced'),
    )

    title = models.CharField(max_length=200)
    slug = models.SlugField(max_length=200, unique=True)
    description = models.TextField()
    instructor = models.ForeignKey(User, on_delete=models.CASCADE, related_name='created_courses')

    # Course metadata
    category = models.CharField(max_length=100, blank=True)
    level = models.CharField(max_length=20, choices=LEVEL_CHOICES, default='beginner')
    duration_hours = models.IntegerField(default=0, help_text="Estimated course duration in hours")

    # Course content
    thumbnail = models.URLField(blank=True, help_text="URL to course thumbnail image")
    preview_video_url = models.URLField(blank=True, help_text="Preview video URL")

    # Course status
    status = models.CharField(max_length=20, choices=STATUS_CHOICES, default='draft')
    is_featured = models.BooleanField(default=False)

    # Pricing
    price = models.DecimalField(max_digits=10, decimal_places=2, default=0.00)

    # Analytics (will be automatically updated)
    enrolled_students_count = models.IntegerField(default=0)

    created_at = models.DateTimeField(auto_now_add=True)
    updated_at = models.DateTimeField(auto_now=True)

    class Meta:
        ordering = ['-created_at']

    def __str__(self):
        return f"{self.title} by {self.instructor.username}"


class Enrollment(models.Model):
    """
    Enrollment model to track student enrollments in courses.
    """
    STATUS_CHOICES = (
        ('active', 'Active'),
        ('completed', 'Completed'),
        ('dropped', 'Dropped'),
    )

    student = models.ForeignKey(User, on_delete=models.CASCADE, related_name='enrollments')
    course = models.ForeignKey(Course, on_delete=models.CASCADE, related_name='enrollments')
    status = models.CharField(max_length=20, choices=STATUS_CHOICES, default='active')

    # Progress tracking
    progress_percentage = models.IntegerField(default=0)
    last_accessed = models.DateTimeField(auto_now=True)

    enrolled_at = models.DateTimeField(auto_now_add=True)
    completed_at = models.DateTimeField(null=True, blank=True)

    class Meta:
        unique_together = [['student', 'course']]
        ordering = ['-enrolled_at']

    def __str__(self):
        return f"{self.student.username} - {self.course.title}"


class Lesson(models.Model):
    """
    Lesson model for course content (text lessons and videos).
    """
    LESSON_TYPE_CHOICES = (
        ('text', 'Text'),
        ('video', 'Video'),
    )

    course = models.ForeignKey(Course, on_delete=models.CASCADE, related_name='lessons')
    title = models.CharField(max_length=200)
    order = models.IntegerField(default=0, help_text="Order within the course")

    lesson_type = models.CharField(max_length=20, choices=LESSON_TYPE_CHOICES, default='text')

    # Text content
    content = models.TextField(blank=True)

    # Video content
    video_url = models.URLField(blank=True, help_text="Video lesson URL")
    video_duration = models.IntegerField(default=0, help_text="Duration in minutes")

    # Additional resources
    resources = models.JSONField(default=list, blank=True, help_text="Additional resources (downloads, links)")

    created_at = models.DateTimeField(auto_now_add=True)
    updated_at = models.DateTimeField(auto_now=True)

    class Meta:
        ordering = ['order']

    def __str__(self):
        return f"{self.course.title} - {self.title}"


================================================================================


========================== backend\api\models\user.py ==========================
Full Path: C:\Users\USER\VSCODE\SUMMATIVES\Group_4_DevOps\backend\api\models\user.py
Size: 2413 bytes
Modified: 2025-11-30 22:03:59
Extension: .py
--------------------------------------------------------------------------------

from django.contrib.auth.models import AbstractUser
from django.db import models


class User(AbstractUser):
    ROLE_CHOICES = (
        ('student', 'Student'),
        ('instructor', 'Instructor'),
    )

    email = models.EmailField(unique=True)
    role = models.CharField(max_length=10, choices=ROLE_CHOICES)
    phone_number = models.CharField(max_length=20, blank=True)
    is_active = models.BooleanField(default=True)
    is_verified = models.BooleanField(default=False)

    country = models.CharField(max_length=100, blank=True)
    city = models.CharField(max_length=100, blank=True)

    created_at = models.DateTimeField(auto_now_add=True)
    updated_at = models.DateTimeField(auto_now=True)

    USERNAME_FIELD = 'email'
    REQUIRED_FIELDS = ['username']

    def __str__(self):
        return f"{self.username} ({self.role})"


class Profile(models.Model):
    """
    Profile model for both Students and Instructors.
    Some fields are specific to instructors while others are common.
    """
    user = models.OneToOneField(User, on_delete=models.CASCADE, related_name='profile')
    bio = models.TextField(blank=True, help_text="User biography")

    # Instructor-specific fields
    expertise = models.TextField(blank=True, help_text="Areas of expertise (for instructors)")
    credentials = models.JSONField(default=list, blank=True, help_text="Academic credentials and certifications")
    teaching_experience = models.IntegerField(default=0, help_text="Years of teaching experience (for instructors)")

    # Student-specific fields
    enrolled_courses_count = models.IntegerField(default=0, help_text="Number of courses enrolled (for students)")
    completed_courses_count = models.IntegerField(default=0, help_text="Number of completed courses (for students)")

    # Common fields
    languages = models.JSONField(default=list, blank=True, help_text="Languages spoken")
    profile_picture = models.URLField(blank=True, help_text="URL to profile picture")

    linkedin_url = models.URLField(blank=True)
    github_url = models.URLField(blank=True, help_text="GitHub profile (for instructors)")
    website = models.URLField(blank=True)

    created_at = models.DateTimeField(auto_now_add=True)
    updated_at = models.DateTimeField(auto_now=True)

    def __str__(self):
        return f"Profile of {self.user.username}"


================================================================================


========================== backend\api\permissions.py ==========================
Full Path: C:\Users\USER\VSCODE\SUMMATIVES\Group_4_DevOps\backend\api\permissions.py
Size: 1034 bytes
Modified: 2025-11-30 22:03:59
Extension: .py
--------------------------------------------------------------------------------

from rest_framework import permissions


class IsAdmin(permissions.BasePermission):
    """
    Custom permission to only allow admin users
    """

    def has_permission(self, request, view):
        return request.user and request.user.is_staff


class IsStudent(permissions.BasePermission):
    """
    Custom permission to only allow students to perform certain actions
    """

    def has_permission(self, request, view):
        return request.user and request.user.role == 'student'


class IsInstructor(permissions.BasePermission):
    """
    Custom permission to only allow instructors to perform certain actions
    """

    def has_permission(self, request, view):
        return request.user and request.user.role == 'instructor'


class IsCourseOwner(permissions.BasePermission):
    """
    Permission to only allow course owners (instructors) to modify their courses
    """

    def has_object_permission(self, request, view, obj):
        return obj.instructor == request.user


================================================================================


======================== backend\api\schema\swagger-ui ========================
Full Path: C:\Users\USER\VSCODE\SUMMATIVES\Group_4_DevOps\backend\api\schema\swagger-ui
Size: 0 bytes
Modified: 2025-11-30 22:03:59
Extension: None
--------------------------------------------------------------------------------



================================================================================


===================== backend\api\serializers\__init__.py =====================
Full Path: C:\Users\USER\VSCODE\SUMMATIVES\Group_4_DevOps\backend\api\serializers\__init__.py
Size: 778 bytes
Modified: 2025-11-30 22:03:59
Extension: .py
--------------------------------------------------------------------------------

from .user_serializers import (
    UserSerializer,
    ProfileSerializer,
    UserRegistrationSerializer,
    LogoutSerializer,
    CustomTokenObtainPairSerializer,
)

from .course_serializers import (
    CourseSerializer,
    CourseCreateSerializer,
    CourseListSerializer,
    LessonSerializer,
    LessonCreateSerializer,
    EnrollmentSerializer,
    EnrollmentCreateSerializer,
)

__all__ = [
    "UserSerializer",
    "ProfileSerializer",
    "UserRegistrationSerializer",
    "LogoutSerializer",
    "CustomTokenObtainPairSerializer",
    "CourseSerializer",
    "CourseCreateSerializer",
    "CourseListSerializer",
    "LessonSerializer",
    "LessonCreateSerializer",
    "EnrollmentSerializer",
    "EnrollmentCreateSerializer",
]


================================================================================


================ backend\api\serializers\course_serializers.py ================
Full Path: C:\Users\USER\VSCODE\SUMMATIVES\Group_4_DevOps\backend\api\serializers\course_serializers.py
Size: 5275 bytes
Modified: 2025-11-30 22:14:55
Extension: .py
--------------------------------------------------------------------------------

from rest_framework import serializers
from django.utils.text import slugify
from api.models.course import Course, Lesson, Enrollment
from api.serializers.user_serializers import UserSerializer


class LessonSerializer(serializers.ModelSerializer):
    """Serializer for Lesson model"""

    class Meta:
        model = Lesson
        fields = [
            'id', 'course', 'title', 'order', 'lesson_type',
            'content', 'video_url', 'video_duration', 'resources',
            'created_at', 'updated_at'
        ]
        read_only_fields = ['created_at', 'updated_at']


class LessonCreateSerializer(serializers.ModelSerializer):
    """Serializer for creating/updating lessons (instructor only)"""

    class Meta:
        model = Lesson
        fields = [
            'id', 'course', 'title', 'order', 'lesson_type',
            'content', 'video_url', 'video_duration', 'resources'
        ]


class CourseSerializer(serializers.ModelSerializer):
    """Detailed course serializer with instructor info and lessons"""
    instructor = UserSerializer(read_only=True)
    lessons = LessonSerializer(many=True, read_only=True)
    lessons_count = serializers.IntegerField(source='lessons.count', read_only=True)

    class Meta:
        model = Course
        fields = [
            'id', 'title', 'slug', 'description', 'instructor',
            'category', 'level', 'duration_hours', 'thumbnail',
            'preview_video_url', 'status', 'is_featured', 'price',
            'enrolled_students_count', 'lessons', 'lessons_count',
            'created_at', 'updated_at'
        ]
        read_only_fields = ['enrolled_students_count', 'created_at', 'updated_at']


class CourseCreateSerializer(serializers.ModelSerializer):
    """Serializer for creating/updating courses (instructor only)"""

    class Meta:
        model = Course
        fields = [
            'id', 'title', 'slug', 'description',
            'category', 'level', 'duration_hours', 'thumbnail',
            'preview_video_url', 'status', 'is_featured', 'price'
        ]

    def create(self, validated_data):
        # Set instructor to the current user
        validated_data['instructor'] = self.context['request'].user

        # Auto-generate slug if not provided
        if not validated_data.get('slug'):
            base_slug = slugify(validated_data['title'])
            # Ensure uniqueness by appending a number if needed
            slug = base_slug
            counter = 1
            while Course.objects.filter(slug=slug).exists():
                slug = f"{base_slug}-{counter}"
                counter += 1
            validated_data['slug'] = slug

        return super().create(validated_data)


class CourseListSerializer(serializers.ModelSerializer):
    """Lightweight serializer for listing courses"""
    instructor_username = serializers.CharField(source='instructor.username', read_only=True)
    lessons_count = serializers.IntegerField(source='lessons.count', read_only=True)

    class Meta:
        model = Course
        fields = [
            'id', 'title', 'slug', 'description', 'instructor_username',
            'category', 'level', 'duration_hours', 'thumbnail',
            'status', 'is_featured', 'price', 'enrolled_students_count',
            'lessons_count', 'created_at'
        ]
        read_only_fields = ['enrolled_students_count', 'created_at']


class EnrollmentSerializer(serializers.ModelSerializer):
    """Serializer for Enrollment model"""
    student = UserSerializer(read_only=True)
    course = CourseListSerializer(read_only=True)

    class Meta:
        model = Enrollment
        fields = [
            'id', 'student', 'course', 'status', 'progress_percentage',
            'last_accessed', 'enrolled_at', 'completed_at'
        ]
        read_only_fields = ['student', 'enrolled_at', 'last_accessed']


class EnrollmentCreateSerializer(serializers.ModelSerializer):
    """Serializer for creating enrollments"""
    status = serializers.ChoiceField(choices=Enrollment.STATUS_CHOICES, default='active', required=False)

    class Meta:
        model = Enrollment
        fields = ['course', 'status']

    def create(self, validated_data):
        # Set student to the current user
        validated_data['student'] = self.context['request'].user

        # Set default status if not provided
        if 'status' not in validated_data:
            validated_data['status'] = 'active'

        # Check if already enrolled
        enrollment, created = Enrollment.objects.get_or_create(
            student=validated_data['student'],
            course=validated_data['course'],
            defaults={'status': validated_data['status']}
        )

        if created:
            # Increment enrolled_students_count
            enrollment.course.enrolled_students_count += 1
            enrollment.course.save()

            # Update student's enrolled_courses_count
            if hasattr(validated_data['student'], 'profile'):
                validated_data['student'].profile.enrolled_courses_count += 1
                validated_data['student'].profile.save()

        return enrollment


================================================================================


================= backend\api\serializers\user_serializers.py =================
Full Path: C:\Users\USER\VSCODE\SUMMATIVES\Group_4_DevOps\backend\api\serializers\user_serializers.py
Size: 5410 bytes
Modified: 2025-11-30 22:14:55
Extension: .py
--------------------------------------------------------------------------------

from rest_framework import serializers
from api.models.user import User, Profile
from django.contrib.auth.models import Group
from rest_framework_simplejwt.serializers import TokenObtainPairSerializer
from django.db import transaction


class ProfileSerializer(serializers.ModelSerializer):
    class Meta:
        model = Profile
        fields = [
            'bio', 'expertise', 'credentials', 'teaching_experience',
            'enrolled_courses_count', 'completed_courses_count',
            'languages', 'profile_picture', 'linkedin_url',
            'github_url', 'website', 'created_at', 'updated_at'
        ]
        read_only_fields = ['enrolled_courses_count', 'completed_courses_count', 'created_at', 'updated_at']


class UserSerializer(serializers.ModelSerializer):
    profile = ProfileSerializer(read_only=True, required=False, allow_null=True)

    class Meta:
        model = User
        fields = [
            'id', 'username', 'email', 'role', 'phone_number',
            'country', 'city', 'is_active',
            'is_verified', 'created_at', 'updated_at', 'date_joined', 'profile'
        ]
        read_only_fields = ['is_active', 'is_verified', 'created_at', 'updated_at', 'date_joined']

    def to_representation(self, instance):
        """Override to handle cases where profile might not exist"""
        representation = super().to_representation(instance)
        try:
            # Check if profile exists using getattr to avoid DoesNotExist exception
            profile = getattr(instance, 'profile', None)
            if profile is None:
                representation['profile'] = None
        except Exception:
            representation['profile'] = None
        return representation


class UserRegistrationSerializer(serializers.ModelSerializer):
    password = serializers.CharField(write_only=True)

    class Meta:
        model = User
        fields = [
            'username', 'email', 'role', 'phone_number', 'password',
            'country', 'city'
        ]

    def validate_email(self, value):
        if User.objects.filter(email=value).exists():
            raise serializers.ValidationError("A user with this email already exists.")
        return value

    def validate_role(self, value):
        if value not in ['student', 'instructor']:
            raise serializers.ValidationError("Invalid role. Must be student or instructor.")
        return value

    def validate(self, attrs):
        required_fields = ['username', 'email', 'phone_number', 'role', 'country', 'city']
        missing_fields = [field for field in required_fields if not attrs.get(field)]

        if missing_fields:
            errors = {}
            for field in missing_fields:
                errors[field] = ["This field is required to verify your account."]
            raise serializers.ValidationError(errors)

        return attrs

    @transaction.atomic
    def create(self, validated_data):
        password = validated_data.pop('password')
        role = validated_data.get('role')

        user = User(**validated_data)
        user.set_password(password)

        # Set verified since all required fields were already validated
        user.is_verified = True
        user.save()

        # Assign to group
        group_name = 'Student' if role == 'student' else 'Instructor'
        group, _ = Group.objects.get_or_create(name=group_name)
        user.groups.add(group)

        # Profile will be created automatically by signal in apps.py
        # But ensure it exists in case signal didn't fire
        try:
            Profile.objects.get_or_create(user=user)
        except Exception:
            # If profile creation fails, log but don't fail registration
            pass

        return user


class LogoutSerializer(serializers.Serializer):
    refresh = serializers.CharField()

    def validate(self, attrs):
        if 'refresh' not in attrs:
            raise serializers.ValidationError("Refresh token is required.")
        return attrs


class CustomTokenObtainPairSerializer(TokenObtainPairSerializer):
    """
    Custom serializer that accepts email for login (since USERNAME_FIELD is 'email').
    Maps 'email' field from request to 'username' field for parent authentication.
    """
    email = serializers.EmailField(required=False, allow_blank=True)

    def validate(self, attrs):
        # Get email from request (frontend sends 'email' field)
        email = attrs.get('email', '')

        if email:
            # Map email to username field (since USERNAME_FIELD is 'email')
            attrs['username'] = email
        elif 'username' in attrs:
            # If username is provided (backward compatibility), use it as email
            # This handles cases where username might be sent instead
            attrs['username'] = attrs.get('username', '')

        # Call parent validate which will authenticate using email (USERNAME_FIELD)
        # This will raise ValidationError if credentials are invalid
        data = super().validate(attrs)

        user_data = {
            "id": self.user.id,
            "email": self.user.email,
            "username": self.user.username,
            "role": self.user.role,
        }
        data['user'] = user_data
        return data


================================================================================


============================= backend\api\tests.py =============================
Full Path: C:\Users\USER\VSCODE\SUMMATIVES\Group_4_DevOps\backend\api\tests.py
Size: 190 bytes
Modified: 2025-11-30 22:03:59
Extension: .py
--------------------------------------------------------------------------------

from django.test import TestCase


class HealthCheckTest(TestCase):
    def test_basic_math(self):
        """A minimal test that always passes."""
        self.assertEqual(1 + 1, 2)


================================================================================


============================= backend\api\urls.py =============================
Full Path: C:\Users\USER\VSCODE\SUMMATIVES\Group_4_DevOps\backend\api\urls.py
Size: 1348 bytes
Modified: 2025-11-30 22:03:59
Extension: .py
--------------------------------------------------------------------------------

from django.urls import path, include
from rest_framework.routers import DefaultRouter
from rest_framework_simplejwt.views import TokenRefreshView
from api.views.user_views import UserViewSet, ProfileViewSet
from api.views.user_views import CurrentUserView, CurrentUserProfileView
from api.views.auth_views import RegisterView, LoginView, LogoutView
from api.views.course_views import CourseViewSet, LessonViewSet, EnrollmentViewSet

router = DefaultRouter()

# Register ViewSets
router.register(r'users', UserViewSet, basename='users')
router.register(r'profiles', ProfileViewSet, basename='profiles')
router.register(r'courses', CourseViewSet, basename='courses')
router.register(r'lessons', LessonViewSet, basename='lessons')
router.register(r'enrollments', EnrollmentViewSet, basename='enrollments')


urlpatterns = [
    path('', include(router.urls)),
    path('user/', CurrentUserView.as_view(), name='current-user'),
    path('profile/', CurrentUserProfileView.as_view(), name='current-user-profile'),

    # Authentication endpoints
    path('auth/register/', RegisterView.as_view(), name='register'),
    path('auth/login/', LoginView.as_view(), name='login'),
    path('auth/token/refresh/', TokenRefreshView.as_view(), name='token_refresh'),
    path('auth/logout/', LogoutView.as_view(), name='logout'),
]


================================================================================


======================== backend\api\views\__init__.py ========================
Full Path: C:\Users\USER\VSCODE\SUMMATIVES\Group_4_DevOps\backend\api\views\__init__.py
Size: 0 bytes
Modified: 2025-11-30 22:03:59
Extension: .py
--------------------------------------------------------------------------------



================================================================================


======================= backend\api\views\auth_views.py =======================
Full Path: C:\Users\USER\VSCODE\SUMMATIVES\Group_4_DevOps\backend\api\views\auth_views.py
Size: 5333 bytes
Modified: 2025-11-30 22:14:55
Extension: .py
--------------------------------------------------------------------------------

from rest_framework import status, generics
from rest_framework.response import Response
from rest_framework.permissions import AllowAny
from rest_framework_simplejwt.views import TokenObtainPairView
from django.contrib.auth import get_user_model
from rest_framework_simplejwt.tokens import RefreshToken
from django.core.cache import cache
from django.conf import settings
from drf_spectacular.utils import extend_schema
import logging

from api.serializers.user_serializers import (
    UserRegistrationSerializer,
    UserSerializer,
    CustomTokenObtainPairSerializer,
    LogoutSerializer,
)
from api.authentication import get_tokens_for_user

User = get_user_model()
CACHE_TTL = getattr(settings, "CACHE_TTL", 300)
logger = logging.getLogger(__name__)


@extend_schema(tags=["Authentication"])
class RegisterView(generics.CreateAPIView):
    permission_classes = [AllowAny]
    serializer_class = UserRegistrationSerializer

    def post(self, request, *args, **kwargs):
        cache_key = f"register_attempt_{request.data.get('email')}"
        if cache.get(cache_key):
            return Response(
                {"detail": "Please wait before trying again."},
                status=status.HTTP_429_TOO_MANY_REQUESTS,
            )

        serializer = self.get_serializer(data=request.data)
        if serializer.is_valid():
            try:
                user = serializer.save()

                # Profile should be created by signal, but ensure it exists
                from api.models.user import Profile

                try:
                    profile, created = Profile.objects.get_or_create(user=user)
                except Exception as profile_error:
                    logger.warning(
                        f"Profile creation issue (non-fatal): {str(profile_error)}"
                    )

                # Refresh user data
                user.refresh_from_db()

                tokens = get_tokens_for_user(user)

                # Use UserSerializer when possible
                try:
                    user_serializer = UserSerializer(user)
                    user_data = user_serializer.data
                except Exception as ser_error:
                    logger.warning(
                        f"UserSerializer failed, using basic data: {str(ser_error)}"
                    )
                    user_data = {
                        "id": user.id,
                        "username": user.username,
                        "email": user.email,
                        "role": user.role,
                        "phone_number": user.phone_number,
                        "country": user.country,
                        "city": user.city,
                        "is_active": user.is_active,
                        "is_verified": user.is_verified,
                        "profile": None,
                    }

                response_data = {
                    "user": user_data,
                    "tokens": tokens,
                }

                cache.set(cache_key, True, timeout=60)
                return Response(response_data, status=status.HTTP_201_CREATED)

            except Exception as e:
                import traceback

                error_trace = traceback.format_exc()
                logger.error(f"Error creating user: {str(e)}\n{error_trace}")

                return Response(
                    {"detail": f"An error occurred during registration: {str(e)}"},
                    status=status.HTTP_500_INTERNAL_SERVER_ERROR,
                )

        return Response(serializer.errors, status=status.HTTP_400_BAD_REQUEST)


@extend_schema(tags=["Authentication"])
class LoginView(TokenObtainPairView):
    permission_classes = [AllowAny]
    serializer_class = CustomTokenObtainPairSerializer

    def post(self, request, *args, **kwargs):
        email = request.data.get("email", "") or request.data.get("username", "")
        cache_key = f"login_attempt_{email}"

        if cache.get(cache_key):
            return Response(
                {"detail": "Please wait before trying again."},
                status=status.HTTP_429_TOO_MANY_REQUESTS,
            )

        try:
            response = super().post(request, *args, **kwargs)

            if response.status_code != status.HTTP_200_OK:
                cache.set(cache_key, True, timeout=30)
            else:
                cache.delete(cache_key)

            return response

        except Exception:
            cache.set(cache_key, True, timeout=30)
            raise


@extend_schema(tags=["Authentication"])
class LogoutView(generics.GenericAPIView):
    permission_classes = [AllowAny]
    serializer_class = LogoutSerializer

    def post(self, request):
        serializer = self.get_serializer(data=request.data)
        serializer.is_valid(raise_exception=True)

        try:
            token = RefreshToken(serializer.validated_data["refresh"])
            token.blacklist()
            return Response(status=status.HTTP_205_RESET_CONTENT)
        except Exception:
            return Response(
                {"detail": "Invalid or expired token."},
                status=status.HTTP_400_BAD_REQUEST,
            )


================================================================================


====================== backend\api\views\course_views.py ======================
Full Path: C:\Users\USER\VSCODE\SUMMATIVES\Group_4_DevOps\backend\api\views\course_views.py
Size: 10135 bytes
Modified: 2025-11-30 22:14:55
Extension: .py
--------------------------------------------------------------------------------

from rest_framework import viewsets, status
from rest_framework.decorators import action
from rest_framework.response import Response
from rest_framework.permissions import IsAuthenticated, IsAuthenticatedOrReadOnly
from django_filters.rest_framework import DjangoFilterBackend
from rest_framework import filters
from django.utils import timezone
from django.db.models import Q
from drf_spectacular.utils import extend_schema

from api.models.course import Course, Lesson, Enrollment
from api.serializers.course_serializers import (
    CourseSerializer, CourseCreateSerializer, CourseListSerializer,
    LessonSerializer, LessonCreateSerializer,
    EnrollmentSerializer, EnrollmentCreateSerializer
)
from api.permissions import IsInstructor, IsCourseOwner


@extend_schema(tags=["Courses"])
class CourseViewSet(viewsets.ModelViewSet):
    """
    ViewSet for managing courses.
    - List/Retrieve: Anyone can view published courses
    - Create: Only instructors
    - Update/Delete: Only course owner
    """
    queryset = Course.objects.all()
    filter_backends = [DjangoFilterBackend, filters.SearchFilter, filters.OrderingFilter]
    filterset_fields = ['status', 'level', 'category', 'is_featured']
    search_fields = ['title', 'description', 'category']
    ordering_fields = ['created_at', 'price', 'enrolled_students_count']
    ordering = ['-created_at']

    def get_serializer_class(self):
        if self.action == 'create' or self.action == 'update' or self.action == 'partial_update':
            return CourseCreateSerializer
        elif self.action == 'list':
            return CourseListSerializer
        return CourseSerializer

    def get_permissions(self):
        """
        Instantiates and returns the list of permissions that this view requires.
        """
        if self.action in ['list', 'retrieve']:
            permission_classes = [IsAuthenticatedOrReadOnly]
        elif self.action == 'create':
            permission_classes = [IsAuthenticated, IsInstructor]
        else:  # update, delete, etc.
            permission_classes = [IsAuthenticated, IsCourseOwner]
        return [permission() for permission in permission_classes]

    def get_queryset(self):
        """
        Optionally restricts the returned courses.
        - Published courses are visible to everyone (authenticated users)
        - Draft courses are only visible to the course instructor
        """
        queryset = Course.objects.select_related('instructor').all()

        # For unauthenticated users, only show published courses
        if not self.request.user.is_authenticated:
            queryset = queryset.filter(status='published')
        # For students, only show published courses
        elif self.request.user.role == 'student':
            queryset = queryset.filter(status='published')
        # For instructors, show their own courses (draft or published) + all published courses
        elif self.request.user.role == 'instructor':
            queryset = queryset.filter(
                Q(instructor=self.request.user) | Q(status='published')
            )
        # For other roles (admin, etc.), show all courses
        else:
            queryset = queryset.all()

        return queryset

    def perform_create(self, serializer):
        serializer.save(instructor=self.request.user)

    @action(detail=True, methods=['get'], permission_classes=[IsAuthenticated, IsInstructor])
    def my_students(self, request, pk=None):
        """
        Get all enrollments for a specific course (instructor only).
        """
        course = self.get_object()
        if course.instructor != request.user:
            return Response(
                {"detail": "You don't have permission to view students for this course."},
                status=status.HTTP_403_FORBIDDEN
            )

        enrollments = Enrollment.objects.filter(course=course)
        serializer = EnrollmentSerializer(enrollments, many=True)
        return Response(serializer.data)

    @action(detail=True, methods=['post'], permission_classes=[IsAuthenticated])
    def enroll(self, request, pk=None):
        """
        Enroll in a course (students only).
        """
        if request.user.role != 'student':
            return Response(
                {"detail": "Only students can enroll in courses."},
                status=status.HTTP_403_FORBIDDEN
            )

        course = self.get_object()

        # Check if already enrolled
        enrollment, created = Enrollment.objects.get_or_create(
            student=request.user,
            course=course,
            defaults={'status': 'active'}
        )

        if not created:
            return Response(
                {"detail": "You are already enrolled in this course."},
                status=status.HTTP_400_BAD_REQUEST
            )

        # Update counts
        course.enrolled_students_count += 1
        course.save()

        if hasattr(request.user, 'profile'):
            request.user.profile.enrolled_courses_count += 1
            request.user.profile.save()

        serializer = EnrollmentSerializer(enrollment)
        return Response(serializer.data, status=status.HTTP_201_CREATED)


@extend_schema(tags=["Lessons"])
class LessonViewSet(viewsets.ModelViewSet):
    """
    ViewSet for managing lessons within courses.
    - List/Retrieve: Anyone can view lessons of published courses
    - Create/Update/Delete: Only course instructor
    """
    queryset = Lesson.objects.all()

    def get_serializer_class(self):
        if self.action == 'create' or self.action == 'update' or self.action == 'partial_update':
            return LessonCreateSerializer
        return LessonSerializer

    def get_permissions(self):
        """
        Instantiates and returns the list of permissions that this view requires.
        """
        if self.action in ['list', 'retrieve']:
            permission_classes = [IsAuthenticatedOrReadOnly]
        else:
            permission_classes = [IsAuthenticated, IsInstructor]
        return [permission() for permission in permission_classes]

    def get_queryset(self):
        """
        Filter lessons by course visibility
        """
        queryset = Lesson.objects.select_related('course', 'course__instructor').all()

        # Filter out lessons from unpublished courses for non-owners
        if not self.request.user.is_authenticated:
            queryset = queryset.filter(course__status='published')
        elif self.request.user.role != 'instructor':
            queryset = queryset.filter(course__status='published')
        elif self.request.user.role == 'instructor':
            # Instructors can see lessons from their own courses or published courses
            queryset = queryset.filter(
                course__instructor=self.request.user
            ) | Lesson.objects.filter(course__status='published')

        return queryset

    def perform_create(self, serializer):
        course = serializer.validated_data['course']
        if course.instructor != self.request.user:
            from rest_framework.exceptions import PermissionDenied
            raise PermissionDenied("You can only add lessons to your own courses.")
        serializer.save()


@extend_schema(tags=["Enrollments"])
class EnrollmentViewSet(viewsets.ModelViewSet):
    """
    ViewSet for managing student enrollments.
    - List: Students see their own enrollments
    - Retrieve: Enrolled students or course instructor
    - Create: Students can enroll in courses
    - Update: Only for updating progress (students themselves)
    """
    queryset = Enrollment.objects.all()
    serializer_class = EnrollmentSerializer
    permission_classes = [IsAuthenticated]

    def get_queryset(self):
        """
        Students can only see their own enrollments.
        Instructors can see enrollments in their courses.
        """
        if self.request.user.role == 'student':
            return Enrollment.objects.filter(student=self.request.user)
        elif self.request.user.role == 'instructor':
            # Instructors can see enrollments in their courses
            return Enrollment.objects.filter(course__instructor=self.request.user)
        return Enrollment.objects.none()

    def get_serializer_class(self):
        if self.action == 'create':
            return EnrollmentCreateSerializer
        return EnrollmentSerializer

    def perform_create(self, serializer):
        serializer.save(student=self.request.user)

    @action(detail=True, methods=['patch'], permission_classes=[IsAuthenticated])
    def update_progress(self, request, pk=None):
        """
        Update enrollment progress (students only).
        """
        enrollment = self.get_object()

        if enrollment.student != request.user:
            return Response(
                {"detail": "You can only update your own enrollment progress."},
                status=status.HTTP_403_FORBIDDEN
            )

        progress = request.data.get('progress_percentage', 0)
        if progress < 0 or progress > 100:
            return Response(
                {"detail": "Progress must be between 0 and 100."},
                status=status.HTTP_400_BAD_REQUEST
            )

        enrollment.progress_percentage = progress

        # Auto-update status to completed if progress is 100%
        if progress >= 100:
            if enrollment.status != 'completed':
                enrollment.status = 'completed'
                enrollment.completed_at = timezone.now()

                # Update student's completed courses count
                if hasattr(request.user, 'profile'):
                    request.user.profile.completed_courses_count += 1
                    request.user.profile.save()

        enrollment.save()
        serializer = EnrollmentSerializer(enrollment)
        return Response(serializer.data)


================================================================================


======================= backend\api\views\user_views.py =======================
Full Path: C:\Users\USER\VSCODE\SUMMATIVES\Group_4_DevOps\backend\api\views\user_views.py
Size: 6729 bytes
Modified: 2025-11-30 22:14:55
Extension: .py
--------------------------------------------------------------------------------

from rest_framework.viewsets import ModelViewSet
from rest_framework.permissions import IsAuthenticated
from api.models.user import User, Profile
from api.serializers.user_serializers import UserSerializer, ProfileSerializer
from api.permissions import IsAdmin
from rest_framework.views import APIView
from rest_framework.response import Response
from rest_framework import status
from django.core.cache import cache
from django.conf import settings
from django_filters.rest_framework import DjangoFilterBackend
from drf_spectacular.utils import extend_schema

CACHE_TTL = getattr(settings, 'CACHE_TTL', 300)
PROFILE_CACHE_KEY = "user_profile"
USER_CACHE_KEY = "user_list"


@extend_schema(tags=["Users"])
class CurrentUserView(APIView):
    permission_classes = [IsAuthenticated]

    def get(self, request):
        cache_key = f"{USER_CACHE_KEY}_{request.user.id}"
        cached_data = cache.get(cache_key)
        if cached_data:
            return Response(cached_data)
        serializer = UserSerializer(request.user)
        cache.set(cache_key, serializer.data, timeout=CACHE_TTL)
        return Response(serializer.data)

    def put(self, request):
        serializer = UserSerializer(request.user, data=request.data)
        if serializer.is_valid():
            serializer.save()
            cache.set(f"{USER_CACHE_KEY}_{request.user.id}", serializer.data, timeout=CACHE_TTL)
            return Response(serializer.data)
        return Response(serializer.errors, status=status.HTTP_400_BAD_REQUEST)

    def patch(self, request):
        serializer = UserSerializer(request.user, data=request.data, partial=True)
        if serializer.is_valid():
            serializer.save()
            cache.set(f"{USER_CACHE_KEY}_{request.user.id}", serializer.data, timeout=CACHE_TTL)
            return Response(serializer.data)
        return Response(serializer.errors, status=status.HTTP_400_BAD_REQUEST)

    def delete(self, request):
        user_id = request.user.id
        request.user.delete()
        cache.delete(f"{USER_CACHE_KEY}_{user_id}")
        cache.delete(f"{PROFILE_CACHE_KEY}_{user_id}")
        return Response({"detail": "User account deleted."}, status=status.HTTP_204_NO_CONTENT)


@extend_schema(tags=["Profiles"])
class CurrentUserProfileView(APIView):
    permission_classes = [IsAuthenticated]

    def get(self, request):
        cache_key = f"{PROFILE_CACHE_KEY}_{request.user.id}"
        cached_data = cache.get(cache_key)
        if cached_data:
            return Response(cached_data)
        try:
            profile = request.user.profile
            serializer = ProfileSerializer(profile)
            cache.set(cache_key, serializer.data, timeout=CACHE_TTL)
            return Response(serializer.data)
        except Profile.DoesNotExist:
            return Response({"detail": "Profile not found."}, status=status.HTTP_404_NOT_FOUND)

    def put(self, request):
        profile = request.user.profile
        serializer = ProfileSerializer(profile, data=request.data)
        if serializer.is_valid():
            serializer.save()
            cache.set(f"{PROFILE_CACHE_KEY}_{request.user.id}", serializer.data, timeout=CACHE_TTL)
            return Response(serializer.data)
        return Response(serializer.errors, status=status.HTTP_400_BAD_REQUEST)

    def patch(self, request):
        profile = request.user.profile
        serializer = ProfileSerializer(profile, data=request.data, partial=True)
        if serializer.is_valid():
            serializer.save()
            cache.set(f"{PROFILE_CACHE_KEY}_{request.user.id}", serializer.data, timeout=CACHE_TTL)
            return Response(serializer.data)
        return Response(serializer.errors, status=status.HTTP_400_BAD_REQUEST)

    def delete(self, request):
        profile = request.user.profile
        uid = request.user.id
        profile.delete()
        cache.delete(f"{PROFILE_CACHE_KEY}_{uid}")
        return Response({"detail": "Profile deleted."}, status=status.HTTP_204_NO_CONTENT)


@extend_schema(tags=["Users"])
class UserViewSet(ModelViewSet):
    queryset = User.objects.all()
    serializer_class = UserSerializer
    permission_classes = [IsAuthenticated, IsAdmin]
    filter_backends = [DjangoFilterBackend]
    filterset_fields = ['username', 'email']

    def list(self, request, *args, **kwargs):
        cache_key = f"{USER_CACHE_KEY}_all"
        cached_data = cache.get(cache_key)
        if cached_data:
            return Response(cached_data)
        queryset = self.filter_queryset(self.get_queryset())
        page = self.paginate_queryset(queryset)
        serializer = self.get_serializer(page, many=True)
        response_data = self.get_paginated_response(serializer.data).data
        cache.set(cache_key, response_data, timeout=CACHE_TTL)
        return Response(response_data)

    def perform_create(self, serializer):
        response = serializer.save()
        self.clear_cache()
        return response

    def perform_update(self, serializer):
        response = serializer.save()
        self.clear_cache()
        return response

    def perform_destroy(self, instance):
        instance.delete()
        self.clear_cache()

    def clear_cache(self):
        # Clear all user-related cache entries
        # Note: delete_pattern requires Redis. For default cache, we clear common keys
        try:
            # Try delete_pattern if using Redis
            cache.delete_pattern(f"{USER_CACHE_KEY}*")
        except AttributeError:
            # Fallback for default cache backend - clear known cache keys
            # In production, use Redis for pattern deletion
            cache.delete(f"{USER_CACHE_KEY}_all")


@extend_schema(tags=["Profiles"])
class ProfileViewSet(ModelViewSet):
    queryset = Profile.objects.select_related('user').all()
    serializer_class = ProfileSerializer
    permission_classes = [IsAuthenticated, IsAdmin]
    filter_backends = [DjangoFilterBackend]
    # 'availability' field doesn't exist on Profile; remove it
    filterset_fields = ['user__username', 'user__email']

    def perform_create(self, serializer):
        obj = serializer.save()
        self.clear_cache(obj.user_id)
        return obj

    def perform_update(self, serializer):
        obj = serializer.save()
        self.clear_cache(obj.user_id)
        return obj

    def perform_destroy(self, instance):
        uid = instance.user_id
        instance.delete()
        self.clear_cache(uid)

    def clear_cache(self, user_id):
        cache.delete(f"{PROFILE_CACHE_KEY}_{user_id}")


================================================================================


============================== backend\Dockerfile ==============================
Full Path: C:\Users\USER\VSCODE\SUMMATIVES\Group_4_DevOps\backend\Dockerfile
Size: 992 bytes
Modified: 2025-11-30 22:14:55
Extension: None
--------------------------------------------------------------------------------

# Use an official Python runtime as a parent image
FROM python:3.11-slim

# Security & reliability
ENV PYTHONDONTWRITEBYTECODE=1 \
    PYTHONUNBUFFERED=1

# System deps kept slim; psycopg2-binary avoids compiler toolchain
RUN apt-get update && apt-get install -y --no-install-recommends \
    ca-certificates \
  && rm -rf /var/lib/apt/lists/*

# Create app user/group (non-root)
RUN addgroup --system app && adduser --system --ingroup app app

# Set workdir
WORKDIR /app

# Install Python deps first (cache layer)
COPY requirements.txt .
RUN pip install --no-cache-dir -r requirements.txt

# Copy backend project
COPY . .

# Entrypoint (runs migrations & waits for DB if needed)
COPY entrypoint.sh /app/entrypoint.sh
RUN chmod +x /app/entrypoint.sh && chown -R app:app /app

# Switch to non-root
USER app

# Move to Django project dir
WORKDIR /app

EXPOSE 8000

ENTRYPOINT ["./entrypoint.sh"]
CMD ["python", "manage.py", "runserver", "0.0.0.0:8000"]



================================================================================


============================ backend\entrypoint.sh ============================
Full Path: C:\Users\USER\VSCODE\SUMMATIVES\Group_4_DevOps\backend\entrypoint.sh
Size: 962 bytes
Modified: 2025-11-30 22:03:59
Extension: .sh
--------------------------------------------------------------------------------

#!/usr/bin/env sh
set -e

# Wait for Postgres only when using Postgres engine
if [ "${DB_ENGINE}" = "django.db.backends.postgresql" ]; then
  echo "Waiting for Postgres at ${DB_HOST:-db}:${DB_PORT:-5432}..."
  # Try to connect using psycopg2; 30 attempts, ~60s max
  python - <<'PY'
import os, time
import psycopg2
host=os.getenv('DB_HOST','db')
port=int(os.getenv('DB_PORT','5432'))
user=os.getenv('DB_USER','myuser')
password=os.getenv('DB_PASSWORD','mypassword')
dbname=os.getenv('DB_NAME','learnhub_db')

for i in range(30):
    try:
        psycopg2.connect(host=host, port=port, user=user, password=password, dbname=dbname).close()
        print("Postgres is ready.")
        break
    except Exception as e:
        print(f"DB not ready ({i+1}/30):", e)
        time.sleep(2)
else:
    raise SystemExit("Postgres not ready after retries.")
PY
fi

echo "Running migrations..."
python manage.py migrate --noinput

exec "$@"


================================================================================


======================= backend\learnhub_api\__init__.py =======================
Full Path: C:\Users\USER\VSCODE\SUMMATIVES\Group_4_DevOps\backend\learnhub_api\__init__.py
Size: 0 bytes
Modified: 2025-11-30 22:03:59
Extension: .py
--------------------------------------------------------------------------------



================================================================================


========================= backend\learnhub_api\asgi.py =========================
Full Path: C:\Users\USER\VSCODE\SUMMATIVES\Group_4_DevOps\backend\learnhub_api\asgi.py
Size: 417 bytes
Modified: 2025-11-30 22:03:59
Extension: .py
--------------------------------------------------------------------------------

"""
ASGI config for learnhub_api project.

It exposes the ASGI callable as a module-level variable named ``application``.

For more information on this file, see
https://docs.djangoproject.com/en/5.2/howto/deployment/asgi/
"""

import os

from django.core.asgi import get_asgi_application

os.environ.setdefault('DJANGO_SETTINGS_MODULE', 'learnhub_api.settings')

application = get_asgi_application()


================================================================================


======================= backend\learnhub_api\settings.py =======================
Full Path: C:\Users\USER\VSCODE\SUMMATIVES\Group_4_DevOps\backend\learnhub_api\settings.py
Size: 6323 bytes
Modified: 2025-11-30 22:14:55
Extension: .py
--------------------------------------------------------------------------------

"""
Django settings for learnhub_api project.

Generated by 'django-admin startproject' using Django 5.2.7.

For more information on this file, see
https://docs.djangoproject.com/en/5.2/topics/settings/

For the full list of settings and their values, see
https://docs.djangoproject.com/en/5.2/ref/settings/
"""

from datetime import timedelta
import os
from pathlib import Path
from dotenv import load_dotenv

# Load environment variables from .env file
load_dotenv()

# Build paths inside the project like this: BASE_DIR / 'subdir'.
BASE_DIR = Path(__file__).resolve().parent.parent


# Quick-start development settings - unsuitable for production
# See https://docs.djangoproject.com/en/5.2/howto/deployment/checklist/

# SECURITY WARNING: keep the secret key used in production secret!
SECRET_KEY = os.getenv('SECRET_KEY', 'django-insecure-j!5*yrw4*lmd0rnugk%(vmfzosv!e8(mcpv*2ef8^4=jd+xw-z')

# SECURITY WARNING: don't run with debug turned on in production!
DEBUG = os.getenv('DEBUG', 'True').lower() == 'true'

ALLOWED_HOSTS = os.getenv('ALLOWED_HOSTS', 'localhost,127.0.0.1').split(
    ',') if os.getenv('ALLOWED_HOSTS') else ['localhost', '127.0.0.1']


# Application definition

INSTALLED_APPS = [
    'django.contrib.admin',
    'django.contrib.auth',
    'django.contrib.contenttypes',
    'django.contrib.sessions',
    'django.contrib.messages',
    'django.contrib.staticfiles',
    'rest_framework',
    'rest_framework_simplejwt',
    'corsheaders',
    'drf_spectacular',
    'django_filters',
    'api',
]

MIDDLEWARE = [
    'django.middleware.security.SecurityMiddleware',
    'django.contrib.sessions.middleware.SessionMiddleware',
    'corsheaders.middleware.CorsMiddleware',
    'django.middleware.common.CommonMiddleware',
    'django.middleware.csrf.CsrfViewMiddleware',
    'django.contrib.auth.middleware.AuthenticationMiddleware',
    'django.contrib.messages.middleware.MessageMiddleware',
    'django.middleware.clickjacking.XFrameOptionsMiddleware',
]

ROOT_URLCONF = 'learnhub_api.urls'

TEMPLATES = [
    {
        'BACKEND': 'django.template.backends.django.DjangoTemplates',
        'DIRS': [],
        'APP_DIRS': True,
        'OPTIONS': {
            'context_processors': [
                'django.template.context_processors.request',
                'django.contrib.auth.context_processors.auth',
                'django.contrib.messages.context_processors.messages',
            ],
        },
    },
]

WSGI_APPLICATION = 'learnhub_api.wsgi.application'


# Database
# https://docs.djangoproject.com/en/5.2/ref/settings/#databases

DB_ENGINE = os.getenv('DB_ENGINE', 'django.db.backends.sqlite3')

if DB_ENGINE == 'django.db.backends.sqlite3':
    DATABASES = {
        'default': {
            'ENGINE': DB_ENGINE,
            'NAME': os.getenv('DB_NAME', str(BASE_DIR / 'db.sqlite3')),
        }
    }
else:
    DATABASES = {
        'default': {
            'ENGINE': DB_ENGINE,
            'NAME': os.getenv('DB_NAME', 'learnhub_db'),
            'USER': os.getenv('DB_USER', ''),
            'PASSWORD': os.getenv('DB_PASSWORD', ''),
            'HOST': os.getenv('DB_HOST', 'localhost'),
            'PORT': os.getenv('DB_PORT', '5432'),
        }
    }


# Password validation
# https://docs.djangoproject.com/en/5.2/ref/settings/#auth-password-validators

AUTH_PASSWORD_VALIDATORS = [
    {
        'NAME': 'django.contrib.auth.password_validation.UserAttributeSimilarityValidator',
    },
    {
        'NAME': 'django.contrib.auth.password_validation.MinimumLengthValidator',
    },
    {
        'NAME': 'django.contrib.auth.password_validation.CommonPasswordValidator',
    },
    {
        'NAME': 'django.contrib.auth.password_validation.NumericPasswordValidator',
    },
]

CORS_ALLOWED_ORIGINS = os.getenv('CORS_ALLOWED_ORIGINS', 'http://localhost:5173,http://127.0.0.1:5173').split(',')
CORS_ALLOW_CREDENTIALS = True
CORS_ALLOW_ALL_ORIGINS = DEBUG  # Allow all origins in debug mode

# Custom User Model
AUTH_USER_MODEL = 'api.User'

# REST Framework Configuration
REST_FRAMEWORK = {
    'DEFAULT_AUTHENTICATION_CLASSES': (
        'rest_framework_simplejwt.authentication.JWTAuthentication',
    ),
    'DEFAULT_PERMISSION_CLASSES': (
        'rest_framework.permissions.IsAuthenticated',
    ),
    'DEFAULT_PAGINATION_CLASS': 'rest_framework.pagination.PageNumberPagination',
    'PAGE_SIZE': 20,
    'DEFAULT_FILTER_BACKENDS': (
        'django_filters.rest_framework.DjangoFilterBackend',
        'rest_framework.filters.SearchFilter',
        'rest_framework.filters.OrderingFilter',
    ),
    'DEFAULT_SCHEMA_CLASS': 'drf_spectacular.openapi.AutoSchema',
}

# JWT Settings

SIMPLE_JWT = {
    'ACCESS_TOKEN_LIFETIME': timedelta(minutes=60),
    'REFRESH_TOKEN_LIFETIME': timedelta(days=7),
    'ROTATE_REFRESH_TOKENS': True,
    'BLACKLIST_AFTER_ROTATION': True,
    'UPDATE_LAST_LOGIN': True,
    'ALGORITHM': 'HS256',
    'SIGNING_KEY': SECRET_KEY,
    'AUTH_HEADER_TYPES': ('Bearer',),
    'AUTH_HEADER_NAME': 'HTTP_AUTHORIZATION',
    'USER_ID_FIELD': 'id',
    'USER_ID_CLAIM': 'user_id',
}

# Spectacular Settings for API Documentation
SPECTACULAR_SETTINGS = {
    'TITLE': 'LearnHub API',
    'DESCRIPTION': 'API documentation for LearnHub Learning Management System',
    'VERSION': '1.0.0',
    'SERVE_INCLUDE_SCHEMA': False,
}

# Cache Configuration
# Default to local memory cache for development
# For production, configure Redis or another cache backend
CACHES = {
    'default': {
        'BACKEND': 'django.core.cache.backends.locmem.LocMemCache',
        'LOCATION': 'unique-snowflake',
    }
}

# Cache TTL in seconds (5 minutes default)
CACHE_TTL = int(os.getenv('CACHE_TTL', 300))


# Internationalization
# https://docs.djangoproject.com/en/5.2/topics/i18n/

LANGUAGE_CODE = 'en-us'

TIME_ZONE = 'UTC'

USE_I18N = True

USE_TZ = True


# Static files (CSS, JavaScript, Images)
# https://docs.djangoproject.com/en/5.2/howto/static-files/

STATIC_URL = 'static/'

# Default primary key field type
# https://docs.djangoproject.com/en/5.2/ref/settings/#default-auto-field

DEFAULT_AUTO_FIELD = 'django.db.models.BigAutoField'


================================================================================


========================= backend\learnhub_api\urls.py =========================
Full Path: C:\Users\USER\VSCODE\SUMMATIVES\Group_4_DevOps\backend\learnhub_api\urls.py
Size: 1247 bytes
Modified: 2025-11-30 22:03:59
Extension: .py
--------------------------------------------------------------------------------

"""
URL configuration for learnhub_api project.

The `urlpatterns` list routes URLs to views. For more information please see:
    https://docs.djangoproject.com/en/5.2/topics/http/urls/
Examples:
Function views
    1. Add an import:  from my_app import views
    2. Add a URL to urlpatterns:  path('', views.home, name='home')
Class-based views
    1. Add an import:  from other_app.views import Home
    2. Add a URL to urlpatterns:  path('', Home.as_view(), name='home')
Including another URLconf
    1. Import the include() function: from django.urls import include, path
    2. Add a URL to urlpatterns:  path('blog/', include('blog.urls'))
"""
from django.contrib import admin
from django.urls import path, include
from drf_spectacular.views import SpectacularAPIView, SpectacularSwaggerView, SpectacularRedocView

urlpatterns = [
    path('admin/', admin.site.urls),
    path('api/', include('api.urls')),

    # --- API schema & docs ---
    path('api/schema/', SpectacularAPIView.as_view(), name='schema'),
    path('api/schema/swagger-ui/', SpectacularSwaggerView.as_view(url_name='schema'), name='swagger-ui'),
    path('api/schema/redoc/', SpectacularRedocView.as_view(url_name='schema'), name='redoc'),
]


================================================================================


========================= backend\learnhub_api\wsgi.py =========================
Full Path: C:\Users\USER\VSCODE\SUMMATIVES\Group_4_DevOps\backend\learnhub_api\wsgi.py
Size: 417 bytes
Modified: 2025-11-30 22:03:59
Extension: .py
--------------------------------------------------------------------------------

"""
WSGI config for learnhub_api project.

It exposes the WSGI callable as a module-level variable named ``application``.

For more information on this file, see
https://docs.djangoproject.com/en/5.2/howto/deployment/wsgi/
"""

import os

from django.core.wsgi import get_wsgi_application

os.environ.setdefault('DJANGO_SETTINGS_MODULE', 'learnhub_api.settings')

application = get_wsgi_application()


================================================================================


============================== backend\manage.py ==============================
Full Path: C:\Users\USER\VSCODE\SUMMATIVES\Group_4_DevOps\backend\manage.py
Size: 690 bytes
Modified: 2025-11-30 22:03:59
Extension: .py
--------------------------------------------------------------------------------

#!/usr/bin/env python
"""Django's command-line utility for administrative tasks."""
import os
import sys


def main():
    """Run administrative tasks."""
    os.environ.setdefault('DJANGO_SETTINGS_MODULE', 'learnhub_api.settings')
    try:
        from django.core.management import execute_from_command_line
    except ImportError as exc:
        raise ImportError(
            "Couldn't import Django. Are you sure it's installed and "
            "available on your PYTHONPATH environment variable? Did you "
            "forget to activate a virtual environment?"
        ) from exc
    execute_from_command_line(sys.argv)


if __name__ == '__main__':
    main()


================================================================================


=========================== backend\requirements.txt ===========================
Full Path: C:\Users\USER\VSCODE\SUMMATIVES\Group_4_DevOps\backend\requirements.txt
Size: 768 bytes
Modified: 2025-11-30 22:14:55
Extension: .txt
--------------------------------------------------------------------------------

ÿþD j a n g o > = 5 . 2 . 8 , < 6 . 0 
 
 d j a n g o r e s t f r a m e w o r k = = 3 . 1 5 . 2 
 
 d j a n g o r e s t f r a m e w o r k - s i m p l e j w t = = 5 . 3 . 1 
 
 d r f - s p e c t a c u l a r = = 0 . 2 7 . 2 
 
 d j a n g o - c o r s - h e a d e r s = = 4 . 4 . 0 
 
 d j a n g o - f i l t e r = = 2 4 . 2 
 
 
 
 #   D B   +   . e n v 
 
 p s y c o p g [ b i n a r y ] 
 
 p y t h o n - d o t e n v = = 1 . 0 . 1 
 
 
 
 #   T e s t i n g   &   l i n t i n g 
 
 p y t e s t = = 8 . 2 . 1 
 
 p y t e s t - d j a n g o = = 4 . 9 . 0 
 
 f l a k e 8 = = 7 . 1 . 1 
 
 
 
 #   O p t i o n a l   p r o d   s e r v e r   ( n o t   r e q u i r e d   f o r   d e v / C I ,   h a n d y   f o r   d e p l o y m e n t s ) 
 
 g u n i c o r n = = 2 2 . 0 . 0 
 
 

================================================================================


============================ code_dump_generator.py ============================
Full Path: C:\Users\USER\VSCODE\SUMMATIVES\Group_4_DevOps\code_dump_generator.py
Size: 5589 bytes
Modified: 2025-11-30 22:22:17
Extension: .py
--------------------------------------------------------------------------------

#!/usr/bin/env python3
"""
Project Code Dump Generator
Generates a clean, well-labeled dump file of all source code in the project.
"""

from pathlib import Path
from datetime import datetime
import sys

# File extensions to include
CODE_EXTENSIONS = {
    ".py",
    ".js",
    ".jsx",
    ".ts",
    ".tsx",
    ".yml",
    ".yaml",
    ".json",
    ".tf",
    ".md",
    ".txt",
    ".sh",
    ".cfg",
    ".ini",
    ".toml",
    ".html",
    ".css",
    ".sql",
    ".env",
    ".example",
    ".j2",
}

# Directories to skip
SKIP_DIRS = {
    "node_modules",
    "__pycache__",
    ".git",
    "venv",
    "env",
    ".pytest_cache",
    ".vscode",
    "dist",
    "build",
    ".next",
    "coverage",
    ".terraform",
    "migrations",
}

# Files to skip
SKIP_FILES = {"package-lock.json", "yarn.lock", ".DS_Store", "Thumbs.db", ".gitkeep"}


def should_process_file(file_path: Path) -> bool:
    """Determine if a file should be included in the dump."""
    if file_path.name in SKIP_FILES:
        return False

    if any(skip_dir in file_path.parts for skip_dir in SKIP_DIRS):
        return False

    return (file_path.suffix in CODE_EXTENSIONS or (file_path.suffix == "" and file_path.is_file()))


def generate_separator(title: str, width: int = 80) -> str:
    """Generate a visual separator with title."""
    if len(title) + 4 > width:
        return f"{'=' * width}\n{title}\n{'=' * width}"

    side_len = (width - len(title) - 2) // 2
    return f"{'=' * side_len} {title} {'=' * side_len}"


def get_file_info(file_path: Path, root_dir: Path) -> str:
    """Generate file information header."""
    relative_path = file_path.relative_to(root_dir)
    size = file_path.stat().st_size
    modified = datetime.fromtimestamp(file_path.stat().st_mtime)

    info = [
        generate_separator(str(relative_path)),
        f"Full Path: {file_path}",
        f"Size: {size} bytes",
        f"Modified: {modified.strftime('%Y-%m-%d %H:%M:%S')}",
        f"Extension: {file_path.suffix or 'None'}",
        "-" * 80,
    ]
    return "\n".join(info)


def read_file_content(file_path: Path) -> str:
    """Read file content with fallback for binary files."""
    try:
        with open(file_path, "r", encoding="utf-8") as f:
            return f.read()
    except UnicodeDecodeError:
        try:
            with open(file_path, "r", encoding="latin-1") as f:
                return f.read()
        except Exception as e:
            return f"[Error reading file: {e}]"
    except Exception as e:
        return f"[Error reading file: {e}]"


def generate_dump(root_dir: str, output_file: str = "project_dump.txt"):
    """Generate the complete project dump."""
    root_path = Path(root_dir).resolve()

    if not root_path.exists():
        print(f"Error: Directory '{root_dir}' does not exist!")
        return

    # Collect all files
    all_files = [
        file_path
        for file_path in root_path.rglob("*")
        if file_path.is_file() and should_process_file(file_path)
    ]

    all_files.sort()

    output_path = Path(output_file)
    with open(output_path, "w", encoding="utf-8") as dump:
        # Write header
        header = [
            generate_separator("PROJECT CODE DUMP", 100),
            f"Project: {root_path.name}",
            f"Root Directory: {root_path}",
            f"Generated: {datetime.now().strftime('%Y-%m-%d %H:%M:%S')}",
            f"Total Files: {len(all_files)}",
            generate_separator("", 100),
            "\n" * 2,
        ]
        dump.write("\n".join(header))

        # Table of contents
        dump.write(generate_separator("TABLE OF CONTENTS", 100) + "\n\n")
        for idx, file_path in enumerate(all_files, 1):
            relative_path = file_path.relative_to(root_path)
            dump.write(f"{idx:4d}. {relative_path}\n")
        dump.write("\n" * 3)

        # File contents
        dump.write(generate_separator("FILE CONTENTS", 100) + "\n\n")

        for idx, file_path in enumerate(all_files, 1):
            rel_path = file_path.relative_to(root_path)
            print(f"Processing ({idx}/{len(all_files)}): {rel_path}")

            dump.write("\n" * 2)
            dump.write(get_file_info(file_path, root_path))
            dump.write("\n\n")

            content = read_file_content(file_path)
            dump.write(content)

            dump.write("\n\n" + "=" * 80 + "\n")

        # Summary footer
        dump.write("\n" * 3)
        summary = [
            generate_separator("DUMP COMPLETE", 100),
            f"Total Files Processed: {len(all_files)}",
            f"Output File: {output_path.resolve()}",
            f"Completed: {datetime.now().strftime('%Y-%m-%d %H:%M:%S')}",
            generate_separator("", 100),
        ]
        dump.write("\n".join(summary))

    print(f"Generating code dump for: {Path(root_dir).resolve()}")
    print(f"\n✓ Dump generated successfully!")
    print(f"  Output: {output_path.resolve()}")
    print(f"  Files processed: {len(all_files)}")
    print(f"  Size: {output_path.stat().st_size / 1024:.2f} KB")


if __name__ == "__main__":
    root_dir = sys.argv[1] if len(sys.argv) > 1 else "."
    output_file = sys.argv[2] if len(sys.argv) > 2 else "project_dump.txt"

    print(f"Generating code dump for: {Path(root_dir).resolve()}")
    print(f"Output file: {output_file}")
    print("-" * 80)

    generate_dump(root_dir, output_file)


================================================================================


============================== docker-compose.yml ==============================
Full Path: C:\Users\USER\VSCODE\SUMMATIVES\Group_4_DevOps\docker-compose.yml
Size: 1669 bytes
Modified: 2025-11-30 22:14:55
Extension: .yml
--------------------------------------------------------------------------------

version: '3.8'

services:
  backend:
    build:
      context: ./backend
      dockerfile: Dockerfile
    ports:
      - "8000:8000"
    environment:
      # Database - Azure PostgreSQL
      - DB_ENGINE=django.db.backends.postgresql
      - DB_NAME=${DB_NAME:-group4devops_db}
      - DB_USER=${DB_USER:-dbadmin}
      - DB_PASSWORD=${DB_PASSWORD}
      - DB_HOST=${DB_HOST:-group4devops-prod-db.postgres.database.azure.com}
      - DB_PORT=${DB_PORT:-5432}
      
      # Django settings
      - SECRET_KEY=${SECRET_KEY:-django-insecure-local-dev-only-key}
      - DEBUG=${DEBUG:-True}
      - ALLOWED_HOSTS=${ALLOWED_HOSTS:-localhost,127.0.0.1,0.0.0.0,40.120.26.21}
      
      # CORS
      - CORS_ALLOWED_ORIGINS=${CORS_ALLOWED_ORIGINS:-http://localhost:5173,http://127.0.0.1:5173,http://40.120.26.21:8000}
    
    volumes:
      - ./backend:/app
      - /app/staticfiles
    
    healthcheck:
      test: ["CMD-SHELL", "curl -f http://localhost:8000/api/health/ || exit 1"]
      interval: 30s
      timeout: 10s
      retries: 3
      start_period: 40s
    
    command: >
      sh -c "python manage.py migrate --noinput &&
             python manage.py collectstatic --noinput &&
             python manage.py runserver 0.0.0.0:8000"

  frontend:
    build:
      context: ./frontend
      dockerfile: Dockerfile
    ports:
      - "5173:5173"
    environment:
      - VITE_API_BASE_URL=${VITE_API_BASE_URL:-http://localhost:8000}
    depends_on:
      backend:
        condition: service_healthy
    volumes:
      - ./frontend:/app
      - /app/node_modules
    command: npm run dev -- --host 0.0.0.0


================================================================================


================================== Dockerfile ==================================
Full Path: C:\Users\USER\VSCODE\SUMMATIVES\Group_4_DevOps\Dockerfile
Size: 999 bytes
Modified: 2025-11-30 22:14:55
Extension: None
--------------------------------------------------------------------------------

# Use an official Python runtime as a parent image
FROM python:3.11-slim

# Security & reliability
ENV PYTHONDONTWRITEBYTECODE=1 \
    PYTHONUNBUFFERED=1

# System deps kept slim; psycopg2-binary avoids compiler toolchain
RUN apt-get update && apt-get install -y --no-install-recommends \
    ca-certificates \
  && rm -rf /var/lib/apt/lists/*

# Create app user/group (non-root)
RUN addgroup --system app && adduser --system --ingroup app app

# Set workdir
WORKDIR /app

# no backend install needed in root image
RUN echo "Root Dockerfile unused for backend/frontend build"

# Copy project
COPY . .

# Entrypoint (runs migrations & waits for DB if needed)
COPY backend/entrypoint.sh /app/backend/entrypoint.sh
RUN chmod +x /app/backend/entrypoint.sh && chown -R app:app /app

# Switch to non-root
USER app

# Move to Django project dir
WORKDIR /app/backend

EXPOSE 8000

ENTRYPOINT ["./entrypoint.sh"]
CMD ["python", "manage.py", "runserver", "0.0.0.0:8000"]


================================================================================


============================ frontend\.dockerignore ============================
Full Path: C:\Users\USER\VSCODE\SUMMATIVES\Group_4_DevOps\frontend\.dockerignore
Size: 562 bytes
Modified: 2025-11-30 22:14:55
Extension: None
--------------------------------------------------------------------------------

# Dependencies (node_modules excluded, but package-lock.json needed for reproducible builds)
node_modules/
npm-debug.log*
yarn-debug.log*
yarn-error.log*
yarn.lock

# Build outputs
dist/
build/
.vite/

# Environment variables
.env
.env.local
.env.*.local

# IDE
.vscode/
.idea/
*.swp
*.swo
*~

# Testing
coverage/
.nyc_output/

# OS
.DS_Store
Thumbs.db

# Git
.git/
.gitignore

# Documentation
*.md
README.md

# Docker
Dockerfile*
.dockerignore
docker-compose*.yml

# Logs
logs/
*.log

# Misc
.cache/
.temp/



================================================================================


============================= frontend\.gitignore =============================
Full Path: C:\Users\USER\VSCODE\SUMMATIVES\Group_4_DevOps\frontend\.gitignore
Size: 277 bytes
Modified: 2025-11-30 22:03:59
Extension: None
--------------------------------------------------------------------------------

# Logs
logs
*.log
npm-debug.log*
yarn-debug.log*
yarn-error.log*
pnpm-debug.log*
lerna-debug.log*

node_modules
dist
dist-ssr
*.local

# Editor directories and files
.vscode/*
!.vscode/extensions.json
.idea
.DS_Store
*.suo
*.ntvs*
*.njsproj
*.sln
*.sw?


================================================================================


============================= frontend\Dockerfile =============================
Full Path: C:\Users\USER\VSCODE\SUMMATIVES\Group_4_DevOps\frontend\Dockerfile
Size: 378 bytes
Modified: 2025-11-30 22:14:55
Extension: None
--------------------------------------------------------------------------------

# Frontend Dockerfile for LearnHub
FROM node:20-alpine

# Set working directory
WORKDIR /app

# Copy package files
COPY package*.json ./

# Install dependencies
RUN npm ci

# Copy project files
COPY . .

# Expose Vite dev server port
EXPOSE 5173

# Start development server with host binding for Docker
CMD ["npm", "run", "dev", "--", "--host", "0.0.0.0"]



================================================================================


========================== frontend\eslint.config.js ==========================
Full Path: C:\Users\USER\VSCODE\SUMMATIVES\Group_4_DevOps\frontend\eslint.config.js
Size: 639 bytes
Modified: 2025-11-30 22:03:59
Extension: .js
--------------------------------------------------------------------------------

import js from '@eslint/js'
import globals from 'globals'
import reactHooks from 'eslint-plugin-react-hooks'
import reactRefresh from 'eslint-plugin-react-refresh'
import tseslint from 'typescript-eslint'
import { defineConfig, globalIgnores } from 'eslint/config'

export default defineConfig([
  globalIgnores(['dist']),
  {
    files: ['**/*.{ts,tsx}'],
    extends: [
      js.configs.recommended,
      tseslint.configs.recommended,
      reactHooks.configs.flat.recommended,
      reactRefresh.configs.vite,
    ],
    languageOptions: {
      ecmaVersion: 2020,
      globals: globals.browser,
    },
  },
])


================================================================================


============================= frontend\index.html =============================
Full Path: C:\Users\USER\VSCODE\SUMMATIVES\Group_4_DevOps\frontend\index.html
Size: 306 bytes
Modified: 2025-11-30 22:03:59
Extension: .html
--------------------------------------------------------------------------------

<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>LearnHub Frontend</title>
  </head>
  <body>
    <div id="root"></div>
    <script type="module" src="/src/main.tsx"></script>
  </body>
</html>


================================================================================


============================ frontend\package.json ============================
Full Path: C:\Users\USER\VSCODE\SUMMATIVES\Group_4_DevOps\frontend\package.json
Size: 1029 bytes
Modified: 2025-11-30 22:03:59
Extension: .json
--------------------------------------------------------------------------------

{
  "name": "frontend",
  "private": true,
  "version": "0.0.0",
  "type": "module",
  "scripts": {
    "dev": "vite",
    "build": "tsc -b && vite build",
    "lint": "eslint .",
    "preview": "vite preview"
  },
  "dependencies": {
    "axios": "^1.13.2",
    "react": "^19.2.0",
    "react-dom": "^19.2.0",
    "react-router-dom": "^7.9.6",
    "zustand": "^5.0.8"
  },
  "devDependencies": {
    "@eslint/js": "^9.39.1",
    "@tailwindcss/postcss": "^4.1.17",
    "@types/axios": "^0.9.36",
    "@types/node": "^24.10.0",
    "@types/react": "^19.2.2",
    "@types/react-dom": "^19.2.2",
    "@types/react-router-dom": "^5.3.3",
    "@vitejs/plugin-react": "^5.1.0",
    "autoprefixer": "^10.4.22",
    "eslint": "^9.39.1",
    "eslint-plugin-react-hooks": "^7.0.1",
    "eslint-plugin-react-refresh": "^0.4.24",
    "globals": "^16.5.0",
    "postcss": "^8.5.6",
    "tailwindcss": "^4.1.17",
    "typescript": "~5.9.3",
    "typescript-eslint": "^8.46.3",
    "vite": "^7.2.2"
  }
}


================================================================================


========================== frontend\postcss.config.js ==========================
Full Path: C:\Users\USER\VSCODE\SUMMATIVES\Group_4_DevOps\frontend\postcss.config.js
Size: 98 bytes
Modified: 2025-11-30 22:03:59
Extension: .js
--------------------------------------------------------------------------------

export default {
  plugins: {
    "@tailwindcss/postcss": {},
    autoprefixer: {},
  },
};


================================================================================


============================== frontend\README.md ==============================
Full Path: C:\Users\USER\VSCODE\SUMMATIVES\Group_4_DevOps\frontend\README.md
Size: 2628 bytes
Modified: 2025-11-30 22:03:59
Extension: .md
--------------------------------------------------------------------------------

# React + TypeScript + Vite

This template provides a minimal setup to get React working in Vite with HMR and some ESLint rules.

Currently, two official plugins are available:

- [@vitejs/plugin-react](https://github.com/vitejs/vite-plugin-react/blob/main/packages/plugin-react) uses [Babel](https://babeljs.io/) (or [oxc](https://oxc.rs) when used in [rolldown-vite](https://vite.dev/guide/rolldown)) for Fast Refresh
- [@vitejs/plugin-react-swc](https://github.com/vitejs/vite-plugin-react/blob/main/packages/plugin-react-swc) uses [SWC](https://swc.rs/) for Fast Refresh

## React Compiler

The React Compiler is not enabled on this template because of its impact on dev & build performances. To add it, see [this documentation](https://react.dev/learn/react-compiler/installation).

## Expanding the ESLint configuration

If you are developing a production application, we recommend updating the configuration to enable type-aware lint rules:

```js
export default defineConfig([
  globalIgnores(['dist']),
  {
    files: ['**/*.{ts,tsx}'],
    extends: [
      // Other configs...

      // Remove tseslint.configs.recommended and replace with this
      tseslint.configs.recommendedTypeChecked,
      // Alternatively, use this for stricter rules
      tseslint.configs.strictTypeChecked,
      // Optionally, add this for stylistic rules
      tseslint.configs.stylisticTypeChecked,

      // Other configs...
    ],
    languageOptions: {
      parserOptions: {
        project: ['./tsconfig.node.json', './tsconfig.app.json'],
        tsconfigRootDir: import.meta.dirname,
      },
      // other options...
    },
  },
])
```

You can also install [eslint-plugin-react-x](https://github.com/Rel1cx/eslint-react/tree/main/packages/plugins/eslint-plugin-react-x) and [eslint-plugin-react-dom](https://github.com/Rel1cx/eslint-react/tree/main/packages/plugins/eslint-plugin-react-dom) for React-specific lint rules:

```js
// eslint.config.js
import reactX from 'eslint-plugin-react-x'
import reactDom from 'eslint-plugin-react-dom'

export default defineConfig([
  globalIgnores(['dist']),
  {
    files: ['**/*.{ts,tsx}'],
    extends: [
      // Other configs...
      // Enable lint rules for React
      reactX.configs['recommended-typescript'],
      // Enable lint rules for React DOM
      reactDom.configs.recommended,
    ],
    languageOptions: {
      parserOptions: {
        project: ['./tsconfig.node.json', './tsconfig.app.json'],
        tsconfigRootDir: import.meta.dirname,
      },
      // other options...
    },
  },
])
```


================================================================================


========================= frontend\src\api\authApi.ts =========================
Full Path: C:\Users\USER\VSCODE\SUMMATIVES\Group_4_DevOps\frontend\src\api\authApi.ts
Size: 518 bytes
Modified: 2025-11-30 22:14:55
Extension: .ts
--------------------------------------------------------------------------------

import axiosClient from "./axiosClient";

export const login = (data) => axiosClient.post("auth/login/", data);
export const register = (data) => axiosClient.post("auth/register/", data);
export const me = () => axiosClient.get("user/");
export const fetchProfile = () => axiosClient.get("profile/");
export const updateProfile = (data) => axiosClient.patch("profile/", data);
export const updateUser = (data) => axiosClient.patch("user/", data);
export const logout = () => axiosClient.post("auth/logout/");


================================================================================


======================= frontend\src\api\axiosClient.ts =======================
Full Path: C:\Users\USER\VSCODE\SUMMATIVES\Group_4_DevOps\frontend\src\api\axiosClient.ts
Size: 1536 bytes
Modified: 2025-11-30 22:14:55
Extension: .ts
--------------------------------------------------------------------------------

import axios, { AxiosError, AxiosResponse, InternalAxiosRequestConfig } from 'axios'

// Get base URL from environment variable or use default
const baseURL = import.meta.env.VITE_API_BASE_URL || 'http://localhost:8000'

// Create axios instance with base configuration
const axiosClient = axios.create({
  baseURL: `${baseURL}/api/`,
  headers: { 'Content-Type': 'application/json' },
})

// Attach token if present
axiosClient.interceptors.request.use(
  (config: InternalAxiosRequestConfig) => {
    try {
      const token = localStorage.getItem('access_token')
      if (token && config.headers) {
        config.headers.Authorization = `Bearer ${token}`
      } else if (config.headers) {
        // Explicitly remove Authorization header if no token
        delete config.headers.Authorization
      }
    } catch (e) {
      // localStorage not available (e.g., SSR)
      console.warn('localStorage not available:', e)
    }
    return config
  },
  (error: AxiosError) => {
    return Promise.reject(error)
  }
)

// Add response interceptor for error logging
axiosClient.interceptors.response.use(
  (response: AxiosResponse) => response,
  (error: AxiosError) => {
    // Log all errors for debugging
    console.error('API Error:', {
      url: error.config?.url,
      method: error.config?.method,
      status: error.response?.status,
      data: error.response?.data,
      message: error.message
    })
    return Promise.reject(error)
  }
)

export default axiosClient

================================================================================


======================== frontend\src\api\courseApi.ts ========================
Full Path: C:\Users\USER\VSCODE\SUMMATIVES\Group_4_DevOps\frontend\src\api\courseApi.ts
Size: 1397 bytes
Modified: 2025-11-30 22:14:55
Extension: .ts
--------------------------------------------------------------------------------

import axiosClient from "./axiosClient";

// Course APIs
export const fetchCourses = (params) => axiosClient.get("courses/", { params });
export const fetchCourse = (id) => axiosClient.get(`courses/${id}/`);
export const createCourse = (data) => axiosClient.post("courses/", data);
export const updateCourse = (id, data) => axiosClient.patch(`courses/${id}/`, data);
export const deleteCourse = (id) => axiosClient.delete(`courses/${id}/`);
export const getCourseStudents = (courseId) => axiosClient.get(`courses/${courseId}/my_students/`);

// Lesson APIs
export const fetchLessons = (courseId) =>
  axiosClient.get(`lessons/`, { params: { course: courseId } });
export const fetchLesson = (id) => axiosClient.get(`lessons/${id}/`);
export const createLesson = (data) => axiosClient.post("lessons/", data);
export const updateLesson = (id, data) => axiosClient.patch(`lessons/${id}/`, data);
export const deleteLesson = (id) => axiosClient.delete(`lessons/${id}/`);

// Enrollment APIs
export const enrollCourse = (courseId) =>
  axiosClient.post("enrollments/", { course: courseId });
export const fetchEnrollments = () => axiosClient.get("enrollments/");
export const fetchEnrollment = (id) => axiosClient.get(`enrollments/${id}/`);
export const updateEnrollmentProgress = (id, progress) =>
  axiosClient.patch(`enrollments/${id}/`, { progress_percentage: progress });


================================================================================


============================= frontend\src\App.css =============================
Full Path: C:\Users\USER\VSCODE\SUMMATIVES\Group_4_DevOps\frontend\src\App.css
Size: 648 bytes
Modified: 2025-11-30 22:03:59
Extension: .css
--------------------------------------------------------------------------------

#root {
  max-width: 1280px;
  margin: 0 auto;
  padding: 2rem;
  text-align: center;
}

.logo {
  height: 6em;
  padding: 1.5em;
  will-change: filter;
  transition: filter 300ms;
}
.logo:hover {
  filter: drop-shadow(0 0 2em #646cffaa);
}
.logo.react:hover {
  filter: drop-shadow(0 0 2em #61dafbaa);
}

@keyframes logo-spin {
  from {
    transform: rotate(0deg);
  }
  to {
    transform: rotate(360deg);
  }
}

@media (prefers-reduced-motion: no-preference) {
  a:nth-of-type(2) .logo {
    animation: logo-spin infinite 20s linear;
  }
}

.card {
  padding: 2em;
}

.read-the-docs {
  color: #888;
}


================================================================================


============================= frontend\src\App.tsx =============================
Full Path: C:\Users\USER\VSCODE\SUMMATIVES\Group_4_DevOps\frontend\src\App.tsx
Size: 3208 bytes
Modified: 2025-11-30 22:14:55
Extension: .tsx
--------------------------------------------------------------------------------

// src/App.tsx
import React, { useEffect } from 'react';
import { Routes, Route, Navigate } from 'react-router-dom';

import Navbar from './components/Navbar';
import ToastContainer from './components/ToastContainer';
import Login from './pages/Login';
import Register from './pages/Register';
import Courses from './pages/Courses';
import CourseDetail from './pages/CourseDetail';
import Dashboard from './pages/Dashboard';
import Profile from './pages/Profile';
import CreateCourse from './pages/CreateCourse';
import ProtectedRoute from './components/ProtectedRoute';
import PublicRoute from './components/PublicRoute';

import { me } from './api/authApi';
import { useAuthStore } from './store/authStore';

export default function App() {
  const setUser = useAuthStore((s) => s.setUser);
  const user = useAuthStore((s) => s.user);

  useEffect(() => {
    // Only fetch user if we have a token and no user data
    const token = localStorage.getItem('access_token');
    if (token && !user) {
      (async () => {
        try {
          const res = await me();
          setUser(res.data);
        } catch (e) {
          // Token is invalid, clear it
          localStorage.removeItem('access_token');
          localStorage.removeItem('refresh_token');
          console.error('Failed to fetch user:', e);
        }
      })();
    }
  }, [setUser, user]);

  return (
    <div>
      <Navbar />
      <ToastContainer />
      <Routes>
        <Route
          path="/"
          element={
            user ? (
              <Navigate to="/dashboard" replace />
            ) : (
              <Navigate to="/login" replace />
            )
          }
        />
        <Route
          path="/login"
          element={
            <PublicRoute>
              <Login />
            </PublicRoute>
          }
        />
        <Route
          path="/register"
          element={
            <PublicRoute>
              <Register />
            </PublicRoute>
          }
        />
        <Route
          path="/courses"
          element={
            <ProtectedRoute>
              <Courses />
            </ProtectedRoute>
          }
        />
        <Route
          path="/courses/create"
          element={
            <ProtectedRoute>
              <CreateCourse />
            </ProtectedRoute>
          }
        />
        <Route
          path="/courses/:id/edit"
          element={
            <ProtectedRoute>
              <CreateCourse />
            </ProtectedRoute>
          }
        />
        <Route
          path="/courses/:id"
          element={
            <ProtectedRoute>
              <CourseDetail />
            </ProtectedRoute>
          }
        />
        <Route
          path="/dashboard"
          element={
            <ProtectedRoute>
              <Dashboard />
            </ProtectedRoute>
          }
        />
        <Route
          path="/profile"
          element={
            <ProtectedRoute>
              <Profile />
            </ProtectedRoute>
          }
        />
      </Routes>
    </div>
  );
}


================================================================================


==================== frontend\src\components\CourseCard.jsx ====================
Full Path: C:\Users\USER\VSCODE\SUMMATIVES\Group_4_DevOps\frontend\src\components\CourseCard.jsx
Size: 3106 bytes
Modified: 2025-11-30 22:14:55
Extension: .jsx
--------------------------------------------------------------------------------

import React from "react";
import { Link } from "react-router-dom";

export default function CourseCard({ course }) {
  // Fallback image if course doesn't have one
  const imageUrl =
    course.thumbnail || "https://via.placeholder.com/400x250?text=Course+Image";

  // Map backend level to display format
  const levelMap = {
    beginner: "Beginner",
    intermediate: "Intermediate",
    advanced: "Advanced",
  };
  const displayLevel = levelMap[course.level] || course.level;

  return (
    <div className="bg-white rounded-lg shadow-md hover:shadow-xl transition-shadow duration-300 overflow-hidden">
      <img
        src={imageUrl}
        alt={course.title}
        className="w-full h-48 object-cover"
        onError={(e) => {
          e.target.src =
            "https://via.placeholder.com/400x250?text=Course+Image";
        }}
      />
      <div className="p-4">
        <div className="flex items-center justify-between mb-2">
          <span className="text-xs font-semibold text-purple-600 uppercase tracking-wide">
            {course.category || "General"}
          </span>
          {course.level && (
            <span
              className={`text-xs px-2 py-1 rounded ${
                course.level === "beginner"
                  ? "bg-green-100 text-green-800"
                  : course.level === "intermediate"
                  ? "bg-yellow-100 text-yellow-800"
                  : "bg-red-100 text-red-800"
              }`}
            >
              {displayLevel}
            </span>
          )}
        </div>
        <h3 className="font-bold text-lg mb-2 line-clamp-2">{course.title}</h3>
        <p className="text-sm text-gray-600 mb-4 line-clamp-3">
          {course.description}
        </p>

        <div className="flex items-center justify-between">
          <div className="flex items-center gap-3">
            {course.instructor && (
              <div className="flex items-center text-gray-500 text-xs">
                <svg
                  className="w-4 h-4 mr-1"
                  fill="none"
                  stroke="currentColor"
                  viewBox="0 0 24 24"
                >
                  <path
                    strokeLinecap="round"
                    strokeLinejoin="round"
                    strokeWidth="2"
                    d="M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"
                  />
                </svg>
                {course.instructor.username}
              </div>
            )}
            {(course.enrolled_students_count || 0) > 0 && (
              <span className="text-xs text-gray-500">
                {course.enrolled_students_count || 0} students
              </span>
            )}
          </div>
          <Link
            to={`/courses/${course.id}`}
            className="px-4 py-2 bg-purple-600 text-white text-sm rounded hover:bg-purple-700 transition-colors"
          >
            View Course
          </Link>
        </div>
      </div>
    </div>
  );
}


================================================================================


================== frontend\src\components\ErrorBoundary.tsx ==================
Full Path: C:\Users\USER\VSCODE\SUMMATIVES\Group_4_DevOps\frontend\src\components\ErrorBoundary.tsx
Size: 3544 bytes
Modified: 2025-11-30 22:14:55
Extension: .tsx
--------------------------------------------------------------------------------

import React, { Component, ErrorInfo, ReactNode } from 'react';

interface Props {
  children: ReactNode;
}

interface State {
  hasError: boolean;
  error: Error | null;
  errorInfo: ErrorInfo | null;
}

class ErrorBoundary extends Component<Props, State> {
  constructor(props: Props) {
    super(props);
    this.state = { hasError: false, error: null, errorInfo: null };
  }

  static getDerivedStateFromError(error: Error): State {
    // Update state so the next render will show the fallback UI.
    return { hasError: true, error, errorInfo: null };
  }

  componentDidCatch(error: Error, errorInfo: ErrorInfo) {
    // Log the error to console
    console.error('ErrorBoundary caught an error:', error, errorInfo);
    this.setState({
      error: error,
      errorInfo: errorInfo
    });
  }

  render() {
    if (this.state.hasError) {
      // You can render any custom fallback UI
      return (
        <div className="min-h-screen flex items-center justify-center bg-gray-50">
          <div className="max-w-md w-full bg-white rounded-lg shadow-lg p-6">
            <div className="text-center">
              <div className="mb-4">
                <svg
                  className="mx-auto h-12 w-12 text-red-500"
                  fill="none"
                  stroke="currentColor"
                  viewBox="0 0 24 24"
                >
                  <path
                    strokeLinecap="round"
                    strokeLinejoin="round"
                    strokeWidth="2"
                    d="M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"
                  />
                </svg>
              </div>
              <h1 className="text-2xl font-bold text-gray-800 mb-2">
                Something went wrong
              </h1>
              <p className="text-gray-600 mb-4">
                We're sorry, but something unexpected happened. Please try refreshing the page.
              </p>
              <div className="space-y-2">
                <button
                  onClick={() => window.location.reload()}
                  className="w-full px-4 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700"
                >
                  Refresh Page
                </button>
                <button
                  onClick={() => {
                    this.setState({ hasError: false, error: null, errorInfo: null });
                    window.location.href = '/dashboard';
                  }}
                  className="w-full px-4 py-2 bg-gray-200 text-gray-700 rounded-lg hover:bg-gray-300"
                >
                  Go to Dashboard
                </button>
              </div>
              {process.env.NODE_ENV === 'development' && this.state.error && (
                <details className="mt-4 text-left">
                  <summary className="cursor-pointer text-sm text-gray-500">
                    Error Details (Development Only)
                  </summary>
                  <pre className="mt-2 text-xs bg-gray-100 p-2 rounded overflow-auto max-h-40">
                    {this.state.error.toString()}
                    {this.state.errorInfo?.componentStack}
                  </pre>
                </details>
              )}
            </div>
          </div>
        </div>
      );
    }

    return this.props.children;
  }
}

export default ErrorBoundary;



================================================================================


================== frontend\src\components\LoadingSpinner.tsx ==================
Full Path: C:\Users\USER\VSCODE\SUMMATIVES\Group_4_DevOps\frontend\src\components\LoadingSpinner.tsx
Size: 627 bytes
Modified: 2025-11-30 22:03:59
Extension: .tsx
--------------------------------------------------------------------------------

import React from "react";

interface LoadingSpinnerProps {
  size?: "small" | "medium" | "large";
  text?: string;
}

export default function LoadingSpinner({
  size = "medium",
  text,
}: LoadingSpinnerProps) {
  const sizes = {
    small: "w-8 h-8",
    medium: "w-12 h-12",
    large: "w-16 h-16",
  };

  return (
    <div className="flex flex-col items-center justify-center p-8">
      <div
        className={`${sizes[size]} border-4 border-purple-200 border-t-purple-600 rounded-full animate-spin`}
      ></div>
      {text && <p className="mt-4 text-gray-600">{text}</p>}
    </div>
  );
}


================================================================================


====================== frontend\src\components\Navbar.jsx ======================
Full Path: C:\Users\USER\VSCODE\SUMMATIVES\Group_4_DevOps\frontend\src\components\Navbar.jsx
Size: 1076 bytes
Modified: 2025-11-30 22:14:55
Extension: .jsx
--------------------------------------------------------------------------------

import React from 'react'
import { Link, useNavigate } from 'react-router-dom'
import { useAuthStore } from '../store/authStore'


export default function Navbar(){
const user = useAuthStore(s => s.user)
const logout = useAuthStore(s => s.logout)
const navigate = useNavigate()


const onLogout = () => { logout(); navigate('/login') }


return (
<nav className="bg-white shadow p-4 flex justify-between items-center">
<div className="font-bold text-lg">LearnHub</div>
<div className="space-x-4">
<Link to="/courses" className="hover:underline">Courses</Link>
{user ? (
<>
<Link to="/dashboard" className="hover:underline">Dashboard</Link>
{user.role === 'instructor' && (
<Link to="/courses/create" className="hover:underline">Create Course</Link>
)}
<Link to="/profile" className="hover:underline">Profile</Link>
<button onClick={onLogout} className="ml-2 px-3 py-1 rounded border">Logout</button>
</>
) : (
<>
<Link to="/login" className="ml-2">Login</Link>
<Link to="/register" className="ml-2">Register</Link>
</>
)}
</div>
</nav>
)
}

================================================================================


================== frontend\src\components\ProtectedRoute.jsx ==================
Full Path: C:\Users\USER\VSCODE\SUMMATIVES\Group_4_DevOps\frontend\src\components\ProtectedRoute.jsx
Size: 1665 bytes
Modified: 2025-11-30 22:14:55
Extension: .jsx
--------------------------------------------------------------------------------

import React, { useEffect, useState } from 'react';
import { Navigate } from 'react-router-dom';
import { useAuthStore } from '../store/authStore';
import { me } from '../api/authApi';
import LoadingSpinner from './LoadingSpinner';

/**
 * ProtectedRoute - Ensures user is authenticated before accessing protected pages.
 * Redirects to login if not authenticated.
 */
export default function ProtectedRoute({ children }) {
  const user = useAuthStore((s) => s.user);
  const setUser = useAuthStore((s) => s.setUser);
  const [loading, setLoading] = useState(true);
  const [checking, setChecking] = useState(false);

  useEffect(() => {
    // Check if we have a token but no user data
    const token = localStorage.getItem('access_token');
    
    if (!user && token && !checking) {
      setChecking(true);
      // Try to fetch user data
      me()
        .then((res) => {
          setUser(res.data);
          setLoading(false);
        })
        .catch(() => {
          // Token is invalid, clear it
          localStorage.removeItem('access_token');
          localStorage.removeItem('refresh_token');
          setLoading(false);
        })
        .finally(() => {
          setChecking(false);
        });
    } else if (!token) {
      // No token, no need to check
      setLoading(false);
    } else if (user) {
      // User already loaded
      setLoading(false);
    }
  }, [user, setUser, checking]);

  if (loading) {
    return <LoadingSpinner size="large" text="Checking authentication..." />;
  }

  if (!user) {
    return <Navigate to="/login" replace />;
  }

  return children;
}

================================================================================


=================== frontend\src\components\PublicRoute.jsx ===================
Full Path: C:\Users\USER\VSCODE\SUMMATIVES\Group_4_DevOps\frontend\src\components\PublicRoute.jsx
Size: 556 bytes
Modified: 2025-11-30 22:14:55
Extension: .jsx
--------------------------------------------------------------------------------

import React from 'react';
import { Navigate } from 'react-router-dom';
import { useAuthStore } from '../store/authStore';

/**
 * PublicRoute - Redirects authenticated users away from public pages (login/register)
 * to prevent them from accessing these pages when already logged in.
 */
export default function PublicRoute({ children }) {
  const user = useAuthStore((s) => s.user);
  
  // If user is already logged in, redirect to dashboard
  if (user) {
    return <Navigate to="/dashboard" replace />;
  }
  
  return children;
}



================================================================================


====================== frontend\src\components\Toast.tsx ======================
Full Path: C:\Users\USER\VSCODE\SUMMATIVES\Group_4_DevOps\frontend\src\components\Toast.tsx
Size: 1006 bytes
Modified: 2025-11-30 22:03:59
Extension: .tsx
--------------------------------------------------------------------------------

import React, { useEffect } from "react";

interface ToastProps {
  message: string;
  type?: "success" | "error" | "info" | "warning";
  onClose: () => void;
  duration?: number;
}

export default function Toast({
  message,
  type = "info",
  onClose,
  duration = 3000,
}: ToastProps) {
  useEffect(() => {
    const timer = setTimeout(onClose, duration);
    return () => clearTimeout(timer);
  }, [duration, onClose]);

  const bgColors = {
    success: "bg-green-500",
    error: "bg-red-500",
    info: "bg-blue-500",
    warning: "bg-yellow-500",
  };

  return (
    <div
      className={`fixed top-4 right-4 ${bgColors[type]} text-white px-6 py-3 rounded-lg shadow-lg z-50 animate-slide-in`}
    >
      <div className="flex items-center gap-2">
        <span>{message}</span>
        <button
          onClick={onClose}
          className="ml-4 text-white hover:text-gray-200"
        >
          ✕
        </button>
      </div>
    </div>
  );
}


================================================================================


================== frontend\src\components\ToastContainer.tsx ==================
Full Path: C:\Users\USER\VSCODE\SUMMATIVES\Group_4_DevOps\frontend\src\components\ToastContainer.tsx
Size: 573 bytes
Modified: 2025-11-30 22:14:55
Extension: .tsx
--------------------------------------------------------------------------------

import React from "react";
import Toast from "./Toast";
import { useToastStore } from "../store/toastStore";

export default function ToastContainer() {
  const toasts = useToastStore((s) => s.toasts);
  const removeToast = useToastStore((s) => s.removeToast);

  return (
    <div className="fixed top-4 right-4 z-50 space-y-2">
      {toasts.map((toast) => (
        <Toast
          key={toast.id}
          message={toast.message}
          type={toast.type}
          onClose={() => removeToast(toast.id)}
        />
      ))}
    </div>
  );
}



================================================================================


=========================== frontend\src\custom.d.ts ===========================
Full Path: C:\Users\USER\VSCODE\SUMMATIVES\Group_4_DevOps\frontend\src\custom.d.ts
Size: 130 bytes
Modified: 2025-11-30 22:03:59
Extension: .ts
--------------------------------------------------------------------------------

declare module "*.jsx" {
  import React from "react";
  const content: React.ComponentType<any>;
  export default content;
}


================================================================================


======================== frontend\src\hooks\useToast.ts ========================
Full Path: C:\Users\USER\VSCODE\SUMMATIVES\Group_4_DevOps\frontend\src\hooks\useToast.ts
Size: 311 bytes
Modified: 2025-11-30 22:14:55
Extension: .ts
--------------------------------------------------------------------------------

import { useToastStore } from "../store/toastStore";

export default function useToast() {
  const showToast = useToastStore((s) => s.showToast);
  const removeToast = useToastStore((s) => s.removeToast);
  const toasts = useToastStore((s) => s.toasts);

  return { toasts, showToast, removeToast };
}


================================================================================


============================ frontend\src\index.css ============================
Full Path: C:\Users\USER\VSCODE\SUMMATIVES\Group_4_DevOps\frontend\src\index.css
Size: 1075 bytes
Modified: 2025-11-30 22:03:59
Extension: .css
--------------------------------------------------------------------------------

@import "tailwindcss";

body { 
  background-color: rgb(249 250 251);
  color: rgb(31 41 55);
}

/* Custom animations */
@keyframes slide-in {
  from {
    transform: translateX(100%);
    opacity: 0;
  }
  to {
    transform: translateX(0);
    opacity: 1;
  }
}

@keyframes blob {
  0% {
    transform: translate(0px, 0px) scale(1);
  }
  33% {
    transform: translate(30px, -50px) scale(1.1);
  }
  66% {
    transform: translate(-20px, 20px) scale(0.9);
  }
  100% {
    transform: translate(0px, 0px) scale(1);
  }
}

.animate-slide-in {
  animation: slide-in 0.3s ease-out;
}

.animate-blob {
  animation: blob 7s infinite;
}

.animation-delay-2000 {
  animation-delay: 2s;
}

.animation-delay-4000 {
  animation-delay: 4s;
}

/* Utility classes for line clamping */
.line-clamp-2 {
  display: -webkit-box;
  -webkit-line-clamp: 2;
  -webkit-box-orient: vertical;
  overflow: hidden;
}

.line-clamp-3 {
  display: -webkit-box;
  -webkit-line-clamp: 3;
  -webkit-box-orient: vertical;
  overflow: hidden;
}

================================================================================


============================ frontend\src\main.tsx ============================
Full Path: C:\Users\USER\VSCODE\SUMMATIVES\Group_4_DevOps\frontend\src\main.tsx
Size: 483 bytes
Modified: 2025-11-30 22:14:55
Extension: .tsx
--------------------------------------------------------------------------------

import { createRoot } from "react-dom/client";
import { BrowserRouter } from "react-router-dom";
import App from "./App";
import ErrorBoundary from "./components/ErrorBoundary";
import "./index.css";

const container = document.getElementById("root");
if (!container) {
  throw new Error("Root element not found");
}

const root = createRoot(container);

root.render(
  <ErrorBoundary>
    <BrowserRouter>
      <App />
    </BrowserRouter>
  </ErrorBoundary>
);


================================================================================


===================== frontend\src\pages\CourseDetail.jsx =====================
Full Path: C:\Users\USER\VSCODE\SUMMATIVES\Group_4_DevOps\frontend\src\pages\CourseDetail.jsx
Size: 17170 bytes
Modified: 2025-11-30 22:14:55
Extension: .jsx
--------------------------------------------------------------------------------

import React, { useEffect, useState } from "react";
import { useParams, Link } from "react-router-dom";
import { fetchCourse, enrollCourse, fetchEnrollments } from "../api/courseApi";
import LoadingSpinner from "../components/LoadingSpinner";
import { useAuthStore } from "../store/authStore";
import useToast from "../hooks/useToast";

export default function CourseDetail() {
  const { id } = useParams();
  const [course, setCourse] = useState(null);
  const [loading, setLoading] = useState(true);
  const [enrolled, setEnrolled] = useState(false);
  const [enrolling, setEnrolling] = useState(false);
  const user = useAuthStore((s) => s.user);
  const { showToast } = useToast();

  useEffect(() => {
    loadCourseData();
  }, [id]);

  const loadCourseData = async () => {
    try {
      if (!id) {
        throw new Error("Course ID is missing");
      }
      
      const res = await fetchCourse(id);
      
      if (!res.data) {
        throw new Error("Course data not found in response");
      }
      
      setCourse(res.data);

      // Check if user is enrolled
      if (user) {
        try {
          const enrollmentsRes = await fetchEnrollments();
          const enrollments = Array.isArray(enrollmentsRes.data) 
            ? enrollmentsRes.data 
            : enrollmentsRes.data?.results || [];
          const isEnrolled = enrollments.some(
            (e) => {
              const courseId = e.course?.id || e.course_id;
              return courseId === parseInt(id) || courseId === id;
            }
          );
          setEnrolled(isEnrolled);
        } catch (e) {
          console.error("Failed to check enrollment:", e);
          // Don't fail the whole page if enrollment check fails
        }
      }
    } catch (e) {
      console.error("Failed to fetch course:", e);
      showToast("Failed to load course details", "error");
      setCourse(null); // Ensure course is null so error UI shows
    } finally {
      setLoading(false);
    }
  };

  const handleEnroll = async () => {
    if (!user) return;

    setEnrolling(true);
    try {
      await enrollCourse(id);
      setEnrolled(true);
      showToast("Successfully enrolled in course!", "success");
    } catch (err) {
      showToast("Failed to enroll in course", "error");
    }
    setEnrolling(false);
  };

  if (loading)
    return <LoadingSpinner size="large" text="Loading course details..." />;
  if (!course)
    return (
      <div className="p-6 text-center">
        <p className="text-gray-500">Course not found</p>
        <Link
          to="/courses"
          className="mt-4 inline-block text-purple-600 hover:text-purple-700"
        >
          ← Back to courses
        </Link>
      </div>
    );

  const imageUrl =
    course.thumbnail ||
    "https://via.placeholder.com/1200x400?text=Course+Banner";

  // Map backend level to display format
  const levelMap = {
    beginner: "Beginner",
    intermediate: "Intermediate",
    advanced: "Advanced",
  };
  const displayLevel = levelMap[course.level] || course.level;

  return (
    <div className="min-h-screen bg-gray-50">
      {/* Hero Section */}
      <div className="bg-linear-to-r from-purple-600 to-purple-700 text-white">
        <div className="max-w-7xl mx-auto px-4 py-12">
          <Link
            to="/courses"
            className="inline-flex items-center text-purple-200 hover:text-white mb-4"
          >
            <svg
              className="w-5 h-5 mr-2"
              fill="none"
              stroke="currentColor"
              viewBox="0 0 24 24"
            >
              <path
                strokeLinecap="round"
                strokeLinejoin="round"
                strokeWidth="2"
                d="M10 19l-7-7m0 0l7-7m-7 7h18"
              />
            </svg>
            Back to courses
          </Link>
          <div className="grid grid-cols-1 lg:grid-cols-2 gap-8 items-center">
            <div>
              {course.category && (
                <span className="inline-block px-3 py-1 bg-purple-500 rounded-full text-sm font-semibold mb-4">
                  {course.category}
                </span>
              )}
              <h1 className="text-4xl font-bold mb-4">{course.title}</h1>
              <p className="text-purple-100 text-lg mb-6">
                {course.description?.substring(0, 150)}
              </p>

              <div className="flex items-center gap-6 mb-6">
                {course.instructor && (
                  <div className="flex items-center">
                    <svg
                      className="w-5 h-5 mr-2"
                      fill="none"
                      stroke="currentColor"
                      viewBox="0 0 24 24"
                    >
                      <path
                        strokeLinecap="round"
                        strokeLinejoin="round"
                        strokeWidth="2"
                        d="M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"
                      />
                    </svg>
                    <span>By {course.instructor.username}</span>
                  </div>
                )}
                {course.enrolled_students_count > 0 && (
                  <div className="flex items-center">
                    <svg
                      className="w-5 h-5 mr-2"
                      fill="none"
                      stroke="currentColor"
                      viewBox="0 0 24 24"
                    >
                      <path
                        strokeLinecap="round"
                        strokeLinejoin="round"
                        strokeWidth="2"
                        d="M12 4.354a4 4 0 110 5.292M15 21H3v-1a6 6 0 0112 0v1zm0 0h6v-1a6 6 0 00-9-5.197M13 7a4 4 0 11-8 0 4 4 0 018 0z"
                      />
                    </svg>
                    <span>
                      {course.enrolled_students_count} students enrolled
                    </span>
                  </div>
                )}
                {course.level && (
                  <span
                    className={`px-3 py-1 rounded-full text-sm font-semibold ${
                      course.level === "beginner"
                        ? "bg-green-500"
                        : course.level === "intermediate"
                        ? "bg-yellow-500"
                        : "bg-red-500"
                    }`}
                  >
                    {displayLevel}
                  </span>
                )}
              </div>

              {user ? (
                user.role === "instructor" && course.instructor?.id === user.id ? (
                  <div className="flex gap-3">
                    <Link
                      to={`/courses/${id}/edit`}
                      className="px-8 py-3 bg-white text-purple-600 rounded-lg font-semibold hover:bg-gray-100 transition-colors"
                    >
                      Edit Course
                    </Link>
                  </div>
                ) : user.role === "student" ? (
                  <button
                    onClick={handleEnroll}
                    disabled={enrolled || enrolling}
                    className={`px-8 py-3 rounded-lg font-semibold transition-colors ${
                      enrolled
                        ? "bg-gray-200 text-gray-800 cursor-not-allowed"
                        : "bg-white text-purple-600 hover:bg-gray-100"
                    }`}
                  >
                    {enrolling
                      ? "Enrolling..."
                      : enrolled
                      ? "✓ Enrolled"
                      : "Enroll Now"}
                  </button>
                ) : null
              ) : (
                <Link
                  to="/login"
                  className="inline-block px-8 py-3 bg-white text-purple-600 rounded-lg font-semibold hover:bg-gray-100 transition-colors"
                >
                  Sign in to Enroll
                </Link>
              )}
            </div>
            <div className="hidden lg:block">
              <img
                src={imageUrl}
                alt={course.title}
                className="rounded-lg shadow-2xl"
                onError={(e) => {
                  e.target.src =
                    "https://via.placeholder.com/600x400?text=Course+Image";
                }}
              />
            </div>
          </div>
        </div>
      </div>

      {/* Course Content */}
      <div className="max-w-7xl mx-auto px-4 py-12">
        <div className="grid grid-cols-1 lg:grid-cols-3 gap-8">
          {/* Main Content */}
          <div className="lg:col-span-2">
            <div className="bg-white rounded-lg shadow p-8 mb-6">
              <h2 className="text-2xl font-bold text-gray-800 mb-4">
                About This Course
              </h2>
              <p className="text-gray-700 leading-relaxed whitespace-pre-line">
                {course.description ||
                  course.long_description ||
                  "No detailed description available."}
              </p>
            </div>

            {/* What You'll Learn */}
            <div className="bg-white rounded-lg shadow p-8 mb-6">
              <h2 className="text-2xl font-bold text-gray-800 mb-4">
                What You'll Learn
              </h2>
              <ul className="grid grid-cols-1 md:grid-cols-2 gap-3">
                {(
                  course.learning_objectives || [
                    "Master the fundamentals",
                    "Build real-world projects",
                    "Best practices and patterns",
                    "Advanced techniques",
                  ]
                ).map((objective, idx) => (
                  <li key={idx} className="flex items-start">
                    <svg
                      className="w-5 h-5 text-green-500 mr-2 mt-0.5 shrink-0"
                      fill="none"
                      stroke="currentColor"
                      viewBox="0 0 24 24"
                    >
                      <path
                        strokeLinecap="round"
                        strokeLinejoin="round"
                        strokeWidth="2"
                        d="M5 13l4 4L19 7"
                      />
                    </svg>
                    <span className="text-gray-700">{objective}</span>
                  </li>
                ))}
              </ul>
            </div>

            {/* Course Curriculum */}
            {course.lessons && course.lessons.length > 0 && (
              <div className="bg-white rounded-lg shadow p-8">
                <h2 className="text-2xl font-bold text-gray-800 mb-4">
                  Course Curriculum
                </h2>
                <div className="space-y-3">
                  {course.lessons.map((lesson, idx) => (
                    <div
                      key={lesson.id}
                      className="border rounded-lg p-4 hover:bg-gray-50 transition-colors"
                    >
                      <div className="flex items-start justify-between">
                        <div className="flex-1">
                          <h3 className="font-semibold text-gray-800">
                            {idx + 1}. {lesson.title}
                          </h3>
                          {lesson.description && (
                            <p className="text-sm text-gray-600 mt-1">
                              {lesson.description}
                            </p>
                          )}
                        </div>
                        {lesson.duration_minutes && (
                          <span className="text-sm text-gray-500 ml-4">
                            {lesson.duration_minutes} min
                          </span>
                        )}
                      </div>
                    </div>
                  ))}
                </div>
              </div>
            )}
          </div>

          {/* Sidebar */}
          <div className="lg:col-span-1">
            <div className="bg-white rounded-lg shadow p-6 sticky top-6">
              <h3 className="text-xl font-bold text-gray-800 mb-4">
                Course Info
              </h3>
              <div className="space-y-4">
                <div className="flex items-start">
                  <svg
                    className="w-5 h-5 text-gray-400 mr-3 mt-0.5"
                    fill="none"
                    stroke="currentColor"
                    viewBox="0 0 24 24"
                  >
                    <path
                      strokeLinecap="round"
                      strokeLinejoin="round"
                      strokeWidth="2"
                      d="M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"
                    />
                  </svg>
                  <div>
                    <p className="text-sm text-gray-500">Duration</p>
                    <p className="font-semibold text-gray-800">
                      {course.duration_hours
                        ? `${course.duration_hours} hours`
                        : "Self-paced"}
                    </p>
                  </div>
                </div>

                <div className="flex items-start">
                  <svg
                    className="w-5 h-5 text-gray-400 mr-3 mt-0.5"
                    fill="none"
                    stroke="currentColor"
                    viewBox="0 0 24 24"
                  >
                    <path
                      strokeLinecap="round"
                      strokeLinejoin="round"
                      strokeWidth="2"
                      d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"
                    />
                  </svg>
                  <div>
                    <p className="text-sm text-gray-500">Skill Level</p>
                    <p className="font-semibold text-gray-800">
                      {displayLevel || "All Levels"}
                    </p>
                  </div>
                </div>

                <div className="flex items-start">
                  <svg
                    className="w-5 h-5 text-gray-400 mr-3 mt-0.5"
                    fill="none"
                    stroke="currentColor"
                    viewBox="0 0 24 24"
                  >
                    <path
                      strokeLinecap="round"
                      strokeLinejoin="round"
                      strokeWidth="2"
                      d="M3 5h12M9 3v2m1.048 9.5A18.022 18.022 0 016.412 9m6.088 9h7M11 21l5-10 5 10M12.751 5C11.783 10.77 8.07 15.61 3 18.129"
                    />
                  </svg>
                  <div>
                    <p className="text-sm text-gray-500">Language</p>
                    <p className="font-semibold text-gray-800">
                      {course.language || "English"}
                    </p>
                  </div>
                </div>

                <div className="flex items-start">
                  <svg
                    className="w-5 h-5 text-gray-400 mr-3 mt-0.5"
                    fill="none"
                    stroke="currentColor"
                    viewBox="0 0 24 24"
                  >
                    <path
                      strokeLinecap="round"
                      strokeLinejoin="round"
                      strokeWidth="2"
                      d="M12 6.253v13m0-13C10.832 5.477 9.246 5 7.5 5S4.168 5.477 3 6.253v13C4.168 18.477 5.754 18 7.5 18s3.332.477 4.5 1.253m0-13C13.168 5.477 14.754 5 16.5 5c1.747 0 3.332.477 4.5 1.253v13C19.832 18.477 18.247 18 16.5 18c-1.746 0-3.332.477-4.5 1.253"
                    />
                  </svg>
                  <div>
                    <p className="text-sm text-gray-500">Lessons</p>
                    <p className="font-semibold text-gray-800">
                      {course.lessons_count || course.lessons?.length || "0"}{" "}
                      lessons
                    </p>
                  </div>
                </div>
              </div>

              <div className="mt-6 pt-6 border-t">
                <h4 className="font-semibold text-gray-800 mb-3">
                  Share this course
                </h4>
                <div className="flex gap-2">
                  <button className="flex-1 px-4 py-2 bg-blue-500 text-white rounded hover:bg-blue-600 text-sm">
                    Facebook
                  </button>
                  <button className="flex-1 px-4 py-2 bg-sky-500 text-white rounded hover:bg-sky-600 text-sm">
                    Twitter
                  </button>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  );
}


================================================================================


======================== frontend\src\pages\Courses.jsx ========================
Full Path: C:\Users\USER\VSCODE\SUMMATIVES\Group_4_DevOps\frontend\src\pages\Courses.jsx
Size: 6362 bytes
Modified: 2025-11-30 22:14:55
Extension: .jsx
--------------------------------------------------------------------------------

import React, { useEffect, useState } from "react";
import { fetchCourses } from "../api/courseApi";
import CourseCard from "../components/CourseCard";
import LoadingSpinner from "../components/LoadingSpinner";

export default function Courses() {
  const [courses, setCourses] = useState([]);
  const [filteredCourses, setFilteredCourses] = useState([]);
  const [loading, setLoading] = useState(true);
  const [searchTerm, setSearchTerm] = useState("");
  const [selectedCategory, setSelectedCategory] = useState("all");
  const [selectedLevel, setSelectedLevel] = useState("all");

  useEffect(() => {
    (async () => {
      try {
        setLoading(true);
        const res = await fetchCourses();
        const coursesData = res.data?.results || res.data || [];
        const coursesArray = Array.isArray(coursesData) ? coursesData : [];
        
        if (coursesArray.length === 0) {
          console.warn("No courses returned from API");
        }
        
        setCourses(coursesArray);
        setFilteredCourses(coursesArray);
      } catch (e) {
        console.error("Failed to fetch courses:", e);
        console.error("Error details:", e.response?.data || e.message);
        setCourses([]);
        setFilteredCourses([]);
      } finally {
        setLoading(false);
      }
    })();
  }, []);

  // Filter courses whenever search term or filters change
  useEffect(() => {
    let filtered = [...courses];

    // Search filter
    if (searchTerm) {
      filtered = filtered.filter(
        (course) =>
          course.title?.toLowerCase().includes(searchTerm.toLowerCase()) ||
          course.description?.toLowerCase().includes(searchTerm.toLowerCase())
      );
    }

    // Category filter
    if (selectedCategory !== "all") {
      filtered = filtered.filter(
        (course) => course.category === selectedCategory
      );
    }

    // Level filter (backend uses lowercase: beginner/intermediate/advanced)
    if (selectedLevel !== "all") {
      filtered = filtered.filter(
        (course) => course.level === selectedLevel.toLowerCase()
      );
    }

    setFilteredCourses(filtered);
  }, [searchTerm, selectedCategory, selectedLevel, courses]);

  // Extract unique categories from courses
  const categories = [
    "all",
    ...new Set(courses.map((c) => c.category).filter(Boolean)),
  ];
  const levels = ["all", "Beginner", "Intermediate", "Advanced"];

  if (loading) return <LoadingSpinner size="large" text="Loading courses..." />;

  return (
    <div className="p-6 max-w-7xl mx-auto">
      <div className="mb-8">
        <h1 className="text-3xl font-bold text-gray-800 mb-2">
          Explore Courses
        </h1>
        <p className="text-gray-600">
          Discover and enroll in courses that match your interests
        </p>
      </div>

      {/* Search and Filters */}
      <div className="bg-white p-4 rounded-lg shadow mb-6">
        <div className="grid grid-cols-1 md:grid-cols-3 gap-4">
          {/* Search */}
          <div className="md:col-span-3">
            <input
              type="text"
              placeholder="Search courses..."
              value={searchTerm}
              onChange={(e) => setSearchTerm(e.target.value)}
              className="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent"
            />
          </div>

          {/* Category Filter */}
          <div>
            <label className="block text-sm font-medium text-gray-700 mb-1">
              Category
            </label>
            <select
              value={selectedCategory}
              onChange={(e) => setSelectedCategory(e.target.value)}
              className="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent"
            >
              {categories.map((cat) => (
                <option key={cat} value={cat}>
                  {cat.charAt(0).toUpperCase() + cat.slice(1)}
                </option>
              ))}
            </select>
          </div>

          {/* Level Filter */}
          <div>
            <label className="block text-sm font-medium text-gray-700 mb-1">
              Level
            </label>
            <select
              value={selectedLevel}
              onChange={(e) => setSelectedLevel(e.target.value)}
              className="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent"
            >
              {levels.map((level) => (
                <option key={level} value={level}>
                  {level.charAt(0).toUpperCase() + level.slice(1)}
                </option>
              ))}
            </select>
          </div>

          {/* Results count */}
          <div className="flex items-end">
            <p className="text-sm text-gray-600">
              Showing {filteredCourses.length} of {courses.length} courses
            </p>
          </div>
        </div>
      </div>

      {/* Course Grid */}
      {courses.length === 0 && !loading ? (
        <div className="text-center py-12">
          <p className="text-gray-500 text-lg mb-2">
            No courses available at the moment.
          </p>
          <p className="text-gray-400 text-sm">
            Check back later or contact an instructor to create courses.
          </p>
        </div>
      ) : filteredCourses.length === 0 ? (
        <div className="text-center py-12">
          <p className="text-gray-500 text-lg">
            No courses found matching your criteria.
          </p>
          <button
            onClick={() => {
              setSearchTerm("");
              setSelectedCategory("all");
              setSelectedLevel("all");
            }}
            className="mt-4 px-4 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700"
          >
            Clear Filters
          </button>
        </div>
      ) : (
        <div className="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
          {filteredCourses.map((c) => (
            <CourseCard key={c.id} course={c} />
          ))}
        </div>
      )}
    </div>
  );
}


================================================================================


===================== frontend\src\pages\CreateCourse.jsx =====================
Full Path: C:\Users\USER\VSCODE\SUMMATIVES\Group_4_DevOps\frontend\src\pages\CreateCourse.jsx
Size: 11264 bytes
Modified: 2025-11-30 22:14:55
Extension: .jsx
--------------------------------------------------------------------------------

import React, { useState } from "react";
import { useNavigate, useParams } from "react-router-dom";
import { createCourse, updateCourse, fetchCourse } from "../api/courseApi";
import { useAuthStore } from "../store/authStore";
import useToast from "../hooks/useToast";
import LoadingSpinner from "../components/LoadingSpinner";

export default function CreateCourse() {
  const { id: courseId } = useParams();
  const navigate = useNavigate();
  const user = useAuthStore((s) => s.user);
  const { showToast } = useToast();
  const [loading, setLoading] = useState(!!courseId);
  const [saving, setSaving] = useState(false);
  const [form, setForm] = useState({
    title: "",
    slug: "",
    description: "",
    category: "",
    level: "beginner",
    duration_hours: 0,
    thumbnail: "",
    preview_video_url: "",
    status: "draft",
    is_featured: false,
    price: 0,
  });

  React.useEffect(() => {
    if (courseId) {
      loadCourse();
    }
  }, [courseId]);

  const loadCourse = async () => {
    try {
      const res = await fetchCourse(courseId);
      const course = res.data;
      
      if (!course) {
        throw new Error("Course data not found");
      }
      
      setForm({
        title: course.title || "",
        slug: course.slug || "",
        description: course.description || "",
        category: course.category || "",
        level: course.level || "beginner",
        duration_hours: course.duration_hours || 0,
        thumbnail: course.thumbnail || "",
        preview_video_url: course.preview_video_url || "",
        status: course.status || "draft",
        is_featured: course.is_featured || false,
        price: course.price || 0,
      });
    } catch (e) {
      console.error("Failed to load course:", e);
      showToast("Failed to load course. Redirecting to dashboard.", "error");
      setTimeout(() => {
        navigate("/dashboard");
      }, 1500);
    } finally {
      setLoading(false);
    }
  };

  const handleSubmit = async (e) => {
    e.preventDefault();
    if (!form.title || !form.description) {
      showToast("Title and description are required", "error");
      return;
    }

    // Generate slug from title if not provided
    if (!form.slug) {
      form.slug = form.title
        .toLowerCase()
        .replace(/[^a-z0-9]+/g, "-")
        .replace(/(^-|-$)/g, "");
    }

    setSaving(true);
    try {
      if (courseId) {
        await updateCourse(courseId, form);
        showToast("Course updated successfully!", "success");
        // Navigate to dashboard after update
        setTimeout(() => {
          navigate("/dashboard");
        }, 1000);
      } else {
        const res = await createCourse(form);
        const newCourseId = res.data?.id || res.data?.pk || res.data?.course?.id;
        
        if (!newCourseId) {
          console.error("Course creation response:", res.data);
          showToast("Course created but could not get course ID. Redirecting to dashboard.", "warning");
          setTimeout(() => {
            navigate("/dashboard");
          }, 2000);
        } else {
          showToast("Course created successfully!", "success");
          // Navigate to edit page after a short delay to ensure data is saved
          setTimeout(() => {
            navigate(`/courses/${newCourseId}/edit`);
          }, 500);
        }
      }
    } catch (err) {
      console.error("Course save error:", err);
      showToast(
        err.response?.data?.detail || err.message || "Failed to save course",
        "error"
      );
    } finally {
      setSaving(false);
    }
  };

  if (loading) return <LoadingSpinner size="large" text="Loading course..." />;

  if (user?.role !== "instructor") {
    return (
      <div className="p-6 text-center">
        <p className="text-gray-500">Only instructors can create courses.</p>
      </div>
    );
  }

  return (
    <div className="p-6 max-w-4xl mx-auto">
      <h1 className="text-3xl font-bold text-gray-800 mb-6">
        {courseId ? "Edit Course" : "Create New Course"}
      </h1>

      <form onSubmit={handleSubmit} className="space-y-6">
        <div className="bg-white rounded-lg shadow p-6 space-y-4">
          <div>
            <label className="block text-sm font-medium text-gray-700 mb-1">
              Title *
            </label>
            <input
              type="text"
              value={form.title}
              onChange={(e) => setForm({ ...form, title: e.target.value })}
              className="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500"
              required
            />
          </div>

          <div>
            <label className="block text-sm font-medium text-gray-700 mb-1">
              Slug (auto-generated if empty)
            </label>
            <input
              type="text"
              value={form.slug}
              onChange={(e) => setForm({ ...form, slug: e.target.value })}
              className="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500"
              placeholder="course-slug"
            />
          </div>

          <div>
            <label className="block text-sm font-medium text-gray-700 mb-1">
              Description *
            </label>
            <textarea
              value={form.description}
              onChange={(e) =>
                setForm({ ...form, description: e.target.value })
              }
              rows="6"
              className="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500"
              required
            />
          </div>

          <div className="grid grid-cols-2 gap-4">
            <div>
              <label className="block text-sm font-medium text-gray-700 mb-1">
                Category
              </label>
              <input
                type="text"
                value={form.category}
                onChange={(e) =>
                  setForm({ ...form, category: e.target.value })
                }
                className="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500"
                placeholder="e.g., Programming, Design"
              />
            </div>

            <div>
              <label className="block text-sm font-medium text-gray-700 mb-1">
                Level
              </label>
              <select
                value={form.level}
                onChange={(e) => setForm({ ...form, level: e.target.value })}
                className="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500"
              >
                <option value="beginner">Beginner</option>
                <option value="intermediate">Intermediate</option>
                <option value="advanced">Advanced</option>
              </select>
            </div>
          </div>

          <div className="grid grid-cols-2 gap-4">
            <div>
              <label className="block text-sm font-medium text-gray-700 mb-1">
                Duration (hours)
              </label>
              <input
                type="number"
                value={form.duration_hours}
                onChange={(e) =>
                  setForm({ ...form, duration_hours: parseInt(e.target.value) || 0 })
                }
                className="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500"
                min="0"
              />
            </div>

            <div>
              <label className="block text-sm font-medium text-gray-700 mb-1">
                Price
              </label>
              <input
                type="number"
                step="0.01"
                value={form.price}
                onChange={(e) =>
                  setForm({ ...form, price: parseFloat(e.target.value) || 0 })
                }
                className="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500"
                min="0"
              />
            </div>
          </div>

          <div>
            <label className="block text-sm font-medium text-gray-700 mb-1">
              Thumbnail URL
            </label>
            <input
              type="url"
              value={form.thumbnail}
              onChange={(e) => setForm({ ...form, thumbnail: e.target.value })}
              className="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500"
              placeholder="https://example.com/image.jpg"
            />
          </div>

          <div>
            <label className="block text-sm font-medium text-gray-700 mb-1">
              Preview Video URL
            </label>
            <input
              type="url"
              value={form.preview_video_url}
              onChange={(e) =>
                setForm({ ...form, preview_video_url: e.target.value })
              }
              className="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500"
              placeholder="https://youtube.com/watch?v=..."
            />
          </div>

          <div className="grid grid-cols-2 gap-4">
            <div>
              <label className="block text-sm font-medium text-gray-700 mb-1">
                Status
              </label>
              <select
                value={form.status}
                onChange={(e) => setForm({ ...form, status: e.target.value })}
                className="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500"
              >
                <option value="draft">Draft</option>
                <option value="published">Published</option>
              </select>
            </div>

            <div className="flex items-center pt-6">
              <label className="flex items-center">
                <input
                  type="checkbox"
                  checked={form.is_featured}
                  onChange={(e) =>
                    setForm({ ...form, is_featured: e.target.checked })
                  }
                  className="mr-2"
                />
                <span className="text-sm text-gray-700">Featured Course</span>
              </label>
            </div>
          </div>
        </div>

        <div className="flex gap-4">
          <button
            type="submit"
            disabled={saving}
            className="px-6 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700 disabled:opacity-50"
          >
            {saving ? "Saving..." : courseId ? "Update Course" : "Create Course"}
          </button>
          <button
            type="button"
            onClick={() => navigate("/dashboard")}
            className="px-6 py-2 bg-gray-200 text-gray-700 rounded-lg hover:bg-gray-300"
          >
            Cancel
          </button>
        </div>
      </form>
    </div>
  );
}



================================================================================


======================= frontend\src\pages\Dashboard.jsx =======================
Full Path: C:\Users\USER\VSCODE\SUMMATIVES\Group_4_DevOps\frontend\src\pages\Dashboard.jsx
Size: 15265 bytes
Modified: 2025-11-30 22:14:55
Extension: .jsx
--------------------------------------------------------------------------------

import React, { useEffect, useState } from "react";
import { useAuthStore } from "../store/authStore";
import { fetchCourses, fetchEnrollments } from "../api/courseApi";
import { Link } from "react-router-dom";
import LoadingSpinner from "../components/LoadingSpinner";

export default function Dashboard() {
  const user = useAuthStore((s) => s.user);
  const [courses, setCourses] = useState([]);
  const [enrollments, setEnrollments] = useState([]);
  const [loading, setLoading] = useState(true);
  const [stats, setStats] = useState({
    enrolledCourses: 0,
    completedCourses: 0,
    inProgressCourses: 0,
    totalHours: 0,
  });

  useEffect(() => {
    (async () => {
      try {
        if (user?.role === "instructor") {
          // For instructors, fetch all courses and filter their own
          const coursesRes = await fetchCourses();
          const allCoursesData = coursesRes.data?.results || coursesRes.data || [];
          const allCourses = Array.isArray(allCoursesData) ? allCoursesData : [];
          const myCourses = allCourses.filter(
            (c) => {
              if (!c) return false;
              return (c.instructor && (c.instructor.id === user.id || c.instructor.username === user.username)) ||
                     c.instructor_username === user.username ||
                     c.instructor_id === user.id;
            }
          );
          setEnrollments(myCourses.map(c => ({ course: c, id: c.id })));
          setCourses(myCourses.slice(0, 3));
        } else {
          // For students, fetch enrollments
          const enrollmentsRes = await fetchEnrollments();
          const userEnrollments = Array.isArray(enrollmentsRes.data) 
            ? enrollmentsRes.data 
            : enrollmentsRes.data?.results || [];
          setEnrollments(userEnrollments);

          // Fetch courses for "continue learning" section
          const coursesRes = await fetchCourses();
          const coursesData = coursesRes.data?.results || coursesRes.data || [];
          const coursesArray = Array.isArray(coursesData) ? coursesData : [];
          setCourses(coursesArray.slice(0, 3));

          // Calculate stats from enrollments
          const completed = userEnrollments.filter(
            (e) => e.status === "completed"
          ).length;
          const inProgress = userEnrollments.filter(
            (e) => e.status === "active"
          ).length;
          const totalHours = userEnrollments.reduce((sum, e) => {
            return sum + (e.course?.duration_hours || 0);
          }, 0);

          setStats({
            enrolledCourses: userEnrollments.length,
            completedCourses: completed,
            inProgressCourses: inProgress,
            totalHours: Math.round(totalHours),
          });
        }
      } catch (e) {
        console.error("Failed to fetch dashboard data:", e);
        setStats({
          enrolledCourses: 0,
          completedCourses: 0,
          inProgressCourses: 0,
          totalHours: 0,
        });
      }
      setLoading(false);
    })();
  }, [user]);

  if (loading)
    return <LoadingSpinner size="large" text="Loading dashboard..." />;

  // Instructor dashboard
  if (user?.role === "instructor") {
    return (
      <div className="p-6 max-w-7xl mx-auto">
        <div className="mb-8">
          <h1 className="text-3xl font-bold text-gray-800">
            Welcome back, {user?.username || "Instructor"}!
          </h1>
          <p className="text-gray-600 mt-2">
            Manage your courses and students
          </p>
        </div>

        <div className="grid grid-cols-1 md:grid-cols-3 gap-6 mb-8">
          <div className="bg-white rounded-lg shadow p-6">
            <h3 className="text-lg font-semibold text-gray-800 mb-4">
              Quick Actions
            </h3>
            <div className="space-y-3">
              <Link
                to="/courses/create"
                className="block w-full px-4 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700 text-center"
              >
                Create New Course
              </Link>
              <Link
                to="/courses"
                className="block w-full px-4 py-2 bg-gray-200 text-gray-700 rounded-lg hover:bg-gray-300 text-center"
              >
                Browse All Courses
              </Link>
            </div>
          </div>

          <div className="bg-white rounded-lg shadow p-6 md:col-span-2">
            <h3 className="text-lg font-semibold text-gray-800 mb-4">
              My Courses
            </h3>
            {enrollments.length === 0 ? (
              <p className="text-gray-500">
                You haven't created any courses yet. Create your first course to get started!
              </p>
            ) : (
              <div className="space-y-3">
                {enrollments.map((enrollment) => {
                  if (!enrollment) return null;
                  const course = enrollment.course || enrollment;
                  if (!course || !course.id) return null;
                  
                  return (
                    <div
                      key={enrollment.id || course.id}
                      className="border rounded-lg p-4 hover:bg-gray-50"
                    >
                      <div className="flex justify-between items-center">
                        <div>
                          <h4 className="font-semibold text-gray-800">
                            {course.title || "Untitled Course"}
                          </h4>
                          <p className="text-sm text-gray-600">
                            {course.enrolled_students_count || 0} students enrolled
                            {course.status && ` • ${course.status}`}
                          </p>
                        </div>
                        <div className="flex gap-2">
                          <Link
                            to={`/courses/${course.id}`}
                            className="px-4 py-2 bg-gray-200 text-gray-700 rounded-lg hover:bg-gray-300 text-sm"
                          >
                            View
                          </Link>
                          <Link
                            to={`/courses/${course.id}/edit`}
                            className="px-4 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700 text-sm"
                          >
                            Edit
                          </Link>
                        </div>
                      </div>
                    </div>
                  );
                })}
              </div>
            )}
          </div>
        </div>
      </div>
    );
  }

  // Student dashboard
  return (
    <div className="p-6 max-w-7xl mx-auto">
      {/* Welcome Section */}
      <div className="mb-8">
        <h1 className="text-3xl font-bold text-gray-800">
          Welcome back, {user?.username || user?.first_name || "User"}!
        </h1>
        <p className="text-gray-600 mt-2">
          Here's what's happening with your learning journey
        </p>
      </div>

      {/* Statistics Cards */}
      <div className="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8">
        <div className="bg-linear-to-br from-blue-500 to-blue-600 rounded-lg shadow-lg p-6 text-white">
          <div className="flex items-center justify-between">
            <div>
              <p className="text-blue-100 text-sm font-medium">
                Enrolled Courses
              </p>
              <p className="text-3xl font-bold mt-2">{stats.enrolledCourses}</p>
            </div>
            <div className="bg-blue-400 bg-opacity-50 rounded-full p-3">
              <svg
                className="w-8 h-8"
                fill="none"
                stroke="currentColor"
                viewBox="0 0 24 24"
              >
                <path
                  strokeLinecap="round"
                  strokeLinejoin="round"
                  strokeWidth="2"
                  d="M12 6.253v13m0-13C10.832 5.477 9.246 5 7.5 5S4.168 5.477 3 6.253v13C4.168 18.477 5.754 18 7.5 18s3.332.477 4.5 1.253m0-13C13.168 5.477 14.754 5 16.5 5c1.747 0 3.332.477 4.5 1.253v13C19.832 18.477 18.247 18 16.5 18c-1.746 0-3.332.477-4.5 1.253"
                />
              </svg>
            </div>
          </div>
        </div>

        <div className="bg-linear-to-br from-green-500 to-green-600 rounded-lg shadow-lg p-6 text-white">
          <div className="flex items-center justify-between">
            <div>
              <p className="text-green-100 text-sm font-medium">Completed</p>
              <p className="text-3xl font-bold mt-2">
                {stats.completedCourses}
              </p>
            </div>
            <div className="bg-green-400 bg-opacity-50 rounded-full p-3">
              <svg
                className="w-8 h-8"
                fill="none"
                stroke="currentColor"
                viewBox="0 0 24 24"
              >
                <path
                  strokeLinecap="round"
                  strokeLinejoin="round"
                  strokeWidth="2"
                  d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"
                />
              </svg>
            </div>
          </div>
        </div>

        <div className="bg-linear-to-br from-yellow-500 to-yellow-600 rounded-lg shadow-lg p-6 text-white">
          <div className="flex items-center justify-between">
            <div>
              <p className="text-yellow-100 text-sm font-medium">In Progress</p>
              <p className="text-3xl font-bold mt-2">
                {stats.inProgressCourses}
              </p>
            </div>
            <div className="bg-yellow-400 bg-opacity-50 rounded-full p-3">
              <svg
                className="w-8 h-8"
                fill="none"
                stroke="currentColor"
                viewBox="0 0 24 24"
              >
                <path
                  strokeLinecap="round"
                  strokeLinejoin="round"
                  strokeWidth="2"
                  d="M13 10V3L4 14h7v7l9-11h-7z"
                />
              </svg>
            </div>
          </div>
        </div>

        <div className="bg-linear-to-br from-purple-500 to-purple-600 rounded-lg shadow-lg p-6 text-white">
          <div className="flex items-center justify-between">
            <div>
              <p className="text-purple-100 text-sm font-medium">
                Learning Hours
              </p>
              <p className="text-3xl font-bold mt-2">{stats.totalHours}</p>
            </div>
            <div className="bg-purple-400 bg-opacity-50 rounded-full p-3">
              <svg
                className="w-8 h-8"
                fill="none"
                stroke="currentColor"
                viewBox="0 0 24 24"
              >
                <path
                  strokeLinecap="round"
                  strokeLinejoin="round"
                  strokeWidth="2"
                  d="M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"
                />
              </svg>
            </div>
          </div>
        </div>
      </div>

      {/* Recent/Continue Learning Section */}
      <div className="bg-white rounded-lg shadow p-6 mb-6">
        <div className="flex justify-between items-center mb-4">
          <h2 className="text-xl font-semibold text-gray-800">
            Continue Learning
          </h2>
          <Link
            to="/courses"
            className="text-purple-600 hover:text-purple-700 text-sm font-medium"
          >
            View all courses →
          </Link>
        </div>

        {courses.length === 0 ? (
          <div className="text-center py-8">
            <p className="text-gray-500 mb-4">
              You haven't enrolled in any courses yet
            </p>
            <Link
              to="/courses"
              className="px-6 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700 inline-block"
            >
              Browse Courses
            </Link>
          </div>
        ) : (
          <div className="grid grid-cols-1 md:grid-cols-3 gap-4">
            {courses.map((course) => (
              <Link
                key={course.id}
                to={`/courses/${course.id}`}
                className="border rounded-lg p-4 hover:shadow-md transition-shadow"
              >
                <h3 className="font-semibold text-gray-800 mb-2">
                  {course.title}
                </h3>
                <p className="text-sm text-gray-600 mb-3 line-clamp-2">
                  {course.short_description || course.description}
                </p>
                {/* Progress bar */}
                <div className="w-full bg-gray-200 rounded-full h-2">
                  <div
                    className="bg-purple-600 h-2 rounded-full"
                    style={{ width: `${Math.random() * 100}%` }}
                  ></div>
                </div>
              </Link>
            ))}
          </div>
        )}
      </div>

      {/* Quick Actions */}
      <div className="bg-white rounded-lg shadow p-6">
        <h3 className="text-lg font-semibold text-gray-800 mb-4">
          Quick Actions
        </h3>
        <div className="space-y-3">
          <Link
            to="/courses"
            className="flex items-center p-3 hover:bg-gray-50 rounded-lg transition-colors"
          >
            <div className="bg-purple-100 rounded-lg p-2 mr-3">
              <svg
                className="w-5 h-5 text-purple-600"
                fill="none"
                stroke="currentColor"
                viewBox="0 0 24 24"
              >
                <path
                  strokeLinecap="round"
                  strokeLinejoin="round"
                  strokeWidth="2"
                  d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"
                />
              </svg>
            </div>
            <span className="text-gray-700">Browse All Courses</span>
          </Link>
          <Link
            to="/profile"
            className="flex items-center p-3 hover:bg-gray-50 rounded-lg transition-colors"
          >
            <div className="bg-green-100 rounded-lg p-2 mr-3">
              <svg
                className="w-5 h-5 text-green-600"
                fill="none"
                stroke="currentColor"
                viewBox="0 0 24 24"
              >
                <path
                  strokeLinecap="round"
                  strokeLinejoin="round"
                  strokeWidth="2"
                  d="M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"
                />
              </svg>
            </div>
            <span className="text-gray-700">Edit Profile</span>
          </Link>
        </div>
      </div>
    </div>
  );
}


================================================================================


========================= frontend\src\pages\Login.jsx =========================
Full Path: C:\Users\USER\VSCODE\SUMMATIVES\Group_4_DevOps\frontend\src\pages\Login.jsx
Size: 11854 bytes
Modified: 2025-11-30 22:14:55
Extension: .jsx
--------------------------------------------------------------------------------

import React, { useState } from "react";
import { useNavigate, Link } from "react-router-dom";
import { login, me } from "../api/authApi";
import { useAuthStore } from "../store/authStore";

export default function Login() {
  const [form, setForm] = useState({ email: "", password: "" });
  const [err, setErr] = useState(null);
  const [loading, setLoading] = useState(false);
  const setUser = useAuthStore((s) => s.setUser);
  const navigate = useNavigate();

  const submit = async (e) => {
    e.preventDefault();
    setErr(null);

    // Basic validation
    if (!form.email || !form.password) {
      setErr("Please fill in all fields");
      return;
    }

    // Email format validation
    const emailRegex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
    if (!emailRegex.test(form.email)) {
      setErr("Please enter a valid email address");
      return;
    }

    setLoading(true);
    try {
      // Clear any existing tokens before attempting new login
      localStorage.removeItem("access_token");
      localStorage.removeItem("refresh_token");
      
      // Send email and password to backend
      const res = await login({
        email: form.email,
        password: form.password,
      });
      const token = res.data.access || res.data.token || res.data.access_token;
      
      if (!token) {
        setErr("Login failed: No token received from server.");
        return;
      }
      
      localStorage.setItem("access_token", token);
      
      // Store refresh token if provided
      if (res.data.refresh) {
        localStorage.setItem("refresh_token", res.data.refresh);
      }
      
      // Use user data from login response if available, otherwise fetch it
      if (res.data.user && res.data.user.role) {
        setUser(res.data.user);
      } else {
        // Fallback: fetch user data
        try {
          const u = await me();
          setUser(u.data);
        } catch (e) {
          console.error("Failed to fetch user:", e);
          // If we can't fetch user, clear token and show error
          localStorage.removeItem("access_token");
          localStorage.removeItem("refresh_token");
          setErr("Login successful but failed to load user data. Please try again.");
          return;
        }
      }
      navigate("/dashboard");
    } catch (e) {
      // Clear tokens on error
      localStorage.removeItem("access_token");
      localStorage.removeItem("refresh_token");
      setErr(
        e.response?.data?.detail ||
          e.response?.data?.message ||
          "Login failed. Please check your credentials."
      );
    } finally {
      setLoading(false);
    }
  };

  return (
    <div className="min-h-screen flex">
      {/* Left Side - Login Form */}
      <div className="flex-1 flex items-center justify-center px-4 sm:px-6 lg:px-20 xl:px-24 bg-white">
        <div className="max-w-md w-full space-y-8">
          <div>
            <h2 className="text-4xl font-bold text-gray-900">
              Welcome back
            </h2>
            <p className="mt-3 text-gray-600">
              Sign in to continue to LearnHub
            </p>
          </div>

          <form onSubmit={submit} className="mt-8 space-y-6">
            <div className="space-y-5">
              <div>
                <label
                  htmlFor="email"
                  className="block text-sm font-medium text-gray-700 mb-2"
                >
                  Email Address
                </label>
                <input
                  id="email"
                  name="email"
                  type="email"
                  value={form.email}
                  onChange={(e) => setForm({ ...form, email: e.target.value })}
                  className="appearance-none block w-full px-4 py-3 border border-gray-300 rounded-lg text-gray-900 placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-purple-500 focus:border-transparent transition"
                  placeholder="Enter your email address"
                  autoComplete="email"
                />
              </div>

              <div>
                <label
                  htmlFor="password"
                  className="block text-sm font-medium text-gray-700 mb-2"
                >
                  Password
                </label>
                <input
                  id="password"
                  name="password"
                  type="password"
                  value={form.password}
                  onChange={(e) => setForm({ ...form, password: e.target.value })}
                  className="appearance-none block w-full px-4 py-3 border border-gray-300 rounded-lg text-gray-900 placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-purple-500 focus:border-transparent transition"
                  placeholder="Enter your password"
                />
              </div>
            </div>

            <div className="flex items-center justify-between">
              <div className="flex items-center">
                <input
                  id="remember-me"
                  name="remember-me"
                  type="checkbox"
                  className="h-4 w-4 text-purple-600 focus:ring-purple-500 border-gray-300 rounded"
                />
                <label htmlFor="remember-me" className="ml-2 block text-sm text-gray-700">
                  Remember me
                </label>
              </div>
              <div className="text-sm">
                <a href="#" className="font-medium text-purple-600 hover:text-purple-500">
                  Forgot password?
                </a>
              </div>
            </div>

            {err && (
              <div className="bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded-lg text-sm">
                {err}
              </div>
            )}

            <div>
              <button
                type="submit"
                disabled={loading}
                className="group relative w-full flex justify-center py-3 px-4 border border-transparent text-sm font-semibold rounded-lg text-white bg-linear-to-r from-purple-600 to-purple-700 hover:from-purple-700 hover:to-purple-800 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-purple-500 disabled:opacity-50 disabled:cursor-not-allowed transition-all shadow-lg hover:shadow-xl"
              >
                {loading ? (
                  <span className="flex items-center">
                    <svg
                      className="animate-spin -ml-1 mr-3 h-5 w-5 text-white"
                      xmlns="http://www.w3.org/2000/svg"
                      fill="none"
                      viewBox="0 0 24 24"
                    >
                      <circle
                        className="opacity-25"
                        cx="12"
                        cy="12"
                        r="10"
                        stroke="currentColor"
                        strokeWidth="4"
                      ></circle>
                      <path
                        className="opacity-75"
                        fill="currentColor"
                        d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"
                      ></path>
                    </svg>
                    Signing in...
                  </span>
                ) : (
                  "Sign in"
                )}
              </button>
            </div>

            <div className="text-center">
              <p className="text-sm text-gray-600">
                Don't have an account?{' '}
                <Link
                  to="/register"
                  className="font-medium text-purple-600 hover:text-purple-500"
                >
                  Sign up
                </Link>
              </p>
            </div>
          </form>
        </div>
      </div>

      {/* Right Side - Purple Gradient Background */}
      <div className="hidden lg:flex flex-1 bg-linear-to-br from-purple-400 via-purple-500 to-purple-600 items-center justify-center p-12 relative overflow-hidden">
        {/* Animated background shapes */}
        <div className="absolute top-0 left-0 w-full h-full opacity-20">
          <div className="absolute top-20 left-20 w-72 h-72 bg-white rounded-full mix-blend-overlay filter blur-xl animate-blob"></div>
          <div className="absolute top-40 right-20 w-72 h-72 bg-purple-300 rounded-full mix-blend-overlay filter blur-xl animate-blob animation-delay-2000"></div>
          <div className="absolute -bottom-8 left-40 w-72 h-72 bg-purple-200 rounded-full mix-blend-overlay filter blur-xl animate-blob animation-delay-4000"></div>
        </div>

        <div className="relative z-10 text-white max-w-md">
          <h1 className="text-5xl font-bold mb-6">LearnHub</h1>
          <p className="text-xl mb-8 text-purple-100">
            Unlock your potential with our comprehensive learning platform
          </p>
          <div className="space-y-4">
            <div className="flex items-center">
              <div className="bg-white bg-opacity-20 rounded-lg p-3 mr-4">
                <svg className="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                  <path strokeLinecap="round" strokeLinejoin="round" strokeWidth="2" d="M12 6.253v13m0-13C10.832 5.477 9.246 5 7.5 5S4.168 5.477 3 6.253v13C4.168 18.477 5.754 18 7.5 18s3.332.477 4.5 1.253m0-13C13.168 5.477 14.754 5 16.5 5c1.747 0 3.332.477 4.5 1.253v13C19.832 18.477 18.247 18 16.5 18c-1.746 0-3.332.477-4.5 1.253" />
                </svg>
              </div>
              <div>
                <h3 className="font-semibold text-lg">1000+ Courses</h3>
                <p className="text-purple-100 text-sm">Learn from industry experts</p>
              </div>
            </div>
            <div className="flex items-center">
              <div className="bg-white bg-opacity-20 rounded-lg p-3 mr-4">
                <svg className="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                  <path strokeLinecap="round" strokeLinejoin="round" strokeWidth="2" d="M12 4.354a4 4 0 110 5.292M15 21H3v-1a6 6 0 0112 0v1zm0 0h6v-1a6 6 0 00-9-5.197M13 7a4 4 0 11-8 0 4 4 0 018 0z" />
                </svg>
              </div>
              <div>
                <h3 className="font-semibold text-lg">50,000+ Students</h3>
                <p className="text-purple-100 text-sm">Join our learning community</p>
              </div>
            </div>
            <div className="flex items-center">
              <div className="bg-white bg-opacity-20 rounded-lg p-3 mr-4">
                <svg className="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                  <path strokeLinecap="round" strokeLinejoin="round" strokeWidth="2" d="M9 12l2 2 4-4M7.835 4.697a3.42 3.42 0 001.946-.806 3.42 3.42 0 014.438 0 3.42 3.42 0 001.946.806 3.42 3.42 0 013.138 3.138 3.42 3.42 0 00.806 1.946 3.42 3.42 0 010 4.438 3.42 3.42 0 00-.806 1.946 3.42 3.42 0 01-3.138 3.138 3.42 3.42 0 00-1.946.806 3.42 3.42 0 01-4.438 0 3.42 3.42 0 00-1.946-.806 3.42 3.42 0 01-3.138-3.138 3.42 3.42 0 00-.806-1.946 3.42 3.42 0 010-4.438 3.42 3.42 0 00.806-1.946 3.42 3.42 0 013.138-3.138z" />
                </svg>
              </div>
              <div>
                <h3 className="font-semibold text-lg">Certified Learning</h3>
                <p className="text-purple-100 text-sm">Get recognized certificates</p>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  );
}

================================================================================


======================== frontend\src\pages\Profile.jsx ========================
Full Path: C:\Users\USER\VSCODE\SUMMATIVES\Group_4_DevOps\frontend\src\pages\Profile.jsx
Size: 23125 bytes
Modified: 2025-11-30 22:14:55
Extension: .jsx
--------------------------------------------------------------------------------

import React, { useState, useEffect } from "react";
import { useAuthStore } from "../store/authStore";
import { fetchProfile, updateProfile, updateUser, me } from "../api/authApi";
import LoadingSpinner from "../components/LoadingSpinner";
import useToast from "../hooks/useToast";

export default function Profile() {
  const user = useAuthStore((s) => s.user);
  const setUser = useAuthStore((s) => s.setUser);
  const { showToast } = useToast();
  const [isEditing, setIsEditing] = useState(false);
  const [loading, setLoading] = useState(true);
  const [saving, setSaving] = useState(false);
  const [profile, setProfile] = useState(null);
  const [formData, setFormData] = useState({
    // User fields
    username: "",
    email: "",
    phone_number: "",
    country: "",
    city: "",
    // Profile fields
    bio: "",
    expertise: "",
    credentials: "",
    profile_picture: "",
    linkedin_url: "",
    github_url: "",
    website: "",
  });
  const [message, setMessage] = useState("");

  useEffect(() => {
    if (user) {
      loadProfile();
    }
    // eslint-disable-next-line react-hooks/exhaustive-deps
  }, [user]);

  const loadProfile = async () => {
    try {
      // Load user data
      const userData = user || (await me()).data;
      
      // Load profile data
      const profileRes = await fetchProfile();
      setProfile(profileRes.data);
      
      // Set form data with both user and profile fields
      setFormData({
        // User fields
        username: userData.username || "",
        email: userData.email || "",
        phone_number: userData.phone_number || "",
        country: userData.country || "",
        city: userData.city || "",
        // Profile fields
        bio: profileRes.data.bio || "",
        expertise: profileRes.data.expertise || "",
        credentials: profileRes.data.credentials || "",
        profile_picture: profileRes.data.profile_picture || "",
        linkedin_url: profileRes.data.linkedin_url || "",
        github_url: profileRes.data.github_url || "",
        website: profileRes.data.website || "",
      });
    } catch (e) {
      console.error("Failed to fetch profile:", e);
      showToast("Failed to load profile data", "error");
    } finally {
      setLoading(false);
    }
  };

  const handleSubmit = async (e) => {
    e.preventDefault();
    setSaving(true);
    setMessage("");
    
    try {
      // Separate user and profile data
      const userData = {
        username: formData.username,
        email: formData.email,
        phone_number: formData.phone_number,
        country: formData.country,
        city: formData.city,
      };
      
      const profileData = {
        bio: formData.bio,
        expertise: formData.expertise,
        credentials: formData.credentials,
        profile_picture: formData.profile_picture,
        linkedin_url: formData.linkedin_url,
        github_url: formData.github_url,
        website: formData.website,
      };
      
      // Update both user and profile
      const [userRes, profileRes] = await Promise.all([
        updateUser(userData),
        updateProfile(profileData),
      ]);
      
      // Update user in store
      setUser(userRes.data);
      
      showToast("Profile updated successfully!", "success");
      setIsEditing(false);
      await loadProfile(); // Reload profile data
    } catch (err) {
      console.error("Profile update error:", err);
      const errorMsg = err.response?.data?.detail || 
                      Object.values(err.response?.data || {}).flat().join(", ") ||
                      "Failed to update profile";
      showToast(errorMsg, "error");
    } finally {
      setSaving(false);
    }
  };

  const handleCancel = () => {
    // Reset form data to original values
    setFormData({
      username: user?.username || "",
      email: user?.email || "",
      phone_number: user?.phone_number || "",
      country: user?.country || "",
      city: user?.city || "",
      bio: profile?.bio || "",
      expertise: profile?.expertise || "",
      credentials: profile?.credentials || "",
      profile_picture: profile?.profile_picture || "",
      linkedin_url: profile?.linkedin_url || "",
      github_url: profile?.github_url || "",
      website: profile?.website || "",
    });
    setIsEditing(false);
    setMessage("");
  };

  if (loading) return <LoadingSpinner size="large" text="Loading profile..." />;

  return (
    <div className="p-6 max-w-4xl mx-auto">
      <div className="bg-white rounded-lg shadow">
        {/* Header */}
        <div className="bg-linear-to-r from-purple-500 to-purple-600 h-32 rounded-t-lg"></div>

        {/* Profile Content */}
        <div className="px-6 pb-6">
          {/* Avatar and Basic Info */}
          <div className="flex items-center -mt-16 mb-6">
            <div className="w-32 h-32 rounded-full border-4 border-white bg-gray-300 flex items-center justify-center text-4xl font-bold text-white shadow-lg">
              {(user?.username || "U")[0].toUpperCase()}
            </div>
            <div className="ml-6 mt-16">
              <h1 className="text-2xl font-bold text-gray-800">
                {user?.first_name && user?.last_name
                  ? `${user.first_name} ${user.last_name}`
                  : user?.username || "User"}
              </h1>
              <p className="text-gray-600">{user?.email}</p>
            </div>
            {!isEditing && (
              <button
                onClick={() => setIsEditing(true)}
                className="ml-auto mt-16 px-4 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700 transition-colors"
              >
                Edit Profile
              </button>
            )}
          </div>

          {/* Success Message */}
          {message && (
            <div className="mb-4 p-3 bg-green-100 text-green-700 rounded-lg">
              {message}
            </div>
          )}

          {/* Profile Form */}
          {isEditing ? (
            <form onSubmit={handleSubmit} className="space-y-6">
              {/* User Information Section */}
              <div>
                <h3 className="text-lg font-semibold text-gray-800 mb-4">
                  Account Information
                </h3>
                <div className="grid grid-cols-1 md:grid-cols-2 gap-4">
                  <div>
                    <label className="block text-sm font-medium text-gray-700 mb-1">
                      Username *
                    </label>
                    <input
                      type="text"
                      value={formData.username}
                      onChange={(e) =>
                        setFormData({ ...formData, username: e.target.value })
                      }
                      required
                      className="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent"
                    />
                  </div>

                  <div>
                    <label className="block text-sm font-medium text-gray-700 mb-1">
                      Email *
                    </label>
                    <input
                      type="email"
                      value={formData.email}
                      onChange={(e) =>
                        setFormData({ ...formData, email: e.target.value })
                      }
                      required
                      className="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent"
                    />
                  </div>

                  <div>
                    <label className="block text-sm font-medium text-gray-700 mb-1">
                      Phone Number
                    </label>
                    <input
                      type="tel"
                      value={formData.phone_number}
                      onChange={(e) =>
                        setFormData({ ...formData, phone_number: e.target.value })
                      }
                      className="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent"
                      placeholder="+1234567890"
                    />
                  </div>

                  <div>
                    <label className="block text-sm font-medium text-gray-700 mb-1">
                      Country
                    </label>
                    <input
                      type="text"
                      value={formData.country}
                      onChange={(e) =>
                        setFormData({ ...formData, country: e.target.value })
                      }
                      className="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent"
                      placeholder="e.g., Nigeria"
                    />
                  </div>

                  <div>
                    <label className="block text-sm font-medium text-gray-700 mb-1">
                      City
                    </label>
                    <input
                      type="text"
                      value={formData.city}
                      onChange={(e) =>
                        setFormData({ ...formData, city: e.target.value })
                      }
                      className="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent"
                      placeholder="e.g., Lagos"
                    />
                  </div>
                </div>
              </div>

              {/* Profile Information Section */}
              <div className="border-t pt-6">
                <h3 className="text-lg font-semibold text-gray-800 mb-4">
                  Profile Information
                </h3>
                <div className="space-y-4">
                  <div>
                    <label className="block text-sm font-medium text-gray-700 mb-1">
                      Bio
                    </label>
                    <textarea
                      value={formData.bio}
                      onChange={(e) =>
                        setFormData({ ...formData, bio: e.target.value })
                      }
                      rows="4"
                      className="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent"
                      placeholder="Tell us about yourself..."
                    ></textarea>
                  </div>

                  <div>
                    <label className="block text-sm font-medium text-gray-700 mb-1">
                      Expertise
                    </label>
                    <input
                      type="text"
                      value={formData.expertise}
                      onChange={(e) =>
                        setFormData({ ...formData, expertise: e.target.value })
                      }
                      className="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent"
                      placeholder="e.g., Web Development, Data Science"
                    />
                  </div>

                  <div>
                    <label className="block text-sm font-medium text-gray-700 mb-1">
                      Credentials
                    </label>
                    <input
                      type="text"
                      value={formData.credentials}
                      onChange={(e) =>
                        setFormData({ ...formData, credentials: e.target.value })
                      }
                      className="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent"
                      placeholder="e.g., BSc Computer Science, AWS Certified"
                    />
                  </div>

                  <div>
                    <label className="block text-sm font-medium text-gray-700 mb-1">
                      Profile Picture URL
                    </label>
                    <input
                      type="url"
                      value={formData.profile_picture}
                      onChange={(e) =>
                        setFormData({ ...formData, profile_picture: e.target.value })
                      }
                      className="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent"
                      placeholder="https://example.com/profile.jpg"
                    />
                  </div>

                  <div className="grid grid-cols-1 md:grid-cols-3 gap-4">
                    <div>
                      <label className="block text-sm font-medium text-gray-700 mb-1">
                        LinkedIn URL
                      </label>
                      <input
                        type="url"
                        value={formData.linkedin_url}
                        onChange={(e) =>
                          setFormData({ ...formData, linkedin_url: e.target.value })
                        }
                        className="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent"
                        placeholder="https://linkedin.com/in/..."
                      />
                    </div>

                    <div>
                      <label className="block text-sm font-medium text-gray-700 mb-1">
                        GitHub URL
                      </label>
                      <input
                        type="url"
                        value={formData.github_url}
                        onChange={(e) =>
                          setFormData({ ...formData, github_url: e.target.value })
                        }
                        className="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent"
                        placeholder="https://github.com/..."
                      />
                    </div>

                    <div>
                      <label className="block text-sm font-medium text-gray-700 mb-1">
                        Website URL
                      </label>
                      <input
                        type="url"
                        value={formData.website}
                        onChange={(e) =>
                          setFormData({ ...formData, website: e.target.value })
                        }
                        className="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent"
                        placeholder="https://example.com"
                      />
                    </div>
                  </div>
                </div>
              </div>

              <div className="flex gap-3 pt-4 border-t">
                <button
                  type="submit"
                  disabled={saving}
                  className="px-6 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed"
                >
                  {saving ? "Saving..." : "Save Changes"}
                </button>
                <button
                  type="button"
                  onClick={handleCancel}
                  disabled={saving}
                  className="px-6 py-2 bg-gray-200 text-gray-700 rounded-lg hover:bg-gray-300 transition-colors disabled:opacity-50"
                >
                  Cancel
                </button>
              </div>
            </form>
          ) : (
            <div className="space-y-6">
              {/* Profile Information Display */}
              <div>
                <h2 className="text-lg font-semibold text-gray-800 mb-4">
                  Profile Information
                </h2>
                <div className="grid grid-cols-1 md:grid-cols-2 gap-4">
                  <div>
                    <p className="text-sm text-gray-500">Username</p>
                    <p className="text-gray-800 font-medium">
                      {user?.username || "Not set"}
                    </p>
                  </div>
                  <div>
                    <p className="text-sm text-gray-500">Email</p>
                    <p className="text-gray-800 font-medium">
                      {user?.email || "Not set"}
                    </p>
                  </div>
                  <div>
                    <p className="text-sm text-gray-500">Phone Number</p>
                    <p className="text-gray-800 font-medium">
                      {user?.phone_number || "Not set"}
                    </p>
                  </div>
                  <div>
                    <p className="text-sm text-gray-500">Country</p>
                    <p className="text-gray-800 font-medium">
                      {user?.country || "Not set"}
                    </p>
                  </div>
                  <div>
                    <p className="text-sm text-gray-500">City</p>
                    <p className="text-gray-800 font-medium">
                      {user?.city || "Not set"}
                    </p>
                  </div>
                  <div>
                    <p className="text-sm text-gray-500">Role</p>
                    <p className="text-gray-800 font-medium capitalize">
                      {user?.role || "student"}
                    </p>
                  </div>
                  {profile?.expertise && (
                    <div>
                      <p className="text-sm text-gray-500">Expertise</p>
                      <p className="text-gray-800 font-medium">
                        {profile.expertise}
                      </p>
                    </div>
                  )}
                  {profile?.credentials && (
                    <div className="md:col-span-2">
                      <p className="text-sm text-gray-500">Credentials</p>
                      <p className="text-gray-800 font-medium">
                        {profile.credentials}
                      </p>
                    </div>
                  )}
                  {(profile?.linkedin_url || profile?.github_url || profile?.website) && (
                    <div className="md:col-span-2">
                      <p className="text-sm text-gray-500 mb-2">Social Links</p>
                      <div className="flex flex-wrap gap-2">
                        {profile.linkedin_url && (
                          <a
                            href={profile.linkedin_url}
                            target="_blank"
                            rel="noopener noreferrer"
                            className="text-blue-600 hover:text-blue-700 text-sm"
                          >
                            LinkedIn
                          </a>
                        )}
                        {profile.github_url && (
                          <a
                            href={profile.github_url}
                            target="_blank"
                            rel="noopener noreferrer"
                            className="text-gray-600 hover:text-gray-700 text-sm"
                          >
                            GitHub
                          </a>
                        )}
                        {profile.website && (
                          <a
                            href={profile.website}
                            target="_blank"
                            rel="noopener noreferrer"
                            className="text-purple-600 hover:text-purple-700 text-sm"
                          >
                            Website
                          </a>
                        )}
                      </div>
                    </div>
                  )}
                </div>
                {profile?.bio && (
                  <div className="mt-4">
                    <p className="text-sm text-gray-500">Bio</p>
                    <p className="text-gray-800">{profile.bio}</p>
                  </div>
                )}
              </div>

              {/* Account Details */}
              <div className="border-t pt-6">
                <h2 className="text-lg font-semibold text-gray-800 mb-4">
                  Account Details
                </h2>
                <div className="space-y-2">
                  <div className="flex justify-between">
                    <span className="text-gray-600">Member since</span>
                    <span className="text-gray-800 font-medium">
                      {(() => {
                        // Try date_joined first (from AbstractUser), then created_at (from custom User model)
                        const joinDate = user?.date_joined || user?.created_at;
                        if (!joinDate) return "N/A";
                        
                        try {
                          const date = new Date(joinDate);
                          // Check if date is valid
                          if (isNaN(date.getTime())) {
                            // If invalid, try to extract year from string
                            const yearMatch = joinDate.toString().match(/\d{4}/);
                            return yearMatch ? yearMatch[0] : "N/A";
                          }
                          // Format: "Month Day, Year" (e.g., "January 15, 2024")
                          // This always includes the year
                          return date.toLocaleDateString('en-US', {
                            year: 'numeric',
                            month: 'long',
                            day: 'numeric'
                          });
                        } catch (e) {
                          // Fallback: try to extract year from the date string
                          const yearMatch = joinDate.toString().match(/\d{4}/);
                          return yearMatch ? yearMatch[0] : "N/A";
                        }
                      })()}
                    </span>
                  </div>
                  <div className="flex justify-between">
                    <span className="text-gray-600">Account Status</span>
                    <span className="text-green-600 font-medium">Active</span>
                  </div>
                </div>
              </div>
            </div>
          )}
        </div>
      </div>
    </div>
  );
}

================================================================================


======================= frontend\src\pages\Register.jsx =======================
Full Path: C:\Users\USER\VSCODE\SUMMATIVES\Group_4_DevOps\frontend\src\pages\Register.jsx
Size: 17895 bytes
Modified: 2025-11-30 22:14:55
Extension: .jsx
--------------------------------------------------------------------------------

import React, { useState } from "react";
import { register, me } from "../api/authApi";
import { useNavigate, Link } from "react-router-dom";
import { useAuthStore } from "../store/authStore";

export default function Register() {
  const [form, setForm] = useState({
    username: "",
    email: "",
    password: "",
    confirmPassword: "",
    role: "student",
    phone_number: "",
    country: "",
    city: "",
  });
  const [err, setErr] = useState(null);
  const [loading, setLoading] = useState(false);
  const navigate = useNavigate();
  const setUser = useAuthStore((s) => s.setUser);

  const submit = async (e) => {
    e.preventDefault();
    setErr(null);

    // Validation
    if (
      !form.username ||
      !form.email ||
      !form.password ||
      !form.confirmPassword ||
      !form.phone_number ||
      !form.country ||
      !form.city
    ) {
      setErr("Please fill in all required fields");
      return;
    }

    if (form.password !== form.confirmPassword) {
      setErr("Passwords do not match");
      return;
    }

    if (form.password.length < 8) {
      setErr("Password must be at least 8 characters long");
      return;
    }

    setLoading(true);
    try {
      const res = await register({
        username: form.username,
        email: form.email,
        password: form.password,
        role: form.role,
        phone_number: form.phone_number,
        country: form.country,
        city: form.city,
      });
      
      // Handle tokens if provided (auto-login after registration)
      if (res.data.tokens) {
        const token = res.data.tokens.access || res.data.tokens.access_token;
        if (token) {
          localStorage.setItem("access_token", token);
          
          // Use user data from registration response if available (includes role)
          if (res.data.user && res.data.user.role) {
            setUser(res.data.user);
            navigate("/dashboard");
          } else {
            // Fallback: Fetch user data
            try {
              const u = await me();
              setUser(u.data);
              navigate("/dashboard");
            } catch (e) {
              console.error("Failed to fetch user after registration:", e);
              navigate("/login");
            }
          }
        } else {
          navigate("/login");
        }
      } else {
        navigate("/login");
      }
    } catch (e) {
      // Handle validation errors from backend
      console.error("Full registration error:", e);
      console.error("Error response:", e.response);
      console.error("Error response data:", e.response?.data);
      console.error("Error response status:", e.response?.status);
      
      const errorData = e.response?.data;
      
      // Network error (no response)
      if (!e.response) {
        setErr("Network error: Could not connect to server. Please check if the backend is running.");
        return;
      }
      
      if (errorData) {
        // Check for field-specific errors (DRF format: {field: ["error message"]})
        const fieldErrors = Object.keys(errorData)
          .filter(key => {
            const value = errorData[key];
            return (Array.isArray(value) && value.length > 0) || 
                   (typeof value === 'string' && value.length > 0);
          })
          .map(key => {
            const value = errorData[key];
            if (Array.isArray(value)) {
              return `${key}: ${value[0]}`;
            } else if (typeof value === 'string') {
              return `${key}: ${value}`;
            }
            return `${key}: ${JSON.stringify(value)}`;
          })
          .join(', ');
        
        if (fieldErrors) {
          setErr(fieldErrors);
        } else if (errorData.detail) {
          setErr(errorData.detail);
        } else if (typeof errorData === 'string') {
          setErr(errorData);
        } else {
          // Try to extract any error message
          const errorMessage = JSON.stringify(errorData, null, 2);
          setErr(errorMessage.length > 300 ? "Registration failed. Please check all fields. See console for details." : errorMessage);
        }
      } else {
        // No error data but got a response
        setErr(`Registration failed with status ${e.response.status}. Please check the console for details.`);
      }
    } finally {
      setLoading(false);
    }
  };

  return (
    <div className="min-h-screen flex">
      {/* Left Side - Register Form */}
      <div className="flex-1 flex items-center justify-center px-4 sm:px-6 lg:px-20 xl:px-24 bg-white">
        <div className="max-w-md w-full space-y-8">
          <div>
            <h2 className="text-4xl font-bold text-gray-900">
              Create your account
            </h2>
            <p className="mt-3 text-gray-600">
              Join LearnHub and start your learning journey
            </p>
          </div>

          <form onSubmit={submit} className="mt-8 space-y-6">
            <div className="space-y-5">
              <div>
                <label
                  htmlFor="username"
                  className="block text-sm font-medium text-gray-700 mb-2"
                >
                  Username
                </label>
                <input
                  id="username"
                  name="username"
                  type="text"
                  value={form.username}
                  onChange={(e) => setForm({ ...form, username: e.target.value })}
                  className="appearance-none block w-full px-4 py-3 border border-gray-300 rounded-lg text-gray-900 placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-purple-500 focus:border-transparent transition"
                  placeholder="Choose a username"
                />
              </div>

              <div>
                <label
                  htmlFor="email"
                  className="block text-sm font-medium text-gray-700 mb-2"
                >
                  Email address
                </label>
                <input
                  id="email"
                  name="email"
                  type="email"
                  value={form.email}
                  onChange={(e) => setForm({ ...form, email: e.target.value })}
                  className="appearance-none block w-full px-4 py-3 border border-gray-300 rounded-lg text-gray-900 placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-purple-500 focus:border-transparent transition"
                  placeholder="Enter your email"
                />
              </div>

              <div>
                <label
                  htmlFor="password"
                  className="block text-sm font-medium text-gray-700 mb-2"
                >
                  Password
                </label>
                <input
                  id="password"
                  name="password"
                  type="password"
                  value={form.password}
                  onChange={(e) => setForm({ ...form, password: e.target.value })}
                  className="appearance-none block w-full px-4 py-3 border border-gray-300 rounded-lg text-gray-900 placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-purple-500 focus:border-transparent transition"
                  placeholder="Create a password"
                />
                <p className="mt-2 text-xs text-gray-500">
                  Must be at least 8 characters
                </p>
              </div>

              <div>
                <label
                  htmlFor="confirmPassword"
                  className="block text-sm font-medium text-gray-700 mb-2"
                >
                  Confirm Password
                </label>
                <input
                  id="confirmPassword"
                  name="confirmPassword"
                  type="password"
                  value={form.confirmPassword}
                  onChange={(e) =>
                    setForm({ ...form, confirmPassword: e.target.value })
                  }
                  className="appearance-none block w-full px-4 py-3 border border-gray-300 rounded-lg text-gray-900 placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-purple-500 focus:border-transparent transition"
                  placeholder="Confirm your password"
                />
              </div>

              <div>
                <label
                  htmlFor="role"
                  className="block text-sm font-medium text-gray-700 mb-2"
                >
                  I want to join as
                </label>
                <select
                  id="role"
                  name="role"
                  value={form.role}
                  onChange={(e) => setForm({ ...form, role: e.target.value })}
                  className="appearance-none block w-full px-4 py-3 border border-gray-300 rounded-lg text-gray-900 focus:outline-none focus:ring-2 focus:ring-purple-500 focus:border-transparent transition"
                >
                  <option value="student">Student</option>
                  <option value="instructor">Instructor</option>
                </select>
              </div>

              <div>
                <label
                  htmlFor="phone_number"
                  className="block text-sm font-medium text-gray-700 mb-2"
                >
                  Phone Number *
                </label>
                <input
                  id="phone_number"
                  name="phone_number"
                  type="tel"
                  value={form.phone_number}
                  onChange={(e) =>
                    setForm({ ...form, phone_number: e.target.value })
                  }
                  className="appearance-none block w-full px-4 py-3 border border-gray-300 rounded-lg text-gray-900 placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-purple-500 focus:border-transparent transition"
                  placeholder="+1234567890"
                  required
                />
              </div>

              <div className="grid grid-cols-2 gap-4">
                <div>
                  <label
                    htmlFor="country"
                    className="block text-sm font-medium text-gray-700 mb-2"
                  >
                    Country *
                  </label>
                  <input
                    id="country"
                    name="country"
                    type="text"
                    value={form.country}
                    onChange={(e) =>
                      setForm({ ...form, country: e.target.value })
                    }
                    className="appearance-none block w-full px-4 py-3 border border-gray-300 rounded-lg text-gray-900 placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-purple-500 focus:border-transparent transition"
                    placeholder="e.g., Nigeria"
                    required
                  />
                </div>

                <div>
                  <label
                    htmlFor="city"
                    className="block text-sm font-medium text-gray-700 mb-2"
                  >
                    City *
                  </label>
                  <input
                    id="city"
                    name="city"
                    type="text"
                    value={form.city}
                    onChange={(e) =>
                      setForm({ ...form, city: e.target.value })
                    }
                    className="appearance-none block w-full px-4 py-3 border border-gray-300 rounded-lg text-gray-900 placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-purple-500 focus:border-transparent transition"
                    placeholder="e.g., Lagos"
                    required
                  />
                </div>
              </div>
            </div>

            {err && (
              <div className="bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded-lg text-sm">
                {err}
              </div>
            )}

            <div>
              <button
                type="submit"
                disabled={loading}
                className="group relative w-full flex justify-center py-3 px-4 border border-transparent text-sm font-semibold rounded-lg text-white bg-linear-to-r from-purple-600 to-purple-700 hover:from-purple-700 hover:to-purple-800 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-purple-500 disabled:opacity-50 disabled:cursor-not-allowed transition-all shadow-lg hover:shadow-xl"
              >
                {loading ? (
                  <span className="flex items-center">
                    <svg
                      className="animate-spin -ml-1 mr-3 h-5 w-5 text-white"
                      xmlns="http://www.w3.org/2000/svg"
                      fill="none"
                      viewBox="0 0 24 24"
                    >
                      <circle
                        className="opacity-25"
                        cx="12"
                        cy="12"
                        r="10"
                        stroke="currentColor"
                        strokeWidth="4"
                      ></circle>
                      <path
                        className="opacity-75"
                        fill="currentColor"
                        d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"
                      ></path>
                    </svg>
                    Creating account...
                  </span>
                ) : (
                  "Create account"
                )}
              </button>
            </div>

            <div className="text-center">
              <p className="text-sm text-gray-600">
                Already have an account?{' '}
                <Link
                  to="/login"
                  className="font-medium text-purple-600 hover:text-purple-500"
                >
                  Sign in
                </Link>
              </p>
            </div>
          </form>
        </div>
      </div>

      {/* Right Side - Purple Gradient Background */}
      <div className="hidden lg:flex flex-1 bg-linear-to-br from-purple-400 via-purple-500 to-purple-600 items-center justify-center p-12 relative overflow-hidden">
        {/* Animated background shapes */}
        <div className="absolute top-0 left-0 w-full h-full opacity-20">
          <div className="absolute top-20 left-20 w-72 h-72 bg-white rounded-full mix-blend-overlay filter blur-xl animate-blob"></div>
          <div className="absolute top-40 right-20 w-72 h-72 bg-purple-300 rounded-full mix-blend-overlay filter blur-xl animate-blob animation-delay-2000"></div>
          <div className="absolute -bottom-8 left-40 w-72 h-72 bg-purple-200 rounded-full mix-blend-overlay filter blur-xl animate-blob animation-delay-4000"></div>
        </div>

        <div className="relative z-10 text-white max-w-md">
          <h1 className="text-5xl font-bold mb-6">Join LearnHub</h1>
          <p className="text-xl mb-8 text-purple-100">
            Start your learning journey today and join thousands of successful students
          </p>
          <div className="space-y-4">
            <div className="flex items-center">
              <div className="bg-white bg-opacity-20 rounded-lg p-3 mr-4">
                <svg className="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                  <path strokeLinecap="round" strokeLinejoin="round" strokeWidth="2" d="M13 10V3L4 14h7v7l9-11h-7z" />
                </svg>
              </div>
              <div>
                <h3 className="font-semibold text-lg">Quick Setup</h3>
                <p className="text-purple-100 text-sm">Get started in under 2 minutes</p>
              </div>
            </div>
            <div className="flex items-center">
              <div className="bg-white bg-opacity-20 rounded-lg p-3 mr-4">
                <svg className="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                  <path strokeLinecap="round" strokeLinejoin="round" strokeWidth="2" d="M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z" />
                </svg>
              </div>
              <div>
                <h3 className="font-semibold text-lg">Secure & Private</h3>
                <p className="text-purple-100 text-sm">Your data is protected</p>
              </div>
            </div>
            <div className="flex items-center">
              <div className="bg-white bg-opacity-20 rounded-lg p-3 mr-4">
                <svg className="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                  <path strokeLinecap="round" strokeLinejoin="round" strokeWidth="2" d="M14 10h4.764a2 2 0 011.789 2.894l-3.5 7A2 2 0 0115.263 21h-4.017c-.163 0-.326-.02-.485-.06L7 20m7-10V5a2 2 0 00-2-2h-.095c-.5 0-.905.405-.905.905 0 .714-.211 1.412-.608 2.006L7 11v9m7-10h-2M7 20H5a2 2 0 01-2-2v-6a2 2 0 012-2h2.5" />
                </svg>
              </div>
              <div>
                <h3 className="font-semibold text-lg">Free to Start</h3>
                <p className="text-purple-100 text-sm">No credit card required</p>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  );
}


================================================================================


======================= frontend\src\store\authStore.ts =======================
Full Path: C:\Users\USER\VSCODE\SUMMATIVES\Group_4_DevOps\frontend\src\store\authStore.ts
Size: 308 bytes
Modified: 2025-11-30 22:14:55
Extension: .ts
--------------------------------------------------------------------------------

import { create } from "zustand";

export const useAuthStore = create((set) => ({
  user: null,
  loading: false,
  setUser: (u) => set({ user: u }),
  logout: () => {
    localStorage.removeItem("access_token");
    localStorage.removeItem("refresh_token");
    set({ user: null });
  },
}));



================================================================================


======================= frontend\src\store\toastStore.ts =======================
Full Path: C:\Users\USER\VSCODE\SUMMATIVES\Group_4_DevOps\frontend\src\store\toastStore.ts
Size: 795 bytes
Modified: 2025-11-30 22:14:55
Extension: .ts
--------------------------------------------------------------------------------

import { create } from "zustand";

interface Toast {
  id: number;
  message: string;
  type: "success" | "error" | "info" | "warning";
}

interface ToastStore {
  toasts: Toast[];
  showToast: (message: string, type?: Toast["type"]) => void;
  removeToast: (id: number) => void;
}

export const useToastStore = create<ToastStore>((set) => ({
  toasts: [],
  showToast: (message, type = "info") => {
    const id = Date.now();
    set((state) => ({ toasts: [...state.toasts, { id, message, type }] }));
    
    // Auto-remove after 3 seconds
    setTimeout(() => {
      set((state) => ({ toasts: state.toasts.filter((t) => t.id !== id) }));
    }, 3000);
  },
  removeToast: (id) =>
    set((state) => ({ toasts: state.toasts.filter((t) => t.id !== id) })),
}));



================================================================================


========================== frontend\src\vite-env.d.ts ==========================
Full Path: C:\Users\USER\VSCODE\SUMMATIVES\Group_4_DevOps\frontend\src\vite-env.d.ts
Size: 232 bytes
Modified: 2025-11-30 22:14:55
Extension: .ts
--------------------------------------------------------------------------------

  /// <reference types="vite/client" />

  interface ImportMetaEnv {
    readonly VITE_API_BASE_URL: string
    // Add other env variables here as needed
  }

  interface ImportMeta {
    readonly env: ImportMetaEnv
  }



================================================================================


========================= frontend\tailwind.config.js =========================
Full Path: C:\Users\USER\VSCODE\SUMMATIVES\Group_4_DevOps\frontend\tailwind.config.js
Size: 178 bytes
Modified: 2025-11-30 22:03:59
Extension: .js
--------------------------------------------------------------------------------

/** @type {import('tailwindcss').Config} */
export default {
  content: ["./index.html", "./src/**/*.{js,ts,jsx,tsx}"],
  theme: {
    extend: {},
  },
  plugins: [],
};


================================================================================


========================== frontend\tsconfig.app.json ==========================
Full Path: C:\Users\USER\VSCODE\SUMMATIVES\Group_4_DevOps\frontend\tsconfig.app.json
Size: 760 bytes
Modified: 2025-11-30 22:03:59
Extension: .json
--------------------------------------------------------------------------------

{
  "compilerOptions": {
    "tsBuildInfoFile": "./node_modules/.tmp/tsconfig.app.tsbuildinfo",
    "target": "ES2022",
    "useDefineForClassFields": true,
    "lib": ["ES2022", "DOM", "DOM.Iterable"],
    "module": "ESNext",
    "types": ["vite/client"],
    "skipLibCheck": true,

    /* Bundler mode */
    "moduleResolution": "bundler",
    "allowImportingTsExtensions": true,
    "verbatimModuleSyntax": true,
    "moduleDetection": "force",
    "noEmit": true,
    "jsx": "react-jsx",

    /* Linting */
    "strict": true,
    "noUnusedLocals": true,
    "noUnusedParameters": true,
    "erasableSyntaxOnly": true,
    "noFallthroughCasesInSwitch": true,
    "noUncheckedSideEffectImports": true
  },
  "include": ["src"]
}


================================================================================


============================ frontend\tsconfig.json ============================
Full Path: C:\Users\USER\VSCODE\SUMMATIVES\Group_4_DevOps\frontend\tsconfig.json
Size: 565 bytes
Modified: 2025-11-30 22:14:55
Extension: .json
--------------------------------------------------------------------------------

{
  "compilerOptions": {
    "allowJs": true,
    "checkJs": false,
    "jsx": "react-jsx",
    "baseUrl": "./src",
    "moduleResolution": "bundler",
    "target": "ES2020",
    "module": "ESNext",
    "lib": ["ES2020", "DOM", "DOM.Iterable"],
    "isolatedModules": true,
    "skipLibCheck": true,
    "types": ["vite/client"],
    "esModuleInterop": true,
    "allowSyntheticDefaultImports": true,
    "strict": false,
    "noEmit": true,
    "resolveJsonModule": true
  },
  "include": ["src", "src/**/*"],
  "exclude": ["node_modules"]
}


================================================================================


========================= frontend\tsconfig.node.json =========================
Full Path: C:\Users\USER\VSCODE\SUMMATIVES\Group_4_DevOps\frontend\tsconfig.node.json
Size: 679 bytes
Modified: 2025-11-30 22:03:59
Extension: .json
--------------------------------------------------------------------------------

{
  "compilerOptions": {
    "tsBuildInfoFile": "./node_modules/.tmp/tsconfig.node.tsbuildinfo",
    "target": "ES2023",
    "lib": ["ES2023"],
    "module": "ESNext",
    "types": ["node"],
    "skipLibCheck": true,

    /* Bundler mode */
    "moduleResolution": "bundler",
    "allowImportingTsExtensions": true,
    "verbatimModuleSyntax": true,
    "moduleDetection": "force",
    "noEmit": true,

    /* Linting */
    "strict": true,
    "noUnusedLocals": true,
    "noUnusedParameters": true,
    "erasableSyntaxOnly": true,
    "noFallthroughCasesInSwitch": true,
    "noUncheckedSideEffectImports": true
  },
  "include": ["vite.config.ts"]
}


================================================================================


=========================== frontend\vite.config.ts ===========================
Full Path: C:\Users\USER\VSCODE\SUMMATIVES\Group_4_DevOps\frontend\vite.config.ts
Size: 168 bytes
Modified: 2025-11-30 22:03:59
Extension: .ts
--------------------------------------------------------------------------------

import { defineConfig } from 'vite'
import react from '@vitejs/plugin-react'

// https://vite.dev/config/
export default defineConfig({
  plugins: [react()],
})


================================================================================


=================================== LICENSE ===================================
Full Path: C:\Users\USER\VSCODE\SUMMATIVES\Group_4_DevOps\LICENSE
Size: 1093 bytes
Modified: 2025-11-30 22:03:59
Extension: None
--------------------------------------------------------------------------------

MIT License

Copyright (c) 2025 Komaiya Samuel 

Permission is hereby granted, free of charge, to any person obtaining a copy
of this software and associated documentation files (the "Software"), to deal
in the Software without restriction, including without limitation the rights
to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
copies of the Software, and to permit persons to whom the Software is
furnished to do so, subject to the following conditions:

The above copyright notice and this permission notice shall be included in all
copies or substantial portions of the Software.

THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
SOFTWARE.


================================================================================


================================== README.md ==================================
Full Path: C:\Users\USER\VSCODE\SUMMATIVES\Group_4_DevOps\README.md
Size: 15453 bytes
Modified: 2025-11-30 22:14:55
Extension: .md
--------------------------------------------------------------------------------

# LearnHub - A Lightweight African Learning Platform
> A data-efficient LMS designed for and by African students, built to practice production-level DevOps.

## Team Members
* Mukunzi Patrick (Frontend Developer)
* Samuel Komaiya (Backend Developer)
* Plamedi Mayala (Backend Developer)

## 🧭 Overview
LearnHub is a lightweight, mobile-first Learning Management System (LMS) built to address the unique challenges of university and secondary students across Africa.

### The Problem (African Context)
In many African educational institutions, students face significant barriers to digital learning. These include:
1.  **High Data Costs:** Internet access is expensive, making it difficult to stream video-heavy courses or download large files.
2.  **Scattered Resources:** Critical study materials like past exam papers, lecture notes, and study guides are often scattered across making them hard to find, track, and access.

### Our Solution & Value Proposition
LearnHub tackles this by providing a **central, data-efficient, and accessible platform**.

It is *intentionally* minimal, ensuring it is fast and consumes less data, making it ideal for low-bandwidth mobile connections. Our value proposition is **accessible education**:
* **For Students:** A "single source of truth" to find courses without high data usage.
* **For Instructors:** A simple way to upload content (text, video links).

### Project Goal (DevOps Course)
While the application is a functional LMS, its primary purpose in this course is to serve as a real-world workload for a robust DevOps implementation. The main goal is to design, develop, and deploy this production-ready application while mastering CI/CD, containerization, and cloud deployment practices.

## 🎯 Project Objectives
* Build a functional and minimal LMS that addresses the core problem of resource accessibility for African students.
* Implement role-based access for the two key user groups (Students and Instructors).
* Implement a full DevOps pipeline for continuous integration and deployment.
* Deploy the containerized, full-stack application to a cloud environment (e.g., AWS, Render).
* Ensure the final product is scalable, maintainable, and reliable.

## 👥 Target Users

### Students
* **Who:** University or senior secondary students in an African context (e.g., Nigeria, Kenya, Rwanda).
* **Needs:** A low-cost, easy-to-access, and reliable way to find localized study materials, course notes, and past papers.
* **Features:**
    * Register, log in, and manage a simple profile.
    * Browse available courses and enroll.
    * Access course lessons (text, video links) and download resources.
    * Track course completion progress.

### Instructors
* **Who:** University lecturers, teaching assistants (TAs), or even student tutors running study groups.
* **Needs:** A simple, fast way to upload materials and communicate with their students without a complex interface.
* **Features:**
    * Create, edit, and publish courses.
    * Upload lessons (text and videos links).
    * Manage student enrollments for their courses.
    * View student progress and submissions.

## ⚙️ Core Features (MVP Scope)

| Category | Features |
| :--- | :--- |
| **Authentication** | Django-based user registration & JWT authentication. Role-based access (Student/Instructor). |
| **Course Management** | Instructors can create, edit, and delete their own courses. |
| **Enrollment System** | Students can browse and enroll in published courses. |
| **Lesson Management** | Each course can have multiple lessons (text or video). |
| **Quizzes (Optional)** | Simple quiz functionality (multiple-choice). |
| **User Dashboard** | Track enrolled courses and progress. |
| **Responsive UI** | Modern, responsive interface built with TailwindCSS. |

## 🧩 Technology Stack
### Frontend
* React 18 + TypeScript
* Vite (fast build tool)
* Tailwind CSS for styling
* Axios for API requests
* React Router v6 for navigation
* React Context for authentication
* Redux Toolkit for course filtering and state management

### Backend
* Django REST Framework (Python)
* PostgreSQL database
* JWT Authentication via djangorestframework-simplejwt
* Docker for containerization

### DevOps & Deployment
* GitHub Actions for CI/CD pipelines
* Docker Compose for service orchestration
* AWS / Render / Railway for deployment
* Nginx as reverse proxy (optional)
* Environment variables for configuration management

## 🚀 Production Deployment

- **Live App URL:** http://YOUR_APP_PUBLIC_IP
- **Backend (API):** http://YOUR_APP_PUBLIC_IP:8000
- **Cloud Provider:** Microsoft Azure
- **Infra as Code:** Terraform (`terraform/` directory)
- **Configuration Management:** Ansible (`ansible/` directory)
- **CI/CD:** GitHub Actions (`.github/workflows/ci.yml` and `cd.yml`)


## 🧱 High-Level Architecture
Deployed as:
* **Frontend** → Hosted on Netlify / Vercel
* **Backend** → Hosted on Render / Railway / AWS EC2
* **Database** → PostgreSQL (managed service)
* **CI/CD** → GitHub Actions automated pipeline

## 🧪 Planned DevOps Implementations

| Tool | Purpose |
| :--- | :--- |
| **Docker** | Containerize frontend and backend services |
| **Docker Compose** | Manage multi-container setup |
| **GitHub Actions** | Build, test, and deploy automatically |
| **Environment Variables** | Secure configuration handling |
| **Cloud Deployment** | Deploy containers to Render, Railway, or AWS |

## 🧰 Project Structure

```bash
learnhub/
├── frontend/
│   ├── src/
│   │   ├── components/
│   │   ├── pages/
│   │   ├── context/
│   │   ├── redux/
│   │   └── App.tsx
│   ├── index.html
│   └── tailwind.config.js
│
├── backend/
│   ├── learnhub_api/
│   ├── api/
│   ├── manage.py
│   └── requirements.txt
│
├── Dockerfile
├── docker-compose.yml
└── .dockerignore
```

---

## 🧪 CI/CD Status

![CI Pipeline](https://github.com/Skomaiya/Group_4_DevOps/actions/workflows/ci.yml/badge.svg)
![Build Status](https://img.shields.io/badge/build-passing-brightgreen)
![Docker](https://img.shields.io/badge/docker-enabled-blue)

> **Note:** Replace `Skomaiya/Group_4_DevOps` with your actual GitHub username/organization and repository name.

---

## 🐳 Running with Docker Compose

This project is containerized using Docker and Docker Compose for easy local development and deployment.

### Prerequisites

- [Docker](https://docs.docker.com/get-docker/) (version 20.10 or higher)
- [Docker Compose](https://docs.docker.com/compose/install/) (version 2.0 or higher)

### Quick Start

1. **Clone the repository:**
   ```bash
   git clone https://github.com/Skomaiya/Group_4_DevOps.git
   cd Group_4_DevOps
   ```

2. **Start all services:**
   ```bash
   docker-compose up --build
   ```
   
   This command will:
   - Build the Django backend image
   - Start PostgreSQL database
   - Run database migrations
   - Start the Django development server on port 8000

3. **Access the application:**
   - **Backend API:** http://localhost:8000/api
   - **API Documentation (Swagger):** http://localhost:8000/api/schema/swagger-ui/
   - **API Documentation (ReDoc):** http://localhost:8000/api/schema/redoc/
   - **Admin Panel:** http://localhost:8000/admin/

---

## 💻 Local Development (Without Docker)

For development without Docker:

```bash
# Create and activate virtual environment
python -m venv .venv
source .venv/bin/activate  # On Windows: .venv\Scripts\activate

# Install dependencies
pip install -r backend/requirements.txt

# Set environment variables
export DJANGO_SETTINGS_MODULE=learnhub_api.settings
export SECRET_KEY=your-dev-secret-key
export DEBUG=True

# Run migrations
python backend/manage.py migrate

# Create a superuser (optional)
python backend/manage.py createsuperuser

# Start development server
python backend/manage.py runserver
```

The API will be available at http://localhost:8000/api

---

## 🧪 Testing & Code Quality

### Run Linting

Ensure code quality with flake8:

```bash
# Install flake8 if not already installed
pip install flake8

# Run linting on the entire project
flake8 backend/

# Run with specific configuration
flake8 backend/ --max-line-length=120 --exclude=migrations,__pycache__
```

### Run Tests

Execute the Django test suite:

```bash
# Run all tests
python backend/manage.py test --noinput

# Run tests with coverage
coverage run --source='backend' backend/manage.py test --noinput
coverage report

# Run specific test module
python backend/manage.py test api.tests.test_authentication

# Run tests in Docker
docker-compose exec web python manage.py test --noinput
```

### Pre-commit Checklist

Before pushing code, ensure:
- [ ] All tests pass: `python backend/manage.py test --noinput`
- [ ] Code passes linting: `flake8 backend/`
- [ ] Migrations are created: `python backend/manage.py makemigrations --check`
- [ ] No security issues: `python backend/manage.py check --deploy`
- [ ] Docker build succeeds: `docker-compose build`

---

## 🔧 Docker Compose Commands

```bash
# Start services in detached mode (background)
docker-compose up -d

# View real-time logs
docker-compose logs -f

# View logs for specific service
docker-compose logs -f web

# Stop services
docker-compose down

# Stop services and remove volumes (⚠️ deletes database data)
docker-compose down -v

# Rebuild containers after code changes
docker-compose up --build

# Restart a specific service
docker-compose restart web

# Run Django management commands
docker-compose exec web python manage.py migrate
docker-compose exec web python manage.py createsuperuser
docker-compose exec web python manage.py collectstatic --noinput
docker-compose exec web python manage.py shell

# Access PostgreSQL database
docker-compose exec db psql -U myuser -d learnhub_db

# View running containers
docker-compose ps
```

---

## 🔐 Environment Variables

Create a `.env` file in the project root for local development:

```env
# Django Settings
SECRET_KEY=your-secret-key-here-minimum-50-characters
DEBUG=True
ALLOWED_HOSTS=localhost,127.0.0.1

# Database Configuration
DB_ENGINE=django.db.backends.postgresql
DB_NAME=learnhub_db
DB_USER=myuser
DB_PASSWORD=your-secure-password
DB_HOST=db
DB_PORT=5432

# JWT Settings
JWT_EXPIRATION_HOURS=24

# Email Configuration (optional)
EMAIL_BACKEND=django.core.mail.backends.console.EmailBackend
```

> **Security Note:** Never commit `.env` files to version control. The `.env` file is included in `.gitignore`.

---

## 🚀 CI/CD Pipeline

Our GitHub Actions workflow automatically:

1. **Linting:** Runs flake8 to check code quality
2. **Testing:** Executes all Django tests
3. **Docker Build:** Validates Dockerfile and builds images
4. **Security Checks:** Runs Django security checks
5. **Deployment:** (Coming soon) Auto-deploy to production on merge to `main`

### Trigger CI Pipeline

The pipeline runs automatically on:
- Push to `main` or `develop` branches
- Pull requests to `main`
- Manual workflow dispatch

### View Pipeline Status

Check the status of your CI/CD pipeline:
- Visit: https://github.com/Skomaiya/Group_4_DevOps/actions
- Look for the green checkmark ✅ or red X ❌

---

## 🗄️ Database Migrations

### Create New Migrations

After modifying models:

```bash
# Using Docker
docker-compose exec web python manage.py makemigrations

# Without Docker
python backend/manage.py makemigrations
```

### Apply Migrations

```bash
# Using Docker
docker-compose exec web python manage.py migrate

# Without Docker
python backend/manage.py migrate
```

### View Migration Status

```bash
docker-compose exec web python manage.py showmigrations
```

---

## 🔍 Troubleshooting

### Port Already in Use

If port 8000 is already in use:

```bash
# Option 1: Stop the conflicting process
lsof -ti:8000 | xargs kill -9  # macOS/Linux
netstat -ano | findstr :8000   # Windows

# Option 2: Change port in docker-compose.yml
ports:
  - "8001:8000"  # Use port 8001 instead
```

### Database Connection Issues

```bash
# Recreate database container
docker-compose down -v
docker-compose up -d db
docker-compose exec web python manage.py migrate
```

### Container Build Failures

```bash
# Clear Docker cache and rebuild
docker-compose down
docker system prune -af
docker-compose build --no-cache
docker-compose up
```

### Permission Errors

```bash
# Fix file permissions (Linux/macOS)
sudo chown -R $USER:$USER .

# Run as root in container (not recommended for production)
docker-compose exec --user root web bash
```

---

## 📚 Additional Resources

- [Django Documentation](https://docs.djangoproject.com/)
- [Django REST Framework](https://www.django-rest-framework.org/)
- [Docker Documentation](https://docs.docker.com/)
- [GitHub Actions Documentation](https://docs.github.com/en/actions)

---

## 📝 DevOps Evidence Checklist

Use this checklist to track your DevOps implementation progress:

- [ ] **Version Control**
  - [ ] Repository initialized with meaningful commits
  - [ ] `.gitignore` configured properly
  - [ ] Branch protection rules enabled on `main`

- [ ] **Containerization**
  - [ ] Dockerfile created and optimized
  - [ ] docker-compose.yml configured
  - [ ] Multi-stage builds implemented (if applicable)
  - [ ] Non-root user configured in container

- [ ] **CI/CD Pipeline**
  - [ ] GitHub Actions workflow file created
  - [ ] Automated testing on push/PR
  - [ ] Linting integrated
  - [ ] Build status badge in README

- [ ] **Testing**
  - [ ] Unit tests written for models
  - [ ] API endpoint tests implemented
  - [ ] Test coverage > 70%
  - [ ] Tests run in CI pipeline

- [ ] **Security**
  - [ ] Secrets managed via environment variables
  - [ ] `.env` file in `.gitignore`
  - [ ] Django security checks pass
  - [ ] Dependencies scanned for vulnerabilities

- [ ] **Documentation**
  - [ ] README with setup instructions
  - [ ] API documentation (Swagger/ReDoc)
  - [ ] Code comments where necessary
  - [ ] Architecture diagram

- [ ] **Deployment**
  - [ ] Application deployed to cloud platform
  - [ ] Environment variables configured in production
  - [ ] Database migrations run successfully
  - [ ] Health checks implemented

---

## 🤝 Contributing

1. Fork the repository
2. Create a feature branch: `git checkout -b feature/your-feature-name`
3. Make your changes and commit: `git commit -m "Add your feature"`
4. Push to your branch: `git push origin feature/your-feature-name`
5. Open a Pull Request

---

## 📄 License

This project is licensed under the MIT License - see the LICENSE file for details.

---

## 👨‍💻 Team Contact

For questions or support, reach out to the team:
- **Patrick Mukunzi** - Frontend Development
- **Samuel Komaiya** - Backend Development
- **Plamedi Mayala** - Backend Development

**Repository:** https://github.com/Skomaiya/Group_4_DevOps

================================================================================


=========================== requirements.example.txt ===========================
Full Path: C:\Users\USER\VSCODE\SUMMATIVES\Group_4_DevOps\requirements.example.txt
Size: 772 bytes
Modified: 2025-11-30 22:14:55
Extension: .txt
--------------------------------------------------------------------------------

ÿþD j a n g o = = 5 . 0 . 6 
 
 d j a n g o r e s t f r a m e w o r k = = 3 . 1 5 . 2 
 
 d j a n g o r e s t f r a m e w o r k - s i m p l e j w t = = 5 . 3 . 1 
 
 d r f - s p e c t a c u l a r = = 0 . 2 7 . 2 
 
 d j a n g o - c o r s - h e a d e r s = = 4 . 4 . 0 
 
 d j a n g o - f i l t e r = = 2 4 . 2 
 
 
 
 #   D B   +   . e n v 
 
 p s y c o p g 2 - b i n a r y = = 2 . 9 . 9 
 
 p y t h o n - d o t e n v = = 1 . 0 . 1 
 
 
 
 #   T e s t i n g   &   l i n t i n g 
 
 p y t e s t = = 8 . 2 . 1 
 
 p y t e s t - d j a n g o = = 4 . 9 . 0 
 
 f l a k e 8 = = 7 . 1 . 1 
 
 
 
 #   O p t i o n a l   p r o d   s e r v e r   ( n o t   r e q u i r e d   f o r   d e v / C I ,   h a n d y   f o r   d e p l o y m e n t s ) 
 
 g u n i c o r n = = 2 2 . 0 . 0 
 
 

================================================================================


============================== terraform\main.tf ==============================
Full Path: C:\Users\USER\VSCODE\SUMMATIVES\Group_4_DevOps\terraform\main.tf
Size: 2014 bytes
Modified: 2025-11-30 22:14:55
Extension: .tf
--------------------------------------------------------------------------------

# Resource Group
resource "azurerm_resource_group" "main" {
  name     = "${var.project_name}-${var.environment}-rg"
  location = var.location
  tags     = var.tags
}

# Networking Module
module "networking" {
  source = "./modules/networking"

  project_name          = var.project_name
  environment           = var.environment
  location              = var.location
  resource_group_name   = azurerm_resource_group.main.name
  allowed_ssh_source_ip = var.allowed_ssh_source_ip
  tags                  = var.tags
}

# Compute Module
module "compute" {
  source = "./modules/compute"

  project_name         = var.project_name
  environment          = var.environment
  location             = var.location
  resource_group_name  = azurerm_resource_group.main.name
  public_subnet_id     = module.networking.public_subnet_id
  private_subnet_id    = module.networking.private_subnet_id
  vm_size              = var.vm_size
  admin_username       = var.admin_username
  admin_ssh_public_key = var.admin_ssh_public_key
  tags                 = var.tags

  depends_on = [module.networking]
}

# Database Module
module "database" {
  source = "./modules/database"

  project_name        = var.project_name
  environment         = var.environment
  location            = var.location
  resource_group_name = azurerm_resource_group.main.name
  database_subnet_id  = module.networking.database_subnet_id
  vnet_id             = module.networking.vnet_id
  db_admin_username   = var.db_admin_username
  db_admin_password   = var.db_admin_password
  db_name             = var.db_name
  tags                = var.tags

  depends_on = [module.networking]
}

# Container Registry Module
module "container_registry" {
  source = "./modules/container"

  project_name        = var.project_name
  environment         = var.environment
  location            = var.location
  resource_group_name = azurerm_resource_group.main.name
  tags                = var.tags
}


================================================================================


====================== terraform\modules\compute\main.tf ======================
Full Path: C:\Users\USER\VSCODE\SUMMATIVES\Group_4_DevOps\terraform\modules\compute\main.tf
Size: 3874 bytes
Modified: 2025-11-30 23:16:58
Extension: .tf
--------------------------------------------------------------------------------

############################################
# PUBLIC IP FOR BASTION ONLY
############################################

resource "azurerm_public_ip" "bastion" {
  name                = "${var.project_name}-${var.environment}-bastion-pip"
  location            = var.location
  resource_group_name = var.resource_group_name
  allocation_method   = "Static"
  sku                 = "Standard"
  tags                = var.tags
}

############################################
# REMOVE PUBLIC IP FOR APPLICATION VM
# (PRIVATE VM MUST NOT HAVE PUBLIC IP)
############################################

# ❌ This is removed:
# resource "azurerm_public_ip" "app" {...}

############################################
# NETWORK INTERFACE FOR BASTION
############################################

resource "azurerm_network_interface" "bastion" {
  name                = "${var.project_name}-${var.environment}-bastion-nic"
  location            = var.location
  resource_group_name = var.resource_group_name
  tags                = var.tags

  ip_configuration {
    name                          = "internal"
    subnet_id                     = var.public_subnet_id
    private_ip_address_allocation = "Dynamic"
    public_ip_address_id          = azurerm_public_ip.bastion.id
  }
}

############################################
# NETWORK INTERFACE FOR APPLICATION VM
# (PRIVATE VM = NO PUBLIC IP)
############################################

resource "azurerm_network_interface" "app" {
  name                = "${var.project_name}-${var.environment}-app-nic"
  location            = var.location
  resource_group_name = var.resource_group_name
  tags                = var.tags

  ip_configuration {
    name                          = "internal"
    subnet_id                     = var.private_subnet_id
    private_ip_address_allocation = "Dynamic"
    # ❌ Removed public_ip_address_id — App VM must stay private
  }
}

############################################
# BASTION HOST VM
############################################

resource "azurerm_linux_virtual_machine" "bastion" {
  name                = "${var.project_name}-${var.environment}-bastion"
  resource_group_name = var.resource_group_name
  location            = var.location
  size                = var.vm_size
  admin_username      = var.admin_username
  tags                = var.tags

  network_interface_ids = [
    azurerm_network_interface.bastion.id,
  ]

  admin_ssh_key {
    username   = var.admin_username
    public_key = var.admin_ssh_public_key
  }

  os_disk {
    caching              = "ReadWrite"
    storage_account_type = "Standard_LRS"
  }

  source_image_reference {
    publisher = "Canonical"
    offer     = "0001-com-ubuntu-server-jammy"
    sku       = "22_04-lts-gen2"
    version   = "latest"
  }

  disable_password_authentication = true
}

############################################
# APPLICATION VM (PRIVATE)
############################################

resource "azurerm_linux_virtual_machine" "app" {
  name                = "${var.project_name}-${var.environment}-app"
  resource_group_name = var.resource_group_name
  location            = var.location
  size                = var.vm_size
  admin_username      = var.admin_username
  tags                = var.tags

  network_interface_ids = [
    azurerm_network_interface.app.id,
  ]

  admin_ssh_key {
    username   = var.admin_username
    public_key = var.admin_ssh_public_key
  }

  os_disk {
    caching              = "ReadWrite"
    storage_account_type = "Standard_LRS"
  }

  source_image_reference {
    publisher = "Canonical"
    offer     = "0001-com-ubuntu-server-jammy"
    sku       = "22_04-lts-gen2"
    version   = "latest"
  }

  disable_password_authentication = true
}


================================================================================


===================== terraform\modules\compute\outputs.tf =====================
Full Path: C:\Users\USER\VSCODE\SUMMATIVES\Group_4_DevOps\terraform\modules\compute\outputs.tf
Size: 173 bytes
Modified: 2025-11-30 23:23:32
Extension: .tf
--------------------------------------------------------------------------------

output "bastion_public_ip" {
  value = azurerm_public_ip.bastion.ip_address
}

output "app_private_ip" {
  value = azurerm_network_interface.app.private_ip_address
}


================================================================================


==================== terraform\modules\compute\variables.tf ====================
Full Path: C:\Users\USER\VSCODE\SUMMATIVES\Group_4_DevOps\terraform\modules\compute\variables.tf
Size: 1034 bytes
Modified: 2025-11-30 22:14:55
Extension: .tf
--------------------------------------------------------------------------------

variable "project_name" {
  description = "Name of the project"
  type        = string
}

variable "environment" {
  description = "Environment name"
  type        = string
}

variable "location" {
  description = "Azure region"
  type        = string
}

variable "resource_group_name" {
  description = "Name of the resource group"
  type        = string
}

variable "public_subnet_id" {
  description = "ID of the public subnet"
  type        = string
}

variable "private_subnet_id" {
  description = "ID of the private subnet"
  type        = string
}

variable "vm_size" {
  description = "Size of the VMs"
  type        = string
  default     = "Standard_B1s"
}

variable "admin_username" {
  description = "Admin username for VMs"
  type        = string
}

variable "admin_ssh_public_key" {
  description = "SSH public key for VM access"
  type        = string
  sensitive   = true
}

variable "tags" {
  description = "Tags to apply to resources"
  type        = map(string)
}

================================================================================


===================== terraform\modules\container\main.tf =====================
Full Path: C:\Users\USER\VSCODE\SUMMATIVES\Group_4_DevOps\terraform\modules\container\main.tf
Size: 326 bytes
Modified: 2025-11-30 22:14:55
Extension: .tf
--------------------------------------------------------------------------------

# Azure Container Registry
resource "azurerm_container_registry" "main" {
  name                = "group4devops${var.environment}acr2025"
  resource_group_name = var.resource_group_name
  location            = var.location
  sku                 = "Basic"
  admin_enabled       = true
  tags                = var.tags
}

================================================================================


==================== terraform\modules\container\outputs.tf ====================
Full Path: C:\Users\USER\VSCODE\SUMMATIVES\Group_4_DevOps\terraform\modules\container\outputs.tf
Size: 593 bytes
Modified: 2025-11-30 22:14:55
Extension: .tf
--------------------------------------------------------------------------------

output "login_server" {
  description = "Login server for the Azure Container Registry"
  value       = azurerm_container_registry.main.login_server
}

output "admin_username" {
  description = "Admin username for ACR"
  value       = azurerm_container_registry.main.admin_username
  sensitive   = true
}

output "admin_password" {
  description = "Admin password for ACR"
  value       = azurerm_container_registry.main.admin_password
  sensitive   = true
}

output "id" {
  description = "ID of the container registry"
  value       = azurerm_container_registry.main.id
}

================================================================================


=================== terraform\modules\container\variables.tf ===================
Full Path: C:\Users\USER\VSCODE\SUMMATIVES\Group_4_DevOps\terraform\modules\container\variables.tf
Size: 474 bytes
Modified: 2025-11-30 22:14:55
Extension: .tf
--------------------------------------------------------------------------------

variable "project_name" {
  description = "Name of the project"
  type        = string
}

variable "environment" {
  description = "Environment name"
  type        = string
}

variable "location" {
  description = "Azure region"
  type        = string
}

variable "resource_group_name" {
  description = "Name of the resource group"
  type        = string
}

variable "tags" {
  description = "Tags to apply to resources"
  type        = map(string)
}

================================================================================


====================== terraform\modules\database\main.tf ======================
Full Path: C:\Users\USER\VSCODE\SUMMATIVES\Group_4_DevOps\terraform\modules\database\main.tf
Size: 1691 bytes
Modified: 2025-11-30 22:14:55
Extension: .tf
--------------------------------------------------------------------------------

# Private DNS Zone for PostgreSQL
resource "azurerm_private_dns_zone" "postgres" {
  name                = "${var.project_name}-${var.environment}.postgres.database.azure.com"
  resource_group_name = var.resource_group_name
  tags                = var.tags
}

# Link Private DNS Zone to VNet
resource "azurerm_private_dns_zone_virtual_network_link" "postgres" {
  name                  = "${var.project_name}-${var.environment}-postgres-vnet-link"
  resource_group_name   = var.resource_group_name
  private_dns_zone_name = azurerm_private_dns_zone.postgres.name
  virtual_network_id    = var.vnet_id
  tags                  = var.tags
}

# PostgreSQL Flexible Server
resource "azurerm_postgresql_flexible_server" "main" {
  name                   = "group4devops${var.environment}db"
  resource_group_name    = var.resource_group_name
  location               = var.location
  version                = "14"
  delegated_subnet_id    = var.database_subnet_id
  private_dns_zone_id    = azurerm_private_dns_zone.postgres.id
  administrator_login    = var.db_admin_username
  administrator_password = var.db_admin_password
  zone                   = "1"

  storage_mb = 32768
  sku_name   = "B_Standard_B1ms"

  # Explicitly disable public access (this is the default with delegated_subnet_id)
  public_network_access_enabled = false

  tags = var.tags

  depends_on = [azurerm_private_dns_zone_virtual_network_link.postgres]
}

# PostgreSQL Database
resource "azurerm_postgresql_flexible_server_database" "main" {
  name      = var.db_name
  server_id = azurerm_postgresql_flexible_server.main.id
  collation = "en_US.utf8"
  charset   = "utf8"
}


================================================================================


==================== terraform\modules\database\outputs.tf ====================
Full Path: C:\Users\USER\VSCODE\SUMMATIVES\Group_4_DevOps\terraform\modules\database\outputs.tf
Size: 576 bytes
Modified: 2025-11-30 22:14:55
Extension: .tf
--------------------------------------------------------------------------------

output "database_fqdn" {
  description = "Fully qualified domain name of the PostgreSQL server"
  value       = azurerm_postgresql_flexible_server.main.fqdn
}

output "database_name" {
  description = "Name of the database"
  value       = azurerm_postgresql_flexible_server_database.main.name
}

output "database_id" {
  description = "ID of the PostgreSQL server"
  value       = azurerm_postgresql_flexible_server.main.id
}

output "private_dns_zone_id" {
  description = "ID of the Private DNS Zone"
  value       = azurerm_private_dns_zone.postgres.id
}

================================================================================


=================== terraform\modules\database\variables.tf ===================
Full Path: C:\Users\USER\VSCODE\SUMMATIVES\Group_4_DevOps\terraform\modules\database\variables.tf
Size: 1077 bytes
Modified: 2025-11-30 22:14:55
Extension: .tf
--------------------------------------------------------------------------------

variable "project_name" {
  description = "Name of the project"
  type        = string
}

variable "environment" {
  description = "Environment name"
  type        = string
}

variable "location" {
  description = "Azure region"
  type        = string
}

variable "resource_group_name" {
  description = "Name of the resource group"
  type        = string
}

variable "database_subnet_id" {
  description = "ID of the database subnet"
  type        = string
}

variable "vnet_id" {
  description = "ID of the virtual network"
  type        = string
}

# REMOVED: private_subnet_prefix - no longer needed

variable "db_admin_username" {
  description = "Administrator username for database"
  type        = string
}

variable "db_admin_password" {
  description = "Administrator password for database"
  type        = string
  sensitive   = true
}

variable "db_name" {
  description = "Name of the database"
  type        = string
}

variable "tags" {
  description = "Tags to apply to resources"
  type        = map(string)
}

================================================================================


===================== terraform\modules\networking\main.tf =====================
Full Path: C:\Users\USER\VSCODE\SUMMATIVES\Group_4_DevOps\terraform\modules\networking\main.tf
Size: 5627 bytes
Modified: 2025-11-30 22:14:55
Extension: .tf
--------------------------------------------------------------------------------

# Virtual Network
resource "azurerm_virtual_network" "main" {
  name                = "${var.project_name}-${var.environment}-vnet"
  address_space       = var.vnet_address_space
  location            = var.location
  resource_group_name = var.resource_group_name
  tags                = var.tags
}

# Public Subnet (for Bastion Host)
resource "azurerm_subnet" "public" {
  name                 = "${var.project_name}-${var.environment}-public-subnet"
  resource_group_name  = var.resource_group_name
  virtual_network_name = azurerm_virtual_network.main.name
  address_prefixes     = [var.public_subnet_prefix]
}

# Private Subnet (for Application VM)
resource "azurerm_subnet" "private" {
  name                 = "${var.project_name}-${var.environment}-private-subnet"
  resource_group_name  = var.resource_group_name
  virtual_network_name = azurerm_virtual_network.main.name
  address_prefixes     = [var.private_subnet_prefix]

  service_endpoints = ["Microsoft.Sql"]
}

# Database Subnet (for PostgreSQL)
resource "azurerm_subnet" "database" {
  name                 = "${var.project_name}-${var.environment}-db-subnet"
  resource_group_name  = var.resource_group_name
  virtual_network_name = azurerm_virtual_network.main.name
  address_prefixes     = [var.database_subnet_prefix]

  delegation {
    name = "postgres-delegation"
    service_delegation {
      name = "Microsoft.DBforPostgreSQL/flexibleServers"
      actions = [
        "Microsoft.Network/virtualNetworks/subnets/join/action",
      ]
    }
  }
}

# Network Security Group for Bastion Host
resource "azurerm_network_security_group" "bastion" {
  name                = "${var.project_name}-${var.environment}-bastion-nsg"
  location            = var.location
  resource_group_name = var.resource_group_name
  tags                = var.tags

  security_rule {
    name                       = "AllowSSH"
    priority                   = 100
    direction                  = "Inbound"
    access                     = "Allow"
    protocol                   = "Tcp"
    source_port_range          = "*"
    destination_port_range     = "22"
    source_address_prefix      = var.allowed_ssh_source_ip
    destination_address_prefix = "*"
  }

  security_rule {
    name                       = "AllowSSHToPrivate"
    priority                   = 100
    direction                  = "Outbound"
    access                     = "Allow"
    protocol                   = "Tcp"
    source_port_range          = "*"
    destination_port_range     = "22"
    source_address_prefix      = "*"
    destination_address_prefix = var.private_subnet_prefix
  }
}

# Network Security Group for Application VM
resource "azurerm_network_security_group" "app" {
  name                = "${var.project_name}-${var.environment}-app-nsg"
  location            = var.location
  resource_group_name = var.resource_group_name
  tags                = var.tags

  # Allow SSH only from Bastion subnet
  security_rule {
    name                       = "AllowSSHFromBastion"
    priority                   = 100
    direction                  = "Inbound"
    access                     = "Allow"
    protocol                   = "Tcp"
    source_port_range          = "*"
    destination_port_range     = "22"
    source_address_prefix      = var.public_subnet_prefix
    destination_address_prefix = "*"
  }

  # Allow HTTP
  security_rule {
    name                       = "AllowHTTP"
    priority                   = 110
    direction                  = "Inbound"
    access                     = "Allow"
    protocol                   = "Tcp"
    source_port_range          = "*"
    destination_port_range     = "80"
    source_address_prefix      = "*"
    destination_address_prefix = "*"
  }

  # Allow HTTPS
  security_rule {
    name                       = "AllowHTTPS"
    priority                   = 120
    direction                  = "Inbound"
    access                     = "Allow"
    protocol                   = "Tcp"
    source_port_range          = "*"
    destination_port_range     = "443"
    source_address_prefix      = "*"
    destination_address_prefix = "*"
  }

  # Allow Django backend port
  security_rule {
    name                       = "AllowBackend"
    priority                   = 130
    direction                  = "Inbound"
    access                     = "Allow"
    protocol                   = "Tcp"
    source_port_range          = "*"
    destination_port_range     = "8000"
    source_address_prefix      = "*"
    destination_address_prefix = "*"
  }

  # Allow React frontend port (if needed for development)
  security_rule {
    name                       = "AllowFrontend"
    priority                   = 140
    direction                  = "Inbound"
    access                     = "Allow"
    protocol                   = "Tcp"
    source_port_range          = "*"
    destination_port_range     = "3000"
    source_address_prefix      = "*"
    destination_address_prefix = "*"
  }
}

# Associate NSG with Public Subnet
resource "azurerm_subnet_network_security_group_association" "bastion" {
  subnet_id                 = azurerm_subnet.public.id
  network_security_group_id = azurerm_network_security_group.bastion.id
}

# Associate NSG with Private Subnet
resource "azurerm_subnet_network_security_group_association" "app" {
  subnet_id                 = azurerm_subnet.private.id
  network_security_group_id = azurerm_network_security_group.app.id
}

================================================================================


=================== terraform\modules\networking\outputs.tf ===================
Full Path: C:\Users\USER\VSCODE\SUMMATIVES\Group_4_DevOps\terraform\modules\networking\outputs.tf
Size: 858 bytes
Modified: 2025-11-30 22:14:55
Extension: .tf
--------------------------------------------------------------------------------

output "vnet_id" {
  description = "ID of the virtual network"
  value       = azurerm_virtual_network.main.id
}

output "vnet_name" {
  description = "Name of the virtual network"
  value       = azurerm_virtual_network.main.name
}

output "public_subnet_id" {
  description = "ID of the public subnet"
  value       = azurerm_subnet.public.id
}

output "private_subnet_id" {
  description = "ID of the private subnet"
  value       = azurerm_subnet.private.id
}

output "database_subnet_id" {
  description = "ID of the database subnet"
  value       = azurerm_subnet.database.id
}

output "bastion_nsg_id" {
  description = "ID of the bastion NSG"
  value       = azurerm_network_security_group.bastion.id
}

output "app_nsg_id" {
  description = "ID of the app NSG"
  value       = azurerm_network_security_group.app.id
}

================================================================================


================== terraform\modules\networking\variables.tf ==================
Full Path: C:\Users\USER\VSCODE\SUMMATIVES\Group_4_DevOps\terraform\modules\networking\variables.tf
Size: 1185 bytes
Modified: 2025-11-30 22:14:55
Extension: .tf
--------------------------------------------------------------------------------

variable "project_name" {
  description = "Name of the project"
  type        = string
}

variable "environment" {
  description = "Environment name"
  type        = string
}

variable "location" {
  description = "Azure region"
  type        = string
}

variable "resource_group_name" {
  description = "Name of the resource group"
  type        = string
}

variable "vnet_address_space" {
  description = "Address space for VNet"
  type        = list(string)
  default     = ["10.0.0.0/16"]
}

variable "public_subnet_prefix" {
  description = "Address prefix for public subnet"
  type        = string
  default     = "10.0.1.0/24"
}

variable "private_subnet_prefix" {
  description = "Address prefix for private subnet"
  type        = string
  default     = "10.0.2.0/24"
}

variable "database_subnet_prefix" {
  description = "Address prefix for database subnet"
  type        = string
  default     = "10.0.3.0/24"
}

variable "allowed_ssh_source_ip" {
  description = "Allowed source IP for SSH to bastion"
  type        = string
}

variable "tags" {
  description = "Tags to apply to resources"
  type        = map(string)
}

================================================================================


============================= terraform\outputs.tf =============================
Full Path: C:\Users\USER\VSCODE\SUMMATIVES\Group_4_DevOps\terraform\outputs.tf
Size: 1975 bytes
Modified: 2025-11-30 23:25:13
Extension: .tf
--------------------------------------------------------------------------------

output "resource_group_name" {
  description = "Name of the resource group"
  value       = azurerm_resource_group.main.name
}

# Networking Outputs
output "vnet_name" {
  description = "Name of the virtual network"
  value       = module.networking.vnet_name
}

# Compute Outputs
output "bastion_public_ip" {
  description = "Public IP address of the Bastion Host"
  value       = module.compute.bastion_public_ip
}

output "app_private_ip" {
  description = "Private IP address of the Application VM"
  value       = module.compute.app_private_ip
}

# Database Outputs
output "database_fqdn" {
  description = "Fully qualified domain name of the PostgreSQL server"
  value       = module.database.database_fqdn
}

output "database_name" {
  description = "Name of the PostgreSQL database"
  value       = module.database.database_name
}

# Container Registry Outputs
output "container_registry_login_server" {
  description = "Login server for the Azure Container Registry"
  value       = module.container_registry.login_server
}

output "container_registry_admin_username" {
  description = "Admin username for ACR"
  value       = module.container_registry.admin_username
  sensitive   = true
}

output "container_registry_admin_password" {
  description = "Admin password for ACR"
  value       = module.container_registry.admin_password
  sensitive   = true
}

# SSH Commands
output "ssh_connection_commands" {
  description = "Commands to connect via SSH"
  value = {
    bastion         = "ssh ${var.admin_username}@${module.compute.bastion_public_ip}"
    app_via_bastion = "ssh -J ${var.admin_username}@${module.compute.bastion_public_ip} ${var.admin_username}@${module.compute.app_private_ip}"
  }
}

# Application URL (using Bastion or Load Balancer in future)
output "application_url" {
  description = "Application URL (temporary)"
  value       = "http://${module.compute.bastion_public_ip}"
}


================================================================================


============================ terraform\providers.tf ============================
Full Path: C:\Users\USER\VSCODE\SUMMATIVES\Group_4_DevOps\terraform\providers.tf
Size: 448 bytes
Modified: 2025-11-30 22:14:55
Extension: .tf
--------------------------------------------------------------------------------

terraform {
  required_version = ">= 1.0"

  # ❌ Disable Terraform Cloud backend
  # cloud {
  #   organization = "Group_4_DevOps"
  #   workspaces {
  #     name = "LearnHub"
  #   }
  # }

  required_providers {
    azurerm = {
      source  = "hashicorp/azurerm"
      version = "~>3.0"
    }
    random = {
      source  = "hashicorp/random"
      version = "~>3.0"
    }
  }
}

provider "azurerm" {
  features {}
}


================================================================================


============================ terraform\variables.tf ============================
Full Path: C:\Users\USER\VSCODE\SUMMATIVES\Group_4_DevOps\terraform\variables.tf
Size: 2403 bytes
Modified: 2025-11-30 22:14:55
Extension: .tf
--------------------------------------------------------------------------------

variable "project_name" {
  description = "Name of the project (used for resource naming)"
  type        = string
  default     = "Group-4-DevOps"
}

variable "environment" {
  description = "Environment name (dev, staging, prod)"
  type        = string
  default     = "prod"
}

variable "location" {
  description = "Azure region for resources"
  type        = string
  default     = "southafricanorth"
}

variable "admin_username" {
  description = "Admin username for VMs"
  type        = string
  default     = "azureuser"
}

variable "admin_ssh_public_key" {
  description = "SSH public key for VM access"
  type        = string
  sensitive   = true
  default     = "ssh-rsa AAAAB3NzaC1yc2EAAAADAQABAAACAQC7dffVNJ96yTzoocypnk6ikBhf1mW7kxJXyaPqBoBkpHhIdLAFhfKj4xDJk3vkxZJsKoJH70zLVMSU03j/uj8OnUY45bKqojIz/d1USbh9+YOoixLzUDYHfDLGEnyo/wjgmXJ0/PnxPZIBm4R7/7U9t4q8wzj7aWSLGsR/Id5uw0WyFWRg5c8N3iOZfoQ3zBxmRREcsJ07nhysu2vTDNfgglbiDdBx85vAERss/NuyTZPyxRZRq0FkqBflrecDXkdUzSe1rjcrmyxQiaKaakuj+JrEmYC6b86veOVhW78PhEgyjdbUhWOJquaadByOBOUV33nPIuQrW2rCdrAXZ9MzfUKhZ6BIlZtrnW+bj+0pbkWf3RX8Bf4psW8+Kfyt6aReOhCKogf3IhE7uPiqBhESp8zd5Lpxg0yeCt1iTL2vchp4384na2HgjPa362WgJmuryOWu/33l8RPcZv08DRSrgYWAaLzH3vFwpo2JpG2jm2het3UWUr8lRpnOe1Swn8qgImHfvJcVjmP+k7pUUJgk1ckOtT6Efx4AH5bZ6JTQa3v4jQ336PBiDH3DCiLTKkLb5s+bcCXZDNGmbyyxOyezOZcokxqE6WSAHX1bViSGLvI+IeSC7WXXziSi6sQCYDT5soQIwfUovIZJNLOyVZB8Ndn8TxisM7IMwfa0ThkDgw== user@PC"
}

variable "allowed_ssh_source_ip" {
  description = "Your public IP address for SSH access to bastion"
  type        = string
  default     = "102.22.142.193/32"
}

variable "db_admin_username" {
  description = "Administrator username for database"
  type        = string
  default     = "dbadmin"
}

variable "db_admin_password" {
  description = "Administrator password for database"
  type        = string
  sensitive   = true
  default     = "ChooseAStrongPassword123!"
}

variable "db_name" {
  description = "Name of the database"
  type        = string
  default     = "agriconnect_db"
}

variable "vm_size" {
  description = "Size of the VMs"
  type        = string
  default     = "Standard_B2s_v2"
}

variable "tags" {
  description = "Tags to apply to all resources"
  type        = map(string)
  default = {
    Project     = "Group-4-DevOps"
    ManagedBy   = "Terraform"
    Environment = "Production"
  }
}


================================================================================



========================================== DUMP COMPLETE ==========================================
Total Files Processed: 104
Output File: C:\Users\USER\VSCODE\SUMMATIVES\Group_4_DevOps\project_dump.txt
Completed: 2025-11-30 23:49:39
=================================================  =================================================